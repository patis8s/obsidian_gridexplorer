/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => GridExplorerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian22 = require("obsidian");

// src/GridView.ts
var import_obsidian20 = require("obsidian");

// src/renderHeaderButton.ts
var import_obsidian14 = require("obsidian");

// src/ExplorerView.ts
var import_obsidian11 = require("obsidian");

// src/utils/fileUtils.ts
var import_obsidian = require("obsidian");

// src/translations.ts
function t(key) {
  const lang = window.localStorage.getItem("language");
  const translations = TRANSLATIONS[lang] || TRANSLATIONS["en"];
  return translations[key] || key;
}
var TRANSLATIONS = {
  "zh-TW": {
    // 通知訊息
    "bookmarks_plugin_disabled": "\u8ACB\u5148\u555F\u7528\u66F8\u7C64\u5916\u639B",
    // 按鈕和標籤
    "sorting": "\u6392\u5E8F\u65B9\u5F0F",
    "refresh": "\u91CD\u65B0\u6574\u7406",
    "reselect": "\u91CD\u65B0\u9078\u64C7\u4F4D\u7F6E",
    "no_backlinks": "\u6C92\u6709\u53CD\u5411\u9023\u7D50",
    "back": "\u8FD4\u56DE",
    "search": "\u641C\u5C0B",
    "default_search_option": "\u9810\u8A2D\u641C\u5C0B\u9078\u9805",
    "search_placeholder": "\u641C\u5C0B\u95DC\u9375\u5B57",
    "search_current_location_only": "\u50C5\u641C\u5C0B\u76EE\u524D\u4F4D\u7F6E",
    "search_files_name_only": "\u50C5\u641C\u5C0B\u6A94\u540D",
    "search_media_files": "\u641C\u5C0B\u5A92\u9AD4\u6A94\u6848",
    "cancel": "\u53D6\u6D88",
    "new_note": "\u65B0\u589E\u7B46\u8A18",
    "new_folder": "\u65B0\u589E\u8CC7\u6599\u593E",
    "new_canvas": "\u65B0\u589E\u756B\u5E03",
    "new_base": "\u65B0\u589E base",
    "new_shortcut": "\u65B0\u589E\u6377\u5F91",
    "delete_folder": "\u522A\u9664\u8CC7\u6599\u593E",
    "move_folder": "\u642C\u79FB\u8CC7\u6599\u593E",
    "select_destination_folder": "\u9078\u64C7\u76EE\u6A19\u8CC7\u6599\u593E",
    "untitled": "\u672A\u547D\u540D",
    "files": "\u500B\u6A94\u6848",
    "add": "\u65B0\u589E",
    "root": "\u6839\u76EE\u9304",
    "sub_folders": "\u5B50\u76EE\u9304",
    "parent_folders": "\u4E0A\u5C64\u76EE\u9304",
    "more_options": "\u66F4\u591A\u9078\u9805",
    "add_tag_to_search": "\u52A0\u5165\u641C\u5C0B",
    "remove_tag_from_search": "\u5F9E\u641C\u5C0B\u4E2D\u79FB\u9664",
    "global_search": "\u5168\u57DF\u641C\u5C0B",
    "remove": "\u79FB\u9664",
    "edit": "\u7DE8\u8F2F",
    "delete": "\u522A\u9664",
    "save": "\u5132\u5B58",
    "option": "\u9078\u9805",
    "add_option": "\u65B0\u589E\u9078\u9805",
    // 視圖標題
    "grid_view_title": "\u7DB2\u683C\u8996\u5716",
    "modes": "\u6A21\u5F0F",
    "custom_modes": "\u81EA\u8A02\u6A21\u5F0F",
    "bookmarks_mode": "\u66F8\u7C64",
    "folder_mode": "\u8CC7\u6599\u593E",
    "search_results": "\u641C\u5C0B\u7D50\u679C",
    "backlinks_mode": "\u53CD\u5411\u9023\u7D50",
    "outgoinglinks_mode": "\u5916\u90E8\u9023\u7D50",
    "all_files_mode": "\u6240\u6709\u6A94\u6848",
    "recent_files_mode": "\u6700\u8FD1\u6A94\u6848",
    "random_note_mode": "\u96A8\u6A5F\u7B46\u8A18",
    "tasks_mode": "\u4EFB\u52D9",
    // 排序選項
    "sort_name_asc": "\u540D\u7A31 (A \u2192 Z)",
    "sort_name_desc": "\u540D\u7A31 (Z \u2192 A)",
    "sort_mtime_desc": "\u4FEE\u6539\u6642\u9593 (\u65B0 \u2192 \u820A)",
    "sort_mtime_asc": "\u4FEE\u6539\u6642\u9593 (\u820A \u2192 \u65B0)",
    "sort_ctime_desc": "\u5EFA\u7ACB\u6642\u9593 (\u65B0 \u2192 \u820A)",
    "sort_ctime_asc": "\u5EFA\u7ACB\u6642\u9593 (\u820A \u2192 \u65B0)",
    "sort_random": "\u96A8\u6A5F\u6392\u5E8F",
    // 設定
    "grid_view_settings": "\u7DB2\u683C\u8996\u5716\u8A2D\u5B9A",
    "folder_display_style": "\u8CC7\u6599\u593E\u986F\u793A\u6A23\u5F0F",
    "folder_display_style_desc": "\u8A2D\u5B9A\u8CC7\u6599\u593E\u5728\u7DB2\u683C\u8996\u5716\u4E2D\u7684\u986F\u793A\u65B9\u5F0F",
    "folder_display_style_show": "\u76F4\u63A5\u986F\u793A",
    "folder_display_style_menu": "\u4EE5\u9078\u55AE\u986F\u793A",
    "folder_display_style_hide": "\u4E0D\u986F\u793A",
    "show_media_files": "\u986F\u793A\u5A92\u9AD4\u6A94\u6848",
    "show_media_files_desc": "\u5728\u7DB2\u683C\u8996\u5716\u4E2D\u986F\u793A\u5A92\u9AD4\u6A94\u6848",
    "show_video_thumbnails": "\u986F\u793A\u5F71\u7247\u7E2E\u5716",
    "show_video_thumbnails_desc": "\u5728\u7DB2\u683C\u8996\u5716\u4E2D\u986F\u793A\u5F71\u7247\u7684\u7E2E\u5716\uFF0C\u95DC\u9589\u6642\u5C07\u986F\u793A\u64AD\u653E\u5716\u793A",
    "show_note_in_grid": "\u5728\u7DB2\u683C\u8996\u5716\u4E2D\u986F\u793A\u7B46\u8A18",
    "show_note_in_grid_desc": "\u555F\u7528\u5F8C\uFF0C\u9EDE\u64CA\u7B46\u8A18\u6703\u76F4\u63A5\u5728\u7DB2\u683C\u4E2D\u986F\u793A\u5167\u5BB9\uFF0C\u4E0D\u555F\u7528\u5247\u9700\u8981\u4F7F\u7528\u53F3\u9375\u9078\u55AE\u6253\u958B",
    "open_note_layout": "\u958B\u555F\u7B46\u8A18\u7684\u65B9\u5F0F",
    "open_note_layout_desc": "\u8A2D\u5B9A\u958B\u555F\u7B46\u8A18\u7684\u65B9\u5F0F",
    "open_note_layout_default": "\u9810\u8A2D",
    "open_note_layout_newTab": "\u65B0\u5206\u9801",
    "open_note_layout_split": "\u5206\u5272\u756B\u9762",
    "open_note_layout_newWindow": "\u65B0\u8996\u7A97",
    "show_note_tags": "\u986F\u793A\u7B46\u8A18\u6A19\u7C64",
    "show_note_tags_desc": "\u5728\u7DB2\u683C\u8996\u5716\u4E2D\u986F\u793A\u7B46\u8A18\u7684\u6A19\u7C64",
    "ignored_folders": "\u5FFD\u7565\u7684\u8CC7\u6599\u593E",
    "ignored_folders_desc": "\u5728\u9019\u88E1\u8A2D\u5B9A\u8981\u5FFD\u7565\u7684\u8CC7\u6599\u593E",
    "add_ignored_folder": "\u65B0\u589E\u5FFD\u7565\u8CC7\u6599\u593E",
    "no_ignored_folders": "\u6C92\u6709\u5FFD\u7565\u7684\u8CC7\u6599\u593E\u3002",
    "ignored_folder_patterns": "\u4EE5\u5B57\u4E32\u5FFD\u7565\u8CC7\u6599\u593E\u548C\u6A94\u6848",
    "ignored_folder_patterns_desc": "\u4F7F\u7528\u5B57\u4E32\u6A21\u5F0F\u5FFD\u7565\u8CC7\u6599\u593E\u548C\u6A94\u6848\uFF08\u652F\u63F4\u6B63\u5247\u8868\u9054\u5F0F\uFF09",
    "add_ignored_folder_pattern": "\u65B0\u589E\u5FFD\u7565\u8CC7\u6599\u593E\u6A21\u5F0F",
    "ignored_folder_pattern_placeholder": "\u8F38\u5165\u8CC7\u6599\u593E\u540D\u7A31\u6216\u6B63\u5247\u8868\u9054\u5F0F",
    "no_ignored_folder_patterns": "\u6C92\u6709\u5FFD\u7565\u7684\u8CC7\u6599\u593E\u6A21\u5F0F\u3002",
    "default_sort_type": "\u9810\u8A2D\u6392\u5E8F\u6A21\u5F0F",
    "default_sort_type_desc": "\u8A2D\u5B9A\u958B\u555F\u7DB2\u683C\u8996\u5716\u6642\u7684\u9810\u8A2D\u6392\u5E8F\u6A21\u5F0F",
    "note_title_field": "\u7B46\u8A18\u6A19\u984C\u6B04\u4F4D\u540D\u7A31",
    "note_title_field_desc": "\u6307\u5B9A frontmatter \u4E2D\u7528\u65BC\u7B46\u8A18\u6A19\u984C\u7684\u6B04\u4F4D\u540D\u7A31",
    "note_summary_field": "\u7B46\u8A18\u6458\u8981\u6B04\u4F4D\u540D\u7A31",
    "note_summary_field_desc": "\u6307\u5B9A frontmatter \u4E2D\u7528\u65BC\u7B46\u8A18\u6458\u8981\u7684\u6B04\u4F4D\u540D\u7A31",
    "modified_date_field": '"\u4FEE\u6539\u6642\u9593"\u6B04\u4F4D\u540D\u7A31',
    "modified_date_field_desc": "\u6307\u5B9A frontmatter \u4E2D\u7528\u65BC\u7B46\u8A18\u4FEE\u6539\u6642\u9593\u7684\u6B04\u4F4D\u540D\u7A31 (\u652F\u63F4\u591A\u500B\u6B04\u4F4D\u540D\u7A31\uFF0C\u7528\u9017\u865F\u5206\u9694)",
    "created_date_field": '"\u5EFA\u7ACB\u6642\u9593"\u6B04\u4F4D\u540D\u7A31',
    "created_date_field_desc": "\u6307\u5B9A frontmatter \u4E2D\u7528\u65BC\u7B46\u8A18\u5EFA\u7ACB\u6642\u9593\u7684\u6B04\u4F4D\u540D\u7A31 (\u652F\u63F4\u591A\u500B\u6B04\u4F4D\u540D\u7A31\uFF0C\u7528\u9017\u865F\u5206\u9694)",
    "grid_item_width": "\u7DB2\u683C\u9805\u76EE\u5BEC\u5EA6",
    "grid_item_width_desc": "\u8A2D\u5B9A\u7DB2\u683C\u9805\u76EE\u7684\u5BEC\u5EA6",
    "grid_item_height": "\u7DB2\u683C\u9805\u76EE\u9AD8\u5EA6",
    "grid_item_height_desc": "\u8A2D\u5B9A\u7DB2\u683C\u9805\u76EE\u7684\u9AD8\u5EA6 (\u8A2D\u70BA0\u6642\u70BA\u81EA\u52D5\u8ABF\u6574)",
    "image_area_width": "\u5716\u7247\u5340\u57DF\u5BEC\u5EA6",
    "image_area_width_desc": "\u8A2D\u5B9A\u5716\u7247\u9810\u89BD\u5340\u57DF\u7684\u5BEC\u5EA6",
    "image_area_height": "\u5716\u7247\u5340\u57DF\u9AD8\u5EA6",
    "image_area_height_desc": "\u8A2D\u5B9A\u5716\u7247\u9810\u89BD\u5340\u57DF\u7684\u9AD8\u5EA6",
    "title_font_size": "\u6A19\u984C\u5B57\u9AD4\u5927\u5C0F",
    "title_font_size_desc": "\u8A2D\u5B9A\u6A19\u984C\u5B57\u9AD4\u7684\u5927\u5C0F",
    "summary_length": "\u6458\u8981\u9577\u5EA6",
    "summary_length_desc": "\u8A2D\u5B9A\u6458\u8981\u7684\u9577\u5EA6",
    "grid_item_style_settings": "\u7DB2\u683C\u9805\u76EE\u6A23\u5F0F\u8A2D\u5B9A",
    "card_layout": "\u5361\u7247\u7248\u9762",
    "card_layout_desc": "\u9078\u64C7\u9810\u8A2D\u7684\u5361\u7247\u7248\u9762\u6A23\u5F0F",
    "horizontal_card": "\u6A6B\u5411\u5361\u7247",
    "vertical_card": "\u76F4\u5411\u5361\u7247",
    "image_position": "\u5716\u7247\u4F4D\u7F6E",
    "image_position_desc": "\u8A2D\u5B9A\u5716\u7247\u7684\u4F4D\u7F6E",
    "top": "\u9802\u90E8",
    "bottom": "\u5E95\u90E8",
    "multi_line_title": "\u6A19\u984C\u652F\u63F4\u591A\u884C\u986F\u793A",
    "multi_line_title_desc": "\u8A2D\u5B9A\u662F\u5426\u5141\u8A31\u6A19\u984C\u591A\u884C\u986F\u793A",
    "show_code_block_in_summary": "\u6458\u8981\u4E2D\u986F\u793ACodeBlock",
    "show_code_block_in_summary_desc": "\u8A2D\u5B9A\u662F\u5426\u5728\u6458\u8981\u4E2D\u986F\u793ACodeBlock\u7684\u5167\u5BB9",
    "enable_file_watcher": "\u555F\u7528\u6A94\u6848\u76E3\u63A7",
    "enable_file_watcher_desc": "\u555F\u7528\u5F8C\u6703\u81EA\u52D5\u5075\u6E2C\u6A94\u6848\u8B8A\u66F4\u4E26\u66F4\u65B0\u8996\u5716\uFF0C\u95DC\u9589\u5F8C\u9700\u624B\u52D5\u9EDE\u64CA\u91CD\u65B0\u6574\u7406\u6309\u9215",
    "intercept_all_tag_clicks": "\u6514\u622A\u6240\u6709\u6A19\u7C64\u9EDE\u64CA\u4E8B\u4EF6",
    "intercept_all_tag_clicks_desc": "\u555F\u7528\u5F8C\u6703\u6514\u622A\u6240\u6709\u6A19\u7C64\u9EDE\u64CA\u4E8B\u4EF6\uFF0C\u4E26\u5728\u7DB2\u683C\u8996\u5716\u4E2D\u6253\u958B\u6A19\u7C64",
    "intercept_breadcrumb_clicks": "\u6514\u622A\u7B46\u8A18\u5C0E\u822A\u5217\u9EDE\u64CA\u4E8B\u4EF6",
    "intercept_breadcrumb_clicks_desc": "\u555F\u7528\u5F8C\u6703\u6514\u622A\u7B46\u8A18\u5C0E\u822A\u5217\u9EDE\u64CA\u4E8B\u4EF6\uFF0C\u4E26\u5728\u7DB2\u683C\u8996\u5716\u4E2D\u6253\u958B\u8DEF\u5F91",
    "reset_to_default": "\u91CD\u7F6E\u70BA\u9810\u8A2D\u503C",
    "settings_reset_notice": "\u8A2D\u5B9A\u503C\u5DF2\u91CD\u7F6E\u70BA\u9810\u8A2D\u503C",
    "config_management": "\u8A2D\u5B9A\u6A94\u7BA1\u7406",
    "config_management_desc": "\u7BA1\u7406\u8A2D\u5B9A\u6A94\u7684\u91CD\u7F6E\u3001\u532F\u51FA\u548C\u532F\u5165",
    "ignored_folders_settings": "\u5FFD\u7565\u8CC7\u6599\u593E\u8A2D\u5B9A",
    "display_mode_settings": "\u986F\u793A\u6A21\u5F0F\u8A2D\u5B9A",
    "custom_mode_settings": "\u81EA\u8A02\u6A21\u5F0F\u8A2D\u5B9A",
    "add_custom_mode": "\u65B0\u589E\u81EA\u8A02\u6A21\u5F0F",
    "export": "\u532F\u51FA",
    "import": "\u532F\u5165",
    "no_custom_modes_to_export": "\u6C92\u6709\u53EF\u532F\u51FA\u7684\u81EA\u8A02\u6A21\u5F0F",
    "export_success_vault": "\u81EA\u8A02\u6A21\u5F0F\u5DF2\u532F\u51FA\u81F3 {filename}",
    "export_error": "\u532F\u51FA\u5931\u6557",
    "import_success": "\u532F\u5165\u6210\u529F",
    "import_error": "\u532F\u5165\u5931\u6557\uFF1A\u7121\u6548\u7684\u6A94\u6848\u683C\u5F0F",
    "edit_custom_mode": "\u7DE8\u8F2F\u81EA\u8A02\u6A21\u5F0F",
    "custom_mode": "\u81EA\u8A02\u6A21\u5F0F",
    "custom_mode_display_name": "\u986F\u793A\u540D\u7A31",
    "custom_mode_display_name_desc": "\u5728\u6A21\u5F0F\u9078\u55AE\u4E2D\u986F\u793A\u7684\u540D\u7A31",
    "custom_mode_dataview_code": "Dataviewjs \u4EE3\u78BC",
    "custom_mode_dataview_code_desc": "\u8F38\u5165 Dataviewjs \u4EE3\u78BC\u4EE5\u53D6\u5F97\u6A94\u6848\u5217\u8868",
    "custom_mode_sub_options": "\u81EA\u8A02\u6A21\u5F0F\u5B50\u9078\u9805",
    "custom_mode_fields_placeholder": "\u8F38\u5165 frontmatter \u6B04\u4F4D\u540D\u7A31\uFF0C\u7528\u9017\u865F\u5206\u9694 (\u5982: date,category,status) (\u53EF\u9078)",
    "dataview_plugin_not_enabled": "Dataview \u5916\u639B\u672A\u555F\u7528",
    "show_bookmarks_mode": "\u986F\u793A\u66F8\u7C64\u6A21\u5F0F",
    "show_search_mode": "\u986F\u793A\u641C\u5C0B\u7D50\u679C\u6A21\u5F0F",
    "show_backlinks_mode": "\u986F\u793A\u53CD\u5411\u9023\u7D50\u6A21\u5F0F",
    "show_outgoinglinks_mode": "\u986F\u793A\u5916\u90E8\u9023\u7D50\u6A21\u5F0F",
    "show_all_files_mode": "\u986F\u793A\u6240\u6709\u6A94\u6848\u6A21\u5F0F",
    "show_recent_files_mode": "\u986F\u793A\u6700\u8FD1\u6A94\u6848\u6A21\u5F0F",
    "recent_files_count": "\u6700\u8FD1\u6A94\u6848\u6A21\u5F0F\u986F\u793A\u7B46\u6578",
    "show_random_note_mode": "\u986F\u793A\u96A8\u6A5F\u7B46\u8A18\u6A21\u5F0F",
    "random_note_count": "\u96A8\u6A5F\u7B46\u8A18\u6A21\u5F0F\u986F\u793A\u7B46\u6578",
    "random_note_notes_only": "\u50C5\u7B46\u8A18",
    "random_note_include_media_files": "\u5305\u542B\u5A92\u9AD4\u6A94\u6848",
    "show_tasks_mode": "\u986F\u793A\u4EFB\u52D9\u6A21\u5F0F",
    "task_filter": "\u4EFB\u52D9\u5206\u985E",
    "uncompleted": "\u672A\u5B8C\u6210",
    "completed": "\u5DF2\u5B8C\u6210",
    "foldernote_display_settings": "\u8CC7\u6599\u593E\u7B46\u8A18\u986F\u793A\u8A2D\u5B9A",
    "foldernote_display_settings_desc": "\u8A2D\u5B9A\u8CC7\u6599\u593E\u7B46\u8A18\u7684\u986F\u793A\u65B9\u5F0F",
    "all": "\u5168\u90E8",
    "default": "\u9810\u8A2D",
    "hidden": "\u96B1\u85CF",
    // 隱藏頂部元素
    "hide_header_elements": "\u96B1\u85CF\u9802\u90E8\u5143\u7D20",
    // 預設開啟位置設定
    "default_open_location": "\u9810\u8A2D\u958B\u555F\u4F4D\u7F6E",
    "default_open_location_desc": "\u8A2D\u5B9A\u7DB2\u683C\u8996\u5716\u9810\u8A2D\u958B\u555F\u7684\u4F4D\u7F6E",
    "open_in_left_sidebar": "\u958B\u5728\u5DE6\u5074\u908A\u6B04",
    "open_in_right_sidebar": "\u958B\u5728\u53F3\u5074\u908A\u6B04",
    "open_in_new_tab": "\u5728\u65B0\u5206\u9801\u958B\u555F",
    "reuse_existing_leaf": "\u91CD\u8907\u4F7F\u7528\u5DF2\u958B\u555F\u7684\u8996\u5716",
    "reuse_existing_leaf_desc": "\u958B\u555F\u7DB2\u683C\u8996\u5716\u6642\uFF0C\u512A\u5148\u4F7F\u7528\u5DF2\u958B\u555F\u7684\u8996\u5716\u800C\u975E\u5EFA\u7ACB\u65B0\u8996\u5716",
    "custom_document_extensions": "\u81EA\u8A02\u6587\u4EF6\u6A94\u6848\u526F\u6A94\u540D",
    "custom_document_extensions_desc": "\u984D\u5916\u7684\u6587\u4EF6\u526F\u6A94\u540D\uFF08\u7528\u9017\u865F\u5206\u9694\uFF0C\u4E0D\u542B\u9EDE\u865F\uFF09",
    "custom_document_extensions_placeholder": "\u4F8B\u5982\uFF1Atxt,doc,docx",
    "custom_folder_icon": "\u81EA\u8A02\u8CC7\u6599\u593E\u5716\u793A",
    "custom_folder_icon_desc": "\u81EA\u8A02\u8CC7\u6599\u593E\u5716\u793A\uFF08\u4F7F\u7528Emoji\uFF09",
    // 選擇資料夾對話框
    "select_folders": "\u9078\u64C7\u8CC7\u6599\u593E",
    "select_folders_to_ignore": "\u9078\u64C7\u8981\u5FFD\u7565\u7684\u8CC7\u6599\u593E",
    "explorer": "\u700F\u89BD\u5668",
    "open_explorer": "\u958B\u555F\u700F\u89BD\u5668",
    "open_grid_view": "\u958B\u555F\u7DB2\u683C\u8996\u5716",
    "open_in_grid_view": "\u5728\u7DB2\u683C\u8996\u5716\u958B\u555F",
    "show_note_in_grid_view": "\u5728\u7DB2\u683C\u8996\u5716\u986F\u793A\u7B46\u8A18",
    "open_note_in_grid_view": "\u5728\u7DB2\u683C\u8996\u5716\u958B\u555F\u7576\u524D\u7B46\u8A18",
    "open_backlinks_in_grid_view": "\u5728\u7DB2\u683C\u8996\u5716\u958B\u555F\u53CD\u5411\u9023\u7D50",
    "open_outgoinglinks_in_grid_view": "\u5728\u7DB2\u683C\u8996\u5716\u958B\u555F\u5916\u90E8\u9023\u7D50",
    "open_recent_files_in_grid_view": "\u5728\u6700\u8FD1\u6A94\u6848\u958B\u555F\u7576\u524D\u7B46\u8A18",
    "open_settings": "\u958B\u555F\u8A2D\u5B9A",
    "open_new_grid_view": "\u958B\u555F\u65B0\u7DB2\u683C\u8996\u5716",
    "open_in_new_grid_view": "\u5728\u65B0\u7DB2\u683C\u8996\u5716\u4E2D\u958B\u555F",
    "min_mode": "\u6700\u5C0F\u5316\u6A21\u5F0F",
    "show_ignored_folders": "\u986F\u793A\u5FFD\u7565\u7684\u8CC7\u6599\u593E",
    "delete_note": "\u522A\u9664\u6A94\u6848",
    "open_folder_note": "\u958B\u555F\u8CC7\u6599\u593E\u7B46\u8A18",
    "create_folder_note": "\u5EFA\u7ACB\u8CC7\u6599\u593E\u7B46\u8A18",
    "delete_folder_note": "\u522A\u9664\u8CC7\u6599\u593E\u7B46\u8A18",
    "edit_folder_note_settings": "\u7DE8\u8F2F\u8CC7\u6599\u593E\u7B46\u8A18\u8A2D\u5B9A",
    "ignore_folder": "\u5FFD\u7565\u6B64\u8CC7\u6599\u593E",
    "unignore_folder": "\u53D6\u6D88\u5FFD\u7565\u6B64\u8CC7\u6599\u593E",
    "searching": "\u641C\u5C0B\u4E2D...",
    "no_files": "\u6C92\u6709\u627E\u5230\u4EFB\u4F55\u6A94\u6848",
    "filter_folders": "\u7BE9\u9078\u8CC7\u6599\u593E...",
    "search_for": "\u641C\u5C0B",
    // 快捷方式選擇對話框
    "create_shortcut": "\u5EFA\u7ACB\u6377\u5F91",
    "select_folder": "\u9078\u64C7\u8CC7\u6599\u593E",
    "select_file": "\u9078\u64C7\u6A94\u6848",
    "target_not_found": "\u76EE\u6A19\u672A\u627E\u5230",
    "shortcut_created": "\u6377\u5F91\u5DF2\u5EFA\u7ACB",
    "failed_to_create_shortcut": "\u5EFA\u7ACB\u6377\u5F91\u5931\u6557",
    // 資料夾筆記設定對話框
    "folder_note_settings": "\u8CC7\u6599\u593E\u7B46\u8A18\u8A2D\u5B9A",
    "folder_sort_type": "\u8CC7\u6599\u593E\u6392\u5E8F\u65B9\u5F0F",
    "folder_sort_type_desc": "\u8A2D\u5B9A\u6B64\u8CC7\u6599\u593E\u7684\u9810\u8A2D\u6392\u5E8F\u65B9\u5F0F",
    "folder_color": "\u8CC7\u6599\u593E\u984F\u8272",
    "folder_color_desc": "\u8A2D\u5B9A\u6B64\u8CC7\u6599\u593E\u7684\u986F\u793A\u984F\u8272",
    "folder_icon": "\u8CC7\u6599\u593E\u5716\u793A",
    "folder_icon_desc": "\u8A2D\u5B9A\u6B64\u8CC7\u6599\u593E\u7684\u986F\u793A\u5716\u793A",
    "no_color": "\u7121\u984F\u8272",
    "color_red": "\u7D05\u8272",
    "color_orange": "\u6A59\u8272",
    "color_yellow": "\u9EC3\u8272",
    "color_green": "\u7DA0\u8272",
    "color_cyan": "\u9752\u8272",
    "color_blue": "\u85CD\u8272",
    "color_purple": "\u7D2B\u8272",
    "color_pink": "\u7C89\u8272",
    "color_custom": "\u81EA\u8A02\u984F\u8272",
    "confirm": "\u78BA\u8A8D",
    "search_text": "\u641C\u5C0B\u6587\u5B57",
    "enter_search_text": "\u8F38\u5165\u641C\u5C0B\u6587\u5B57",
    "enter_uri": "\u8F38\u5165\u7DB2\u5740",
    "enter_uri_placeholder": "\u8F38\u5165\u7DB2\u5740\u6216 obsidian:// \u5354\u8B70",
    "note_attribute_settings": "\u7B46\u8A18\u5C6C\u6027\u8A2D\u5B9A",
    "note_title": "\u7B46\u8A18\u6A19\u984C",
    "note_title_desc": "\u8A2D\u5B9A\u6B64\u7B46\u8A18\u7684\u986F\u793A\u6A19\u984C",
    "note_summary": "\u7B46\u8A18\u6458\u8981",
    "note_summary_desc": "\u8A2D\u5B9A\u6B64\u7B46\u8A18\u7684\u6458\u8981",
    "note_color": "\u7B46\u8A18\u984F\u8272",
    "note_color_desc": "\u8A2D\u5B9A\u6B64\u7B46\u8A18\u7684\u986F\u793A\u984F\u8272",
    "custom_hex_color": "\u81EA\u8A02 HEX \u8272\u503C",
    "custom_hex_color_desc": "\u8F38\u5165\u81EA\u8A02\u7684 HEX \u8272\u503C\uFF08\u4F8B\u5982 #FF8800 \u6216 #F80\uFF09",
    "set_note_attribute": "\u8A2D\u5B9A\u7B46\u8A18\u5C6C\u6027",
    "rename_folder": "\u91CD\u65B0\u547D\u540D\u8CC7\u6599\u593E",
    "enter_new_folder_name": "\u8F38\u5165\u65B0\u8CC7\u6599\u593E\u540D\u7A31",
    "search_selection_in_grid_view": "\u5728\u7DB2\u683C\u8996\u5716\u641C\u5C0B...",
    "show_date_dividers": "\u986F\u793A\u65E5\u671F\u5206\u9694\u5668",
    "show_date_dividers_desc": "\u5728\u65E5\u671F\u76F8\u95DC\u6392\u5E8F\u6642\uFF0C\u5728\u4E0D\u540C\u5929\u7684\u7B2C\u4E00\u7B46\u4E4B\u524D\u986F\u793A\u65E5\u671F\u5206\u9694\u5668",
    "date_divider_format": "\u65E5\u671F\u5206\u9694\u5668\u683C\u5F0F",
    "date_divider_mode": "\u65E5\u671F\u5206\u9694\u5668",
    "date_divider_mode_desc": "\u9078\u64C7\u65E5\u671F\u5206\u9694\u5668\u7684\u986F\u793A\u6A21\u5F0F",
    "date_divider_mode_none": "\u4E0D\u4F7F\u7528",
    "date_divider_mode_year": "\u5E74",
    "date_divider_mode_month": "\u6708",
    "date_divider_mode_day": "\u65E5",
    "pinned": "\u7F6E\u9802",
    "pinned_desc": "\u5C07\u6B64\u6A94\u6848\u56FA\u5B9A\u5728\u6700\u4E0A\u65B9",
    "foldernote_pinned": "\u8CC7\u6599\u593E\u7B46\u8A18\u7F6E\u9802",
    "foldernote_pinned_desc": "\u5C07\u8CC7\u6599\u593E\u7B46\u8A18\u56FA\u5B9A\u5728\u6700\u4E0A\u65B9",
    "display_minimized": "\u6700\u5C0F\u5316\u986F\u793A",
    "display_minimized_desc": "\u5C07\u6B64\u7B46\u8A18\u4EE5\u6700\u5C0F\u5316\u65B9\u5F0F\u986F\u793A",
    // Quick Access Settings and Commands
    "quick_access_settings_title": "\u5FEB\u901F\u5B58\u53D6\u8A2D\u5B9A",
    "quick_access_folder_name": "\u5FEB\u901F\u5B58\u53D6\u8CC7\u6599\u593E",
    "quick_access_folder_desc": "\u8A2D\u5B9A\u300C\u958B\u555F\u5FEB\u901F\u5B58\u53D6\u8CC7\u6599\u593E\u300D\u547D\u4EE4\u6240\u4F7F\u7528\u7684\u8CC7\u6599\u593E",
    "quick_access_mode_name": "\u5FEB\u901F\u5B58\u53D6\u6A21\u5F0F",
    "quick_access_mode_desc": "\u8A2D\u5B9A\u300C\u958B\u555F\u5FEB\u901F\u5B58\u53D6\u6A21\u5F0F\u300D\u547D\u4EE4\u6240\u4F7F\u7528\u7684\u9810\u8A2D\u6A21\u5F0F",
    "use_quick_access_as_new_tab_view": "\u5C07\u5FEB\u901F\u5B58\u53D6\u4F5C\u70BA\u65B0\u5206\u9801\u4F7F\u7528",
    "use_quick_access_as_new_tab_view_desc": "\u5C07\u9810\u8A2D\u7684\u300C\u65B0\u5206\u9801\u300D\u756B\u9762\u66FF\u63DB\u70BA\u6240\u9078\u5FEB\u901F\u5B58\u53D6\u9078\u9805\uFF08\u8CC7\u6599\u593E\u6216\u6A21\u5F0F\uFF09\u7684\u7DB2\u683C\u6AA2\u8996\u3002\u6B64\u8A2D\u5B9A\u50C5\u5728\u300C\u9810\u8A2D\u958B\u555F\u4F4D\u7F6E\u300D\u8A2D\u70BA\u300C\u5728\u65B0\u5206\u9801\u958B\u555F\u300D\u6642\u6709\u6548\uFF01",
    "default_new_tab": "\u9810\u8A2D\u65B0\u5206\u9801",
    "use_quick_access_folder": "\u4F7F\u7528\u5FEB\u901F\u5B58\u53D6\u8CC7\u6599\u593E",
    "use_quick_access_mode": "\u4F7F\u7528\u5FEB\u901F\u5B58\u53D6\u6A21\u5F0F",
    "open_quick_access_folder": "\u958B\u555F\u5FEB\u901F\u5B58\u53D6\u8CC7\u6599\u593E",
    "open_quick_access_mode": "\u958B\u555F\u5FEB\u901F\u5B58\u53D6\u6A21\u5F0F",
    // Explorer Stash
    "stash": "\u66AB\u5B58\u5340",
    "drop_files_here": "\u62D6\u66F3\u6A94\u6848\u5230\u6B64\u66AB\u5B58",
    "clear": "\u6E05\u7A7A",
    "save_stash_as_markdown": "\u5C07\u66AB\u5B58\u5340\u5B58\u70BA Markdown",
    "add_to_stash": "\u52A0\u5165\u66AB\u5B58\u5340",
    "added_to_stash": "\u5DF2\u6DFB\u52A0\u5230\u66AB\u5B58\u5340"
  },
  "en": {
    // Notifications
    "bookmarks_plugin_disabled": "Please enable the Bookmarks plugin first",
    // Buttons and Labels
    "sorting": "Sort by",
    "refresh": "Refresh",
    "reselect": "Reselect",
    "no_backlinks": "No backlinks",
    "back": "Back",
    "search": "Search",
    "default_search_option": "Default search option",
    "search_placeholder": "Search keyword",
    "search_current_location_only": "Search current location only",
    "search_files_name_only": "Search files name only",
    "search_media_files": "Search media files",
    "cancel": "Cancel",
    "new_note": "New note",
    "new_folder": "New folder",
    "new_canvas": "New canvas",
    "new_base": "New base",
    "new_shortcut": "New shortcut",
    "delete_folder": "Delete Folder",
    "move_folder": "Move Folder",
    "select_destination_folder": "Select destination folder",
    "untitled": "Untitled",
    "files": "files",
    "add": "Add",
    "root": "Root",
    "sub_folders": "Sub folders",
    "parent_folders": "Parent folders",
    "more_options": "More options",
    "add_tag_to_search": "Add to search",
    "remove_tag_from_search": "Remove from search",
    "global_search": "Global search",
    "remove": "Remove",
    "edit": "Edit",
    "delete": "Delete",
    "save": "Save",
    "option": "Option",
    "add_option": "Add option",
    // View Titles
    "grid_view_title": "Grid view",
    "modes": "Modes",
    "custom_modes": "Custom Modes",
    "bookmarks_mode": "Bookmarks",
    "folder_mode": "Folder",
    "search_results": "Search results",
    "backlinks_mode": "Backlinks",
    "outgoinglinks_mode": "Outgoing links",
    "all_files_mode": "All files",
    "recent_files_mode": "Recent files",
    "random_note_mode": "Random note",
    "tasks_mode": "Tasks",
    // Sort Options
    "sort_name_asc": "Name (A \u2192 Z)",
    "sort_name_desc": "Name (Z \u2192 A)",
    "sort_mtime_desc": "Modified (New \u2192 Old)",
    "sort_mtime_asc": "Modified (Old \u2192 New)",
    "sort_ctime_desc": "Created (New \u2192 Old)",
    "sort_ctime_asc": "Created (Old \u2192 New)",
    "sort_random": "Random",
    // Settings
    "grid_view_settings": "Grid view settings",
    "folder_display_style": "Folder display style",
    "folder_display_style_desc": "Set how folders are displayed in the grid view",
    "folder_display_style_show": "Show directly",
    "folder_display_style_menu": "Show in menu",
    "folder_display_style_hide": "Hide",
    "show_media_files": "Show media files",
    "show_media_files_desc": "Display media files in the grid view.",
    "show_video_thumbnails": "Show video thumbnails",
    "show_video_thumbnails_desc": "Display thumbnails for videos in the grid view, shows a play icon when disabled.",
    "show_note_in_grid": "Show note in grid",
    "show_note_in_grid_desc": "Display note in grid container when clicked. If disabled, use right-click menu to open.",
    "open_note_layout": "Open note layout",
    "open_note_layout_desc": "Set how notes are opened in the grid view",
    "open_note_layout_default": "Default",
    "open_note_layout_newTab": "New tab",
    "open_note_layout_split": "Split",
    "open_note_layout_newWindow": "New window",
    "show_note_tags": "Show note tags",
    "show_note_tags_desc": "Display tags for notes in the grid view.",
    "ignored_folders": "Ignored folders",
    "ignored_folders_desc": "Set folders to ignore here",
    "add_ignored_folder": "Add ignored folder",
    "no_ignored_folders": "No ignored folders.",
    "ignored_folder_patterns": "Ignore folders and files by pattern",
    "ignored_folder_patterns_desc": "Use string patterns to ignore folders and files (supports regular expressions)",
    "add_ignored_folder_pattern": "Add folder pattern",
    "ignored_folder_pattern_placeholder": "Enter folder name or regex pattern",
    "no_ignored_folder_patterns": "No ignored folder patterns.",
    "default_sort_type": "Default sort type",
    "default_sort_type_desc": "Set the default sorting method when opening Grid View",
    "note_title_field": "Note title field name",
    "note_title_field_desc": "Set the field name in frontmatter to use for the note title",
    "note_summary_field": "Note summary field name",
    "note_summary_field_desc": "Set the field name in frontmatter to use for the note summary",
    "modified_date_field": '"Modified date" field name',
    "modified_date_field_desc": "Set the field name in frontmatter to use for the modified date (support multiple field names, separated by commas)",
    "created_date_field": '"Created date" field name',
    "created_date_field_desc": "Set the field name in frontmatter to use for the created date (support multiple field names, separated by commas)",
    "grid_item_width": "Grid item width",
    "grid_item_width_desc": "Set the width of grid items",
    "grid_item_height": "Grid item height",
    "grid_item_height_desc": "Set the height of grid items (set to 0 to automatically adjust)",
    "image_area_width": "Image area width",
    "image_area_width_desc": "Set the width of the image preview area",
    "image_area_height": "Image area height",
    "image_area_height_desc": "Set the height of the image preview area",
    "title_font_size": "Title font size",
    "title_font_size_desc": "Set the size of the title font",
    "summary_length": "Summary length",
    "summary_length_desc": "Set the length of summary",
    "grid_item_style_settings": "Grid item style settings",
    "card_layout": "Card layout",
    "card_layout_desc": "Choose default card layout",
    "horizontal_card": "Horizontal card",
    "vertical_card": "Vertical card",
    "image_position": "Image position",
    "image_position_desc": "Set the position of the image",
    "top": "Top",
    "bottom": "Bottom",
    "multi_line_title": "Multi-line title",
    "multi_line_title_desc": "Set whether to allow multi-line title",
    "show_code_block_in_summary": "Show code block in summary",
    "show_code_block_in_summary_desc": "Set whether to show code block in the summary",
    "enable_file_watcher": "Enable file watcher",
    "enable_file_watcher_desc": "When enabled, the view will automatically update when files change. If disabled, you need to click the refresh button manually",
    "intercept_all_tag_clicks": "Intercept all tag clicks",
    "intercept_all_tag_clicks_desc": "When enabled, all tag clicks will be intercepted and opened in the grid view",
    "intercept_breadcrumb_clicks": "Intercept breadcrumb clicks",
    "intercept_breadcrumb_clicks_desc": "When enabled, breadcrumb clicks will be intercepted and the path will be opened in the grid view",
    "reset_to_default": "Reset to default",
    "settings_reset_notice": "Settings have been reset to default values",
    "config_management": "Config management",
    "config_management_desc": "Manage config reset, export and import",
    "ignored_folders_settings": "Ignore folders settings",
    "display_mode_settings": "Display mode settings",
    "custom_mode_settings": "Custom Mode Settings",
    "add_custom_mode": "Add Custom Mode",
    "export": "Export",
    "import": "Import",
    "no_custom_modes_to_export": "No custom modes to export",
    "export_success_vault": "Custom modes exported to {filename}",
    "export_error": "Export failed",
    "import_success": "Import success",
    "import_error": "Import failed: Invalid file format",
    "edit_custom_mode": "Edit Custom Mode",
    "custom_mode": "Custom Mode",
    "custom_mode_display_name": "Display Name",
    "custom_mode_display_name_desc": "The name displayed in the mode menu",
    "custom_mode_dataview_code": "Dataview Query",
    "custom_mode_dataview_code_desc": "Enter a Dataview query to get the list of files",
    "custom_mode_sub_options": "Custom Mode Sub Options",
    "custom_mode_fields_placeholder": "Enter frontmatter field names, separated by commas (e.g. date,category,status) (optional)",
    "dataview_plugin_not_enabled": "Dataview plugin is not enabled",
    "show_bookmarks_mode": "Show bookmarks mode",
    "show_search_mode": "Show search results mode",
    "show_backlinks_mode": "Show backlinks mode",
    "show_outgoinglinks_mode": "Show outgoing links mode",
    "show_all_files_mode": "Show all files mode",
    "show_recent_files_mode": "Show recent files mode",
    "recent_files_count": "Recent files count",
    "show_random_note_mode": "Show random note mode",
    "random_note_count": "Random note count",
    "random_note_notes_only": "Notes Only",
    "random_note_include_media_files": "Include Media Files",
    "show_tasks_mode": "Show tasks mode",
    "task_filter": "Task filter",
    "uncompleted": "Uncompleted",
    "completed": "Completed",
    "foldernote_display_settings": "Folder note display settings",
    "foldernote_display_settings_desc": "Set the display mode of folder notes",
    "all": "All",
    "default": "Default",
    "hidden": "Hidden",
    // Hide header elements setting
    "hide_header_elements": "Hide header elements",
    // Default open location setting
    "default_open_location": "Default open location",
    "default_open_location_desc": "Set the default location to open the grid view",
    "open_in_left_sidebar": "Open in left sidebar",
    "open_in_right_sidebar": "Open in right sidebar",
    "open_in_new_tab": "Open in new tab",
    "reuse_existing_leaf": "Reuse existing view",
    "reuse_existing_leaf_desc": "When opening Grid View, prioritize using an existing view instead of creating a new one",
    "custom_document_extensions": "Custom Document Extensions",
    "custom_document_extensions_desc": "Additional document extensions (comma-separated, without dots)",
    "custom_document_extensions_placeholder": "e.g., txt,doc,docx",
    "custom_folder_icon": "Custom Folder Icon",
    "custom_folder_icon_desc": "Custom folder icon (use emoji)",
    // Select Folder Dialog
    "select_folders": "Select folder",
    "select_folders_to_ignore": "Select folders to ignore",
    "explorer": "Explorer",
    "open_explorer": "Open Explorer",
    "open_grid_view": "Open grid view",
    "open_in_grid_view": "Open in grid view",
    "show_note_in_grid_view": "Show note in grid view",
    "open_note_in_grid_view": "Open note in grid view",
    "open_backlinks_in_grid_view": "Open backlinks in grid view",
    "open_outgoinglinks_in_grid_view": "Open outgoing links in grid view",
    "open_recent_files_in_grid_view": "Open current note in recent files",
    "open_settings": "Open settings",
    "open_new_grid_view": "Open new grid view",
    "open_in_new_grid_view": "Open in new grid view",
    "min_mode": "Minimize mode",
    "show_ignored_folders": "Show ignored folders",
    "delete_note": "Delete file",
    "open_folder_note": "Open folder note",
    "create_folder_note": "Create folder note",
    "delete_folder_note": "Delete folder note",
    "edit_folder_note_settings": "Edit folder note settings",
    "ignore_folder": "Ignore this folder",
    "unignore_folder": "Unignore this folder",
    "searching": "Searching...",
    "no_files": "No files found",
    "filter_folders": "Filter folders...",
    "search_for": "Search for",
    // Shortcut Selection Dialog
    "create_shortcut": "Create Shortcut",
    "select_folder": "Select Folder",
    "select_file": "Select File",
    "target_not_found": "Target not found",
    "shortcut_created": "Shortcut created",
    "failed_to_create_shortcut": "Failed to create shortcut",
    // Folder Note Settings Dialog
    "folder_note_settings": "Folder Note Settings",
    "folder_sort_type": "Folder Sort Type",
    "folder_sort_type_desc": "Set the default sort type for this folder",
    "folder_color": "Folder Color",
    "folder_color_desc": "Set the display color for this folder",
    "folder_icon": "Folder Icon",
    "folder_icon_desc": "Set the display icon for this folder",
    "no_color": "No Color",
    "color_red": "Red",
    "color_orange": "Orange",
    "color_yellow": "Yellow",
    "color_green": "Green",
    "color_cyan": "Cyan",
    "color_blue": "Blue",
    "color_purple": "Purple",
    "color_pink": "Pink",
    "color_custom": "Custom",
    "confirm": "Confirm",
    "search_text": "Search Text",
    "enter_search_text": "Enter search text",
    "enter_uri": "Enter URI",
    "enter_uri_placeholder": "Enter URL or obsidian:// protocol",
    "note_attribute_settings": "Note attribute settings",
    "note_title": "Note title",
    "note_title_desc": "Set the display title for this note",
    "note_summary": "Note summary",
    "note_summary_desc": "Set the display summary for this note",
    "note_color": "Note color",
    "note_color_desc": "Set the display color for this note",
    "custom_hex_color": "Custom HEX Color",
    "custom_hex_color_desc": "Enter a custom HEX color value (e.g. #FF8800 or #F80)",
    "set_note_attribute": "Set note attribute",
    "rename_folder": "Rename folder",
    "enter_new_folder_name": "Enter new folder name",
    "search_selection_in_grid_view": "Search ... in grid view",
    "show_date_dividers": "Show date dividers",
    "show_date_dividers_desc": "Show date dividers before the first item of each different day when using date-related sorting",
    "date_divider_format": "Date divider format",
    "date_divider_mode": "Date divider",
    "date_divider_mode_desc": "Select the display mode for date dividers",
    "date_divider_mode_none": "None",
    "date_divider_mode_year": "Year",
    "date_divider_mode_month": "Month",
    "date_divider_mode_day": "Day",
    "pinned": "Pinned",
    "pinned_desc": "Pin this file at the top",
    "foldernote_pinned": "Folder note pinned",
    "foldernote_pinned_desc": "Pin this folder note at the top",
    "display_minimized": "Display minimized",
    "display_minimized_desc": "Show this note in minimized mode",
    // Quick Access Settings and Commands
    "quick_access_settings_title": "Quick Access Settings",
    "quick_access_folder_name": "Quick access folder",
    "quick_access_folder_desc": 'Set the folder used by the "Open quick access folder" command',
    "quick_access_mode_name": "Quick access mode",
    "quick_access_mode_desc": 'Set the default mode used by the "Open quick access mode" command',
    "use_quick_access_as_new_tab_view": "Use Quick Access as a new tab view",
    "use_quick_access_as_new_tab_view_desc": 'Replace the default "New Tab" view with a Grid View of the selected Quick Access option (folder or mode). Only works if default open location is set to "Open in new tab"!',
    "default_new_tab": "Default New Tab",
    "use_quick_access_folder": "Use quick access folder",
    "use_quick_access_mode": "Use quick access mode",
    "open_quick_access_folder": "Open quick access folder",
    "open_quick_access_mode": "Open quick access mode",
    // Explorer Stash
    "stash": "Stash",
    "drop_files_here": "Drop files here to stash",
    "clear": "Clear",
    "save_stash_as_markdown": "Save stash as Markdown",
    "add_to_stash": "Add to stash",
    "added_to_stash": "Added to stash"
  },
  "zh": {
    // 通知信息
    "bookmarks_plugin_disabled": "\u8BF7\u5148\u542F\u7528\u4E66\u7B7E\u63D2\u4EF6",
    // 按钮和标签
    "sorting": "\u6392\u5E8F\u65B9\u5F0F",
    "refresh": "\u5237\u65B0",
    "reselect": "\u91CD\u65B0\u9009\u62E9\u4F4D\u7F6E",
    "no_backlinks": "\u6CA1\u6709\u53CD\u5411\u94FE\u63A5",
    "back": "\u8FD4\u56DE",
    "search": "\u641C\u7D22",
    "default_search_option": "\u9ED8\u8BA4\u641C\u7D22\u9009\u9879",
    "search_placeholder": "\u641C\u7D22\u5173\u952E\u5B57",
    "search_current_location_only": "\u4EC5\u641C\u7D22\u5F53\u524D\u4F4D\u7F6E",
    "search_files_name_only": "\u4EC5\u641C\u7D22\u6587\u4EF6\u540D",
    "search_media_files": "\u641C\u7D22\u5A92\u4F53\u6587\u4EF6",
    "cancel": "\u53D6\u6D88",
    "new_note": "\u65B0\u5EFA\u7B14\u8BB0",
    "new_folder": "\u65B0\u5EFA\u6587\u4EF6\u5939",
    "new_canvas": "\u65B0\u5EFA\u753B\u5E03",
    "new_base": "\u65B0\u5EFA\u6570\u636E\u5E93",
    "new_shortcut": "\u65B0\u5EFA\u5FEB\u6377\u65B9\u5F0F",
    "delete_folder": "\u5220\u9664\u6587\u4EF6\u5939",
    "move_folder": "\u79FB\u52A8\u6587\u4EF6\u5939",
    "untitled": "\u672A\u547D\u540D",
    "files": "\u4E2A\u6587\u4EF6",
    "add": "\u6DFB\u52A0",
    "root": "\u6839\u76EE\u5F55",
    "sub_folders": "\u5B50\u76EE\u5F55",
    "parent_folders": "\u4E0A\u5C42\u76EE\u5F55",
    "more_options": "\u66F4\u591A\u9009\u9879",
    "add_tag_to_search": "\u52A0\u5165\u641C\u7D22",
    "remove_tag_from_search": "\u4ECE\u641C\u7D22\u4E2D\u79FB\u9664",
    "global_search": "\u5168\u57DF\u641C\u7D22",
    "remove": "\u79FB\u9664",
    "edit": "\u7F16\u8F91",
    "delete": "\u5220\u9664",
    "save": "\u4FDD\u5B58",
    "option": "\u9009\u9879",
    "add_option": "\u6DFB\u52A0\u9009\u9879",
    // 视图标题
    "grid_view_title": "\u7F51\u683C\u89C6\u56FE",
    "modes": "\u6A21\u5F0F",
    "custom_modes": "\u81EA\u5B9A\u4E49\u6A21\u5F0F",
    "bookmarks_mode": "\u4E66\u7B7E",
    "folder_mode": "\u6587\u4EF6\u5939",
    "search_results": "\u641C\u7D22\u7ED3\u679C",
    "backlinks_mode": "\u53CD\u5411\u94FE\u63A5",
    "outgoinglinks_mode": "\u5916\u90E8\u94FE\u63A5",
    "all_files_mode": "\u6240\u6709\u6587\u4EF6",
    "recent_files_mode": "\u6700\u8FD1\u6587\u4EF6",
    "random_note_mode": "\u968F\u673A\u7B14\u8BB0",
    "tasks_mode": "\u4EFB\u52A1",
    // 排序选项
    "sort_name_asc": "\u540D\u79F0 (A \u2192 Z)",
    "sort_name_desc": "\u540D\u79F0 (Z \u2192 A)",
    "sort_mtime_desc": "\u4FEE\u6539\u65F6\u95F4 (\u65B0 \u2192 \u65E7)",
    "sort_mtime_asc": "\u4FEE\u6539\u65F6\u95F4 (\u65E7 \u2192 \u65B0)",
    "sort_ctime_desc": "\u521B\u5EFA\u65F6\u95F4 (\u65B0 \u2192 \u65E7)",
    "sort_ctime_asc": "\u521B\u5EFA\u65F6\u95F4 (\u65E7 \u2192 \u65B0)",
    "sort_random": "\u968F\u673A\u6392\u5E8F",
    // 设置
    "grid_view_settings": "\u7F51\u683C\u89C6\u56FE\u8BBE\u7F6E",
    "folder_display_style": "\u6587\u4EF6\u5939\u663E\u793A\u6837\u5F0F",
    "folder_display_style_desc": "\u8BBE\u7F6E\u6587\u4EF6\u5939\u5728\u7F51\u683C\u89C6\u56FE\u4E2D\u7684\u663E\u793A\u65B9\u5F0F",
    "folder_display_style_show": "\u76F4\u63A5\u663E\u793A",
    "folder_display_style_menu": "\u4EE5\u83DC\u5355\u663E\u793A",
    "folder_display_style_hide": "\u4E0D\u663E\u793A",
    "show_media_files": "\u663E\u793A\u5A92\u4F53\u6587\u4EF6",
    "show_media_files_desc": "\u5728\u7F51\u683C\u89C6\u56FE\u4E2D\u663E\u793A\u5A92\u4F53\u6587\u4EF6",
    "show_video_thumbnails": "\u663E\u793A\u89C6\u9891\u7F29\u7565\u56FE",
    "show_video_thumbnails_desc": "\u5728\u7F51\u683C\u89C6\u56FE\u4E2D\u663E\u793A\u89C6\u9891\u7684\u7F29\u7565\u56FE\uFF0C\u5173\u95ED\u65F6\u5C06\u663E\u793A\u64AD\u653E\u56FE\u6807",
    "show_note_in_grid": "\u5728\u7F51\u683C\u89C6\u56FE\u4E2D\u663E\u793A\u7B14\u8BB0",
    "show_note_in_grid_desc": "\u5728\u7F51\u683C\u89C6\u56FE\u4E2D\u663E\u793A\u7B14\u8BB0\uFF0C\u5173\u95ED\u65F6\u4F7F\u7528\u53F3\u952E\u83DC\u5355\u6253\u5F00",
    "open_note_layout": "\u6253\u5F00\u7B14\u8BB0\u5E03\u5C40",
    "open_note_layout_desc": "\u8BBE\u7F6E\u5728\u7F51\u683C\u89C6\u56FE\u4E2D\u6253\u5F00\u7B14\u8BB0\u7684\u65B9\u5F0F",
    "open_note_layout_default": "\u9ED8\u8BA4",
    "open_note_layout_newTab": "\u65B0\u6807\u7B7E\u9875",
    "open_note_layout_split": "\u5206\u5272",
    "open_note_layout_newWindow": "\u65B0\u7A97\u53E3",
    "show_note_tags": "\u663E\u793A\u7B14\u8BB0\u6807\u7B7E",
    "show_note_tags_desc": "\u5728\u7F51\u683C\u89C6\u56FE\u4E2D\u663E\u793A\u7B14\u8BB0\u7684\u6807\u7B7E",
    "ignored_folders": "\u5FFD\u7565\u7684\u6587\u4EF6\u5939",
    "ignored_folders_desc": "\u5728\u8FD9\u91CC\u8BBE\u7F6E\u8981\u5FFD\u7565\u7684\u6587\u4EF6\u5939",
    "add_ignored_folder": "\u6DFB\u52A0\u5FFD\u7565\u6587\u4EF6\u5939",
    "no_ignored_folders": "\u6CA1\u6709\u5FFD\u7565\u7684\u6587\u4EF6\u5939\u3002",
    "ignored_folder_patterns": "\u4EE5\u5B57\u7B26\u4E32\u5FFD\u7565\u6587\u4EF6\u5939\u548C\u6587\u4EF6",
    "ignored_folder_patterns_desc": "\u4F7F\u7528\u5B57\u7B26\u4E32\u6A21\u5F0F\u5FFD\u7565\u6587\u4EF6\u5939\u548C\u6587\u4EF6\uFF08\u652F\u6301\u6B63\u5219\u8868\u8FBE\u5F0F\uFF09",
    "add_ignored_folder_pattern": "\u6DFB\u52A0\u5FFD\u7565\u6587\u4EF6\u5939\u6A21\u5F0F",
    "ignored_folder_pattern_placeholder": "\u8F93\u5165\u6587\u4EF6\u5939\u540D\u79F0\u6216\u6B63\u5219\u8868\u8FBE\u5F0F",
    "no_ignored_folder_patterns": "\u6CA1\u6709\u5FFD\u7565\u7684\u6587\u4EF6\u5939\u6A21\u5F0F\u3002",
    "default_sort_type": "\u9ED8\u8BA4\u6392\u5E8F\u6A21\u5F0F",
    "default_sort_type_desc": "\u8BBE\u7F6E\u6253\u5F00\u7F51\u683C\u89C6\u56FE\u65F6\u7684\u9ED8\u8BA4\u6392\u5E8F\u6A21\u5F0F",
    "note_title_field": "\u7B14\u8BB0\u6807\u9898\u5B57\u6BB5\u540D\u79F0",
    "note_title_field_desc": "\u8BBE\u7F6E frontmatter \u4E2D\u7528\u4E8E\u7B14\u8BB0\u6807\u9898\u7684\u5B57\u6BB5\u540D\u79F0",
    "note_summary_field": "\u7B14\u8BB0\u6458\u8981\u5B57\u6BB5\u540D\u79F0",
    "note_summary_field_desc": "\u8BBE\u7F6E frontmatter \u4E2D\u7528\u4E8E\u7B14\u8BB0\u6458\u8981\u7684\u5B57\u6BB5\u540D\u79F0",
    "modified_date_field": '"\u4FEE\u6539\u65F6\u95F4"\u5B57\u6BB5\u540D\u79F0',
    "modified_date_field_desc": "\u8BBE\u7F6E frontmatter \u4E2D\u7528\u4E8E\u7B14\u8BB0\u4FEE\u6539\u65F6\u95F4\u7684\u5B57\u6BB5\u540D\u79F0 (\u652F\u6301\u591A\u4E2A\u5B57\u6BB5\u540D\u79F0\uFF0C\u7528\u9017\u53F7\u5206\u9694)",
    "created_date_field": '"\u521B\u5EFA\u65F6\u95F4"\u5B57\u6BB5\u540D\u79F0',
    "created_date_field_desc": "\u8BBE\u7F6E frontmatter \u4E2D\u7528\u4E8E\u7B14\u8BB0\u521B\u5EFA\u65F6\u95F4\u7684\u5B57\u6BB5\u540D\u79F0 (\u652F\u6301\u591A\u4E2A\u5B57\u6BB5\u540D\u79F0\uFF0C\u7528\u9017\u53F7\u5206\u9694)",
    "grid_item_width": "\u7F51\u683C\u9879\u76EE\u5BBD\u5EA6",
    "grid_item_width_desc": "\u8BBE\u7F6E\u7F51\u683C\u9879\u76EE\u7684\u5BBD\u5EA6",
    "grid_item_height": "\u7F51\u683C\u9879\u76EE\u9AD8\u5EA6",
    "grid_item_height_desc": "\u8BBE\u7F6E\u7F51\u683C\u9879\u76EE\u7684\u9AD8\u5EA6 (\u8BBE\u4E3A0\u65F6\u4E3A\u81EA\u52A8\u8C03\u6574)",
    "image_area_width": "\u56FE\u7247\u533A\u57DF\u5BBD\u5EA6",
    "image_area_width_desc": "\u8BBE\u7F6E\u56FE\u7247\u9884\u89C8\u533A\u57DF\u7684\u5BBD\u5EA6",
    "image_area_height": "\u56FE\u7247\u533A\u57DF\u9AD8\u5EA6",
    "image_area_height_desc": "\u8BBE\u7F6E\u56FE\u7247\u9884\u89C8\u533A\u57DF\u7684\u9AD8\u5EA6",
    "title_font_size": "\u6807\u9898\u5B57\u4F53\u5927\u5C0F",
    "title_font_size_desc": "\u8BBE\u7F6E\u6807\u9898\u5B57\u4F53\u7684\u5927\u5C0F",
    "summary_length": "\u6458\u8981\u957F\u5EA6",
    "summary_length_desc": "\u8BBE\u7F6E\u6458\u8981\u7684\u957F\u5EA6",
    "grid_item_style_settings": "\u7F51\u683C\u9879\u76EE\u6837\u5F0F\u8BBE\u7F6E",
    "card_layout": "\u5361\u7247\u5E03\u5C40",
    "card_layout_desc": "\u9009\u62E9\u9ED8\u8BA4\u5361\u7247\u5E03\u5C40",
    "horizontal_card": "\u6C34\u5E73\u5361\u7247",
    "vertical_card": "\u5782\u76F4\u5361\u7247",
    "image_position": "\u56FE\u7247\u4F4D\u7F6E",
    "image_position_desc": "\u8BBE\u7F6E\u56FE\u7247\u7684\u4F4D\u7F6E",
    "top": "\u9876\u90E8",
    "bottom": "\u5E95\u90E8",
    "multi_line_title": "\u6807\u9898\u652F\u6301\u591A\u884C\u663E\u793A",
    "multi_line_title_desc": "\u8BBE\u7F6E\u662F\u5426\u5141\u8BB8\u6807\u9898\u591A\u884C\u663E\u793A",
    "show_code_block_in_summary": "\u6458\u8981\u4E2D\u663E\u793ACodeBlock",
    "show_code_block_in_summary_desc": "\u8BBE\u7F6E\u662F\u5426\u5728\u6458\u8981\u4E2D\u663E\u793ACodeBlock\u7684\u5167\u5BB9",
    "enable_file_watcher": "\u542F\u7528\u6587\u4EF6\u76D1\u63A7",
    "enable_file_watcher_desc": "\u542F\u7528\u540E\u4F1A\u81EA\u52A8\u68C0\u6D4B\u6587\u4EF6\u53D8\u66F4\u5E76\u66F4\u65B0\u89C6\u56FE\uFF0C\u5173\u95ED\u540E\u9700\u624B\u52A8\u70B9\u51FB\u5237\u65B0\u6309\u94AE",
    "intercept_all_tag_clicks": "\u62E6\u622A\u6240\u6709\u6807\u7B7E\u70B9\u51FB\u4E8B\u4EF6",
    "intercept_all_tag_clicks_desc": "\u542F\u7528\u540E\u4F1A\u62E6\u622A\u6240\u6709\u6807\u7B7E\u70B9\u51FB\u4E8B\u4EF6\uFF0C\u6539\u4E3A\u5728\u7F51\u683C\u89C6\u56FE\u4E2D\u6253\u5F00\u6807\u7B7E",
    "intercept_breadcrumb_clicks": "\u62E6\u622A\u7B14\u8BB0\u5BFC\u822A\u680F\u70B9\u51FB\u4E8B\u4EF6",
    "intercept_breadcrumb_clicks_desc": "\u542F\u7528\u540E\u4F1A\u62E6\u622A\u7B14\u8BB0\u5BFC\u822A\u680F\u70B9\u51FB\u4E8B\u4EF6\uFF0C\u5E76\u5728\u7F51\u683C\u89C6\u56FE\u4E2D\u6253\u5F00\u8DEF\u5F84",
    "reset_to_default": "\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u503C",
    "settings_reset_notice": "\u8BBE\u7F6E\u503C\u5DF2\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u503C",
    "config_management": "\u914D\u7F6E\u7BA1\u7406",
    "config_management_desc": "\u7BA1\u7406\u914D\u7F6E\u7684\u91CD\u7F6E\u3001\u5BFC\u51FA\u548C\u5BFC\u5165",
    "ignored_folders_settings": "\u5FFD\u7565\u6587\u4EF6\u5939\u8BBE\u7F6E",
    "display_mode_settings": "\u663E\u793A\u6A21\u5F0F\u8BBE\u7F6E",
    "custom_mode_settings": "\u81EA\u5B9A\u4E49\u6A21\u5F0F\u8BBE\u7F6E",
    "add_custom_mode": "\u6DFB\u52A0\u81EA\u5B9A\u4E49\u6A21\u5F0F",
    "export": "\u5BFC\u51FA",
    "import": "\u5BFC\u5165",
    "no_custom_modes_to_export": "\u6CA1\u6709\u53EF\u5BFC\u51FA\u7684\u81EA\u5B9A\u4E49\u6A21\u5F0F",
    "export_success_vault": "\u81EA\u5B9A\u4E49\u6A21\u5F0F\u5DF2\u5BFC\u51FA\u81F3 {filename}",
    "export_error": "\u5BFC\u51FA\u5931\u8D25",
    "import_success": "\u5BFC\u5165\u6210\u529F",
    "import_error": "\u5BFC\u5165\u5931\u8D25\uFF1A\u65E0\u6548\u7684\u6587\u4EF6\u683C\u5F0F",
    "edit_custom_mode": "\u7F16\u8F91\u81EA\u5B9A\u4E49\u6A21\u5F0F",
    "custom_mode": "\u81EA\u5B9A\u4E49\u6A21\u5F0F",
    "custom_mode_display_name": "\u663E\u793A\u540D\u79F0",
    "custom_mode_display_name_desc": "\u5728\u6A21\u5F0F\u83DC\u5355\u4E2D\u663E\u793A\u7684\u540D\u79F0",
    "custom_mode_dataview_code": "Dataviewjs \u4EE3\u7801",
    "custom_mode_dataview_code_desc": "\u8F93\u5165 Dataviewjs \u4EE3\u7801\u4EE5\u83B7\u53D6\u6587\u4EF6\u5217\u8868",
    "custom_mode_sub_options": "\u81EA\u5B9A\u4E49\u6A21\u5F0F\u5B50\u9009\u9879",
    "custom_mode_fields_placeholder": "\u8F93\u5165 frontmatter \u680F\u4F4D\u540D\u79F0\uFF0C\u7528\u9017\u53F7\u5206\u9694 (\u5982: date,category,status) (\u53EF\u9009)",
    "dataview_plugin_not_enabled": "Dataview \u5916\u639B\u672A\u555F\u7528",
    "show_bookmarks_mode": "\u663E\u793A\u4E66\u7B7E\u6A21\u5F0F",
    "show_search_mode": "\u663E\u793A\u641C\u7D22\u7ED3\u679C\u6A21\u5F0F",
    "show_backlinks_mode": "\u663E\u793A\u53CD\u5411\u94FE\u63A5\u6A21\u5F0F",
    "show_outgoinglinks_mode": "\u663E\u793A\u5916\u90E8\u94FE\u63A5\u6A21\u5F0F",
    "show_all_files_mode": "\u663E\u793A\u6240\u6709\u6587\u4EF6\u6A21\u5F0F",
    "show_recent_files_mode": "\u663E\u793A\u6700\u8FD1\u6587\u4EF6\u6A21\u5F0F",
    "recent_files_count": "\u6700\u8FD1\u6587\u4EF6\u6A21\u5F0F\u663E\u793A\u7B14\u6570",
    "show_random_note_mode": "\u663E\u793A\u968F\u673A\u7B14\u8BB0\u6A21\u5F0F",
    "random_note_count": "\u968F\u673A\u7B14\u8BB0\u6A21\u5F0F\u663E\u793A\u7B14\u6570",
    "random_note_notes_only": "\u4EC5\u7B14\u8BB0",
    "random_note_include_media_files": "\u5305\u542B\u5A92\u4F53\u6587\u4EF6",
    "show_tasks_mode": "\u663E\u793A\u4EFB\u52A1\u6A21\u5F0F",
    "task_filter": "\u4EFB\u52A1\u5206\u7C7B",
    "uncompleted": "\u672A\u5B8C\u6210",
    "completed": "\u5DF2\u5B8C\u6210",
    "foldernote_display_settings": "\u6587\u4EF6\u5939\u7B14\u8BB0\u663E\u793A\u8BBE\u7F6E",
    "foldernote_display_settings_desc": "\u8BBE\u7F6E\u6587\u4EF6\u5939\u7B14\u8BB0\u7684\u663E\u793A\u65B9\u5F0F",
    "all": "\u5168\u90E8",
    "default": "\u9ED8\u8BA4",
    "hidden": "\u9690\u85CF",
    // 隐藏頂部元素
    "hide_header_elements": "\u96B1\u85CF\u9802\u90E8\u5143\u7D20",
    // 默认打开位置设置
    "default_open_location": "\u9ED8\u8BA4\u6253\u5F00\u4F4D\u7F6E",
    "default_open_location_desc": "\u8BBE\u7F6E\u7F51\u683C\u89C6\u56FE\u9ED8\u8BA4\u6253\u5F00\u7684\u4F4D\u7F6E",
    "open_in_left_sidebar": "\u5728\u5DE6\u4FA7\u8FB9\u680F\u6253\u5F00",
    "open_in_right_sidebar": "\u5728\u53F3\u4FA7\u8FB9\u680F\u6253\u5F00",
    "open_in_new_tab": "\u5728\u65B0\u6807\u7B7E\u9875\u6253\u5F00",
    "reuse_existing_leaf": "\u91CD\u590D\u4F7F\u7528\u5DF2\u6253\u5F00\u7684\u89C6\u56FE",
    "reuse_existing_leaf_desc": "\u6253\u5F00\u7F51\u683C\u89C6\u56FE\u65F6\uFF0C\u4F18\u5148\u4F7F\u7528\u5DF2\u6253\u5F00\u7684\u89C6\u56FE\u800C\u975E\u521B\u5EFA\u65B0\u89C6\u56FE",
    "custom_document_extensions": "\u81EA\u5B9A\u4E49\u6587\u4EF6\u6269\u5C55\u540D",
    "custom_document_extensions_desc": "\u989D\u5916\u7684\u6587\u4EF6\u6269\u5C55\u540D\uFF08\u7528\u9017\u53F7\u5206\u9694\uFF0C\u4E0D\u542B\u70B9\u53F7\uFF09",
    "custom_document_extensions_placeholder": "\u4F8B\u5982\uFF1Atxt,doc,docx",
    "custom_folder_icon": "\u81EA\u5B9A\u4E49\u6587\u4EF6\u5939\u56FE\u6807",
    "custom_folder_icon_desc": "\u81EA\u5B9A\u4E49\u6587\u4EF6\u5939\u56FE\u6807\uFF08\u4F7F\u7528Emoji\uFF09",
    // 选择文件夹对话框
    "select_folders": "\u9009\u62E9\u6587\u4EF6\u5939",
    "select_folders_to_ignore": "\u9009\u62E9\u8981\u5FFD\u7565\u7684\u6587\u4EF6\u5939",
    "explorer": "\u6D4F\u89C8\u5668",
    "open_explorer": "\u6253\u5F00\u6D4F\u89C8\u5668",
    "open_grid_view": "\u6253\u5F00\u7F51\u683C\u89C6\u56FE",
    "open_in_grid_view": "\u5728\u7F51\u683C\u89C6\u56FE\u4E2D\u6253\u5F00",
    "show_note_in_grid_view": "\u5728\u7F51\u683C\u89C6\u56FE\u663E\u793A\u7B14\u8BB0",
    "open_note_in_grid_view": "\u5728\u7F51\u683C\u89C6\u56FE\u6253\u5F00\u5F53\u524D\u7B14\u8BB0",
    "open_backlinks_in_grid_view": "\u5728\u7F51\u683C\u89C6\u56FE\u6253\u5F00\u53CD\u5411\u94FE\u63A5",
    "open_outgoinglinks_in_grid_view": "\u5728\u7F51\u683C\u89C6\u56FE\u6253\u5F00\u5916\u90E8\u94FE\u63A5",
    "open_recent_files_in_grid_view": "\u5728\u6700\u8FD1\u6587\u4EF6\u6253\u5F00\u5F53\u524D\u7B14\u8BB0",
    "open_settings": "\u6253\u5F00\u8BBE\u7F6E",
    "open_new_grid_view": "\u6253\u5F00\u65B0\u7F51\u683C\u89C6\u56FE",
    "open_in_new_grid_view": "\u5728\u65B0\u7F51\u683C\u89C6\u56FE\u4E2D\u6253\u5F00",
    "min_mode": "\u6700\u5C0F\u5316\u6A21\u5F0F",
    "show_ignored_folders": "\u663E\u793A\u5FFD\u7565\u7684\u6587\u4EF6\u5939",
    "delete_note": "\u5220\u9664\u6587\u4EF6",
    "open_folder_note": "\u6253\u5F00\u6587\u4EF6\u5939\u7B14\u8BB0",
    "create_folder_note": "\u521B\u5EFA\u6587\u4EF6\u5939\u7B14\u8BB0",
    "delete_folder_note": "\u5220\u9664\u6587\u4EF6\u5939\u7B14\u8BB0",
    "edit_folder_note_settings": "\u7F16\u8F91\u6587\u4EF6\u5939\u7B14\u8BB0\u8BBE\u7F6E",
    "ignore_folder": "\u5FFD\u7565\u6B64\u6587\u4EF6\u5939",
    "unignore_folder": "\u53D6\u6D88\u5FFD\u7565\u6B64\u6587\u4EF6\u5939",
    "searching": "\u641C\u7D22\u4E2D...",
    "no_files": "\u6CA1\u6709\u627E\u5230\u4EFB\u4F55\u6587\u4EF6",
    "filter_folders": "\u7B5B\u9009\u6587\u4EF6\u5939...",
    "search_for": "\u641C\u7D22",
    // 快捷方式选择对话框
    "create_shortcut": "\u521B\u5EFA\u5FEB\u6377\u65B9\u5F0F",
    "select_folder": "\u9009\u62E9\u6587\u4EF6\u5939",
    "select_file": "\u9009\u62E9\u6587\u4EF6",
    "target_not_found": "\u76EE\u6807\u672A\u627E\u5230",
    "shortcut_created": "\u5FEB\u6377\u65B9\u5F0F\u5DF2\u521B\u5EFA",
    "failed_to_create_shortcut": "\u521B\u5EFA\u5FEB\u6377\u65B9\u5F0F\u5931\u8D25",
    // 文件夹笔记设置对话框
    "folder_note_settings": "\u6587\u4EF6\u5939\u7B14\u8BB0\u8BBE\u7F6E",
    "folder_sort_type": "\u6587\u4EF6\u5939\u6392\u5E8F\u65B9\u5F0F",
    "folder_sort_type_desc": "\u8BBE\u7F6E\u6B64\u6587\u4EF6\u5939\u7684\u9ED8\u8BA4\u6392\u5E8F\u65B9\u5F0F",
    "folder_color": "\u6587\u4EF6\u5939\u989C\u8272",
    "folder_color_desc": "\u8BBE\u7F6E\u6B64\u6587\u4EF6\u5939\u7684\u663E\u793A\u989C\u8272",
    "folder_icon": "\u6587\u4EF6\u5939\u56FE\u793A",
    "folder_icon_desc": "\u8BBE\u7F6E\u6B64\u6587\u4EF6\u5939\u7684\u663E\u793A\u56FE\u793A",
    "no_color": "\u65E0\u989C\u8272",
    "color_red": "\u7EA2\u8272",
    "color_orange": "\u6A59\u8272",
    "color_yellow": "\u9EC4\u8272",
    "color_green": "\u7EFF\u8272",
    "color_cyan": "\u9752\u8272",
    "color_blue": "\u84DD\u8272",
    "color_purple": "\u7D2B\u8272",
    "color_pink": "\u7C89\u8272",
    "color_custom": "\u81EA\u5B9A\u4E49\u989C\u8272",
    "confirm": "\u786E\u8BA4",
    "search_text": "\u641C\u7D22\u6587\u5B57",
    "enter_search_text": "\u8F93\u5165\u641C\u7D22\u6587\u5B57",
    "enter_uri": "\u8F93\u5165\u7F51\u5740",
    "enter_uri_placeholder": "\u8F93\u5165\u7F51\u5740\u6216 obsidian:// \u534F\u8BAE",
    "note_attribute_settings": "\u7B14\u8BB0\u5C5E\u6027\u8BBE\u7F6E",
    "note_title": "\u7B14\u8BB0\u6807\u9898",
    "note_title_desc": "\u8BBE\u7F6E\u6B64\u7B14\u8BB0\u7684\u663E\u793A\u6807\u9898",
    "note_summary": "\u7B14\u8BB0\u6458\u8981",
    "note_summary_desc": "\u8BBE\u7F6E\u6B64\u7B14\u8BB0\u7684\u663E\u793A\u6458\u8981",
    "note_color": "\u7B14\u8BB0\u989C\u8272",
    "note_color_desc": "\u8BBE\u7F6E\u6B64\u7B14\u8BB0\u7684\u663E\u793A\u989C\u8272",
    "custom_hex_color": "\u81EA\u5B9A\u4E49 HEX \u8272\u503C",
    "custom_hex_color_desc": "\u8F93\u5165\u81EA\u5B9A\u4E49\u7684 HEX \u8272\u503C\uFF08\u4F8B\u5982 #FF8800 \u6216 #F80\uFF09",
    "set_note_attribute": "\u8BBE\u7F6E\u7B14\u8BB0\u5C5E\u6027",
    "rename_folder": "\u91CD\u65B0\u547D\u540D\u6587\u4EF6\u5939",
    "enter_new_folder_name": "\u8F93\u5165\u65B0\u6587\u4EF6\u5939\u540D\u79F0",
    "search_selection_in_grid_view": "\u5728\u7F51\u683C\u89C6\u56FE\u641C\u5BFB...",
    "show_date_dividers": "\u663E\u793A\u65E5\u671F\u5206\u9694\u5668",
    "show_date_dividers_desc": "\u5728\u65E5\u671F\u76F8\u5173\u6392\u5E8F\u65F6\uFF0C\u5728\u4E0D\u540C\u5929\u7684\u7B2C\u4E00\u6761\u4E4B\u524D\u663E\u793A\u65E5\u671F\u5206\u9694\u5668",
    "date_divider_format": "\u65E5\u671F\u5206\u9694\u5668\u683C\u5F0F",
    "date_divider_mode": "\u65E5\u671F\u5206\u9694\u5668",
    "date_divider_mode_desc": "\u9009\u62E9\u65E5\u671F\u5206\u9694\u5668\u7684\u663E\u793A\u6A21\u5F0F",
    "date_divider_mode_none": "\u4E0D\u4F7F\u7528",
    "date_divider_mode_year": "\u5E74",
    "date_divider_mode_month": "\u6708",
    "date_divider_mode_day": "\u65E5",
    "pinned": "\u7F6E\u9876",
    "pinned_desc": "\u5C06\u6B64\u6587\u4EF6\u56FA\u5B9A\u5728\u9876\u90E8",
    "foldernote_pinned": "\u6587\u4EF6\u5939\u7B14\u8BB0\u7F6E\u9876",
    "foldernote_pinned_desc": "\u5C06\u6587\u4EF6\u5939\u7B14\u8BB0\u56FA\u5B9A\u5728\u9876\u90E8",
    "display_minimized": "\u6700\u5C0F\u5316\u663E\u793A",
    "display_minimized_desc": "\u5C06\u6B64\u7B14\u8BB0\u4EE5\u6700\u5C0F\u5316\u65B9\u5F0F\u663E\u793A",
    // Quick Access Settings and Commands
    "quick_access_settings_title": "\u5FEB\u901F\u8BBF\u95EE\u8BBE\u7F6E",
    "quick_access_folder_name": "\u5FEB\u901F\u8BBF\u95EE\u6587\u4EF6\u5939",
    "quick_access_folder_desc": "\u8BBE\u7F6E\u201C\u6253\u5F00\u5FEB\u901F\u8BBF\u95EE\u6587\u4EF6\u5939\u201D\u547D\u4EE4\u4F7F\u7528\u7684\u6587\u4EF6\u5939",
    "quick_access_mode_name": "\u5FEB\u901F\u8BBF\u95EE\u6A21\u5F0F",
    "quick_access_mode_desc": "\u8BBE\u7F6E\u201C\u6253\u5F00\u5FEB\u901F\u8BBF\u95EE\u6A21\u5F0F\u201D\u547D\u4EE4\u4F7F\u7528\u7684\u9ED8\u8BA4\u6A21\u5F0F",
    "use_quick_access_as_new_tab_view": "\u5C06\u5FEB\u901F\u8BBF\u95EE\u7528\u4F5C\u65B0\u6807\u7B7E\u9875",
    "use_quick_access_as_new_tab_view_desc": "\u5C06\u9ED8\u8BA4\u7684\u201C\u65B0\u6807\u7B7E\u9875\u201D\u89C6\u56FE\u66FF\u6362\u4E3A\u6240\u9009\u5FEB\u901F\u8BBF\u95EE\u9009\u9879\uFF08\u6587\u4EF6\u5939\u6216\u6A21\u5F0F\uFF09\u7684\u7F51\u683C\u89C6\u56FE\u3002\u6B64\u8BBE\u7F6E\u4EC5\u5728\u201C\u9ED8\u8BA4\u6253\u5F00\u4F4D\u7F6E\u201D\u8BBE\u4E3A\u201C\u5728\u65B0\u6807\u7B7E\u9875\u6253\u5F00\u201D\u65F6\u751F\u6548\uFF01",
    "default_new_tab": "\u9ED8\u8BA4\u65B0\u6807\u7B7E\u9875",
    "use_quick_access_folder": "\u4F7F\u7528\u5FEB\u901F\u8BBF\u95EE\u6587\u4EF6\u5939",
    "use_quick_access_mode": "\u4F7F\u7528\u5FEB\u901F\u8BBF\u95EE\u6A21\u5F0F",
    "open_quick_access_folder": "\u6253\u5F00\u5FEB\u901F\u8BBF\u95EE\u6587\u4EF6\u5939",
    "open_quick_access_mode": "\u6253\u5F00\u5FEB\u901F\u8BBF\u95EE\u6A21\u5F0F",
    // Explorer Stash
    "stash": "\u6682\u5B58\u533A",
    "drop_files_here": "\u62D6\u66F3\u6587\u4EF6\u5230\u6B64\u6682\u5B58",
    "clear": "\u6E05\u7A7A",
    "save_stash_as_markdown": "\u5C06\u6682\u5B58\u533A\u4FDD\u5B58\u4E3A Markdown",
    "add_to_stash": "\u52A0\u5165\u6682\u5B58\u533A",
    "added_to_stash": "\u5DF2\u6DFB\u52A0\u5230\u6682\u5B58\u533A"
  },
  "ja": {
    // 通知メッジ
    "bookmarks_plugin_disabled": "\u30D6\u30C3\u30AF\u30DE\u30FC\u30AF\u30D7\u30E9\u30B0\u30A4\u30F3\u3092\u6709\u52B9\u306B\u3057\u3066\u304F\u3060\u3055\u3044",
    // ボタンとラベル
    "sorting": "\u4E26\u3073\u66FF\u3048",
    "refresh": "\u66F4\u65B0",
    "reselect": "\u518D\u9078\u629E",
    "no_backlinks": "\u30D0\u30C3\u30AF\u30EA\u30F3\u30AF\u306A\u3057",
    "back": "\u623B\u308B",
    "search": "\u691C\u7D22",
    "default_search_option": "\u30C7\u30D5\u30A9\u30EB\u30C8\u691C\u7D22\u30AA\u30D7\u30B7\u30E7\u30F3",
    "search_placeholder": "\u30AD\u30FC\u30EF\u30FC\u30C9\u691C\u7D22",
    "search_current_location_only": "\u73FE\u5728\u306E\u5834\u6240\u306E\u307F\u691C\u7D22",
    "search_files_name_only": "\u30D5\u30A1\u30A4\u30EB\u540D\u306E\u307F\u691C\u7D22",
    "search_media_files": "\u30E1\u30C7\u30A3\u30A2\u30D5\u30A1\u30A4\u30EB\u3092\u691C\u7D22",
    "cancel": "\u30AD\u30E3\u30F3\u30BB\u30EB",
    "new_note": "\u65B0\u898F\u30CE\u30FC\u30C8",
    "new_folder": "\u65B0\u898F\u30D5\u30A9\u30EB\u30C0",
    "new_canvas": "\u65B0\u898F\u30AD\u30E3\u30F3\u30D0\u30B9",
    "new_base": "\u65B0\u898F base",
    "new_shortcut": "\u65B0\u898F\u30B7\u30E7\u30FC\u30C8\u30AB\u30C3\u30C8",
    "delete_folder": "\u524A\u9664\u30D5\u30A9\u30EB\u30C0",
    "move_folder": "\u79FB\u52D5\u30D5\u30A9\u30EB\u30C0",
    "untitled": "\u7121\u984C",
    "files": "\u30D5\u30A1\u30A4\u30EB",
    "add": "\u8FFD\u52A0",
    "root": "\u30EB\u30FC\u30C8",
    "sub_folders": "\u5B50\u30D5\u30A9\u30EB\u30C0",
    "parent_folders": "\u4E0A\u5C64\u30D5\u30A9\u30EB\u30C0",
    "more_options": "\u3082\u3063\u3068\u9078\u629E\u80A2",
    "add_tag_to_search": "\u691C\u7D22\u306B\u8FFD\u52A0",
    "remove_tag_from_search": "\u691C\u7D22\u304B\u3089\u524A\u9664",
    "global_search": "\u30B0\u30ED\u30FC\u30D0\u30EB\u691C\u7D22",
    "remove": "\u524A\u9664",
    "edit": "\u7DE8\u96C6",
    "delete": "\u524A\u9664",
    "save": "\u4FDD\u5B58",
    "option": "\u9078\u629E\u80A2",
    "add_option": "\u9078\u629E\u80A2\u3092\u8FFD\u52A0",
    // ビュータイトル
    "grid_view_title": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC",
    "modes": "\u30E2\u30FC\u30C9",
    "custom_modes": "\u30AB\u30B9\u30BF\u30E0\u30E2\u30FC\u30C9",
    "bookmarks_mode": "\u30D6\u30C3\u30AF\u30DE\u30FC\u30AF",
    "folder_mode": "\u30D5\u30A9\u30EB\u30C0",
    "search_results": "\u691C\u7D22\u7D50\u679C",
    "backlinks_mode": "\u30D0\u30C3\u30AF\u30EA\u30F3\u30AF",
    "outgoinglinks_mode": "\u30A2\u30A6\u30C8\u30B0\u30EA\u30F3\u30AF",
    "all_files_mode": "\u3059\u3079\u3066\u306E\u30D5\u30A1\u30A4\u30EB",
    "recent_files_mode": "\u6700\u8FD1\u306E\u30D5\u30A1\u30A4\u30EB",
    "random_note_mode": "\u30E9\u30F3\u30C0\u30E0\u30CE\u30FC\u30C8",
    "tasks_mode": "\u30BF\u30B9\u30AF",
    // 並べ替えオプション
    "sort_name_asc": "\u540D\u524D (A \u2192 Z)",
    "sort_name_desc": "\u540D\u524D (Z \u2192 A)",
    "sort_mtime_desc": "\u66F4\u65B0\u65E5\u6642 (\u65B0 \u2192 \u53E4)",
    "sort_mtime_asc": "\u66F4\u65B0\u65E5\u6642 (\u53E4 \u2192 \u65B0)",
    "sort_ctime_desc": "\u4F5C\u6210\u65E5\u6642 (\u65B0 \u2192 \u53E4)",
    "sort_ctime_asc": "\u4F5C\u6210\u65E5\u6642 (\u53E4 \u2192 \u65B0)",
    "sort_random": "\u30E9\u30F3\u30C0\u30E0",
    // 設定
    "grid_view_settings": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u8A2D\u5B9A",
    "folder_display_style": "\u30D5\u30A9\u30EB\u30C0\u8868\u793A\u30B9\u30BF\u30A4\u30EB",
    "folder_display_style_desc": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u306E\u30D5\u30A9\u30EB\u30C0\u306E\u8868\u793A\u65B9\u6CD5\u3092\u8A2D\u5B9A\u3057\u307E\u3059",
    "folder_display_style_show": "\u76F4\u63A5\u8868\u793A",
    "folder_display_style_menu": "\u30E1\u30CB\u30E5\u30FC\u3067\u8868\u793A",
    "folder_display_style_hide": "\u975E\u8868\u793A",
    "show_media_files": "\u30E1\u30C7\u30A3\u30A2\u30D5\u30A1\u30A4\u30EB\u3092\u8868\u793A",
    "show_media_files_desc": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u30E1\u30C7\u30A3\u30A2\u30D5\u30A1\u30A4\u30EB\u3092\u8868\u793A\u3059\u308B",
    "show_video_thumbnails": "\u52D5\u753B\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u8868\u793A",
    "show_video_thumbnails_desc": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u52D5\u753B\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u8868\u793A\u3059\u308B\u3001\u7121\u52B9\u306E\u5834\u5408\u306F\u518D\u751F\u30A2\u30A4\u30B3\u30F3\u3092\u8868\u793A",
    "show_note_in_grid": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u30CE\u30FC\u30C8\u3092\u8868\u793A",
    "show_note_in_grid_desc": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u30CE\u30FC\u30C8\u3092\u8868\u793A\u3059\u308B\u3001\u7121\u52B9\u306E\u5834\u5408\u306F\u53F3\u9375\u30E1\u30CB\u30E5\u30FC\u3092\u4F7F\u7528\u3057\u3066\u958B\u304F",
    "open_note_layout": "\u30CE\u30FC\u30C8\u3092\u958B\u304F",
    "open_note_layout_desc": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u30CE\u30FC\u30C8\u3092\u958B\u304F\u65B9\u6CD5\u3092\u8A2D\u5B9A\u3057\u307E\u3059",
    "open_note_layout_default": "\u30C7\u30D5\u30A9\u30EB\u30C8",
    "open_note_layout_newTab": "\u65B0\u30BF\u30D6",
    "open_note_layout_split": "\u5206\u5272",
    "open_note_layout_newWindow": "\u65B0\u30A6\u30A3\u30F3\u30C9\u30A6",
    "show_note_tags": "\u30CE\u30FC\u30C8\u306E\u30BF\u30B0\u3092\u8868\u793A",
    "show_note_tags_desc": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u30CE\u30FC\u30C8\u306E\u30BF\u30B0\u3092\u8868\u793A\u3059\u308B",
    "ignored_folders": "\u7121\u8996\u3059\u308B\u30D5\u30A9\u30EB\u30C0",
    "ignored_folders_desc": "\u7121\u8996\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u3092\u8A2D\u5B9A\u3059\u308B",
    "add_ignored_folder": "\u7121\u8996\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u3092\u8FFD\u52A0",
    "no_ignored_folders": "\u7121\u8996\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u306F\u3042\u308A\u307E\u305B\u3093\u3002",
    "ignored_folder_patterns": "\u30D1\u30BF\u30FC\u30F3\u3067\u30D5\u30A9\u30EB\u30C0\u3068\u30D5\u30A1\u30A4\u30EB\u3092\u7121\u8996",
    "ignored_folder_patterns_desc": "\u6587\u5B57\u5217\u30D1\u30BF\u30FC\u30F3\u3092\u4F7F\u7528\u3057\u3066\u30D5\u30A9\u30EB\u30C0\u3068\u30D5\u30A1\u30A4\u30EB\u3092\u7121\u8996\u3059\u308B\uFF08\u6B63\u898F\u8868\u73FE\u3092\u30B5\u30DD\u30FC\u30C8\uFF09",
    "add_ignored_folder_pattern": "\u30D5\u30A9\u30EB\u30C0\u30D1\u30BF\u30FC\u30F3\u3092\u8FFD\u52A0",
    "ignored_folder_pattern_placeholder": "\u30D5\u30A9\u30EB\u30C0\u540D\u307E\u305F\u306F\u6B63\u898F\u8868\u73FE\u30D1\u30BF\u30FC\u30F3\u3092\u5165\u529B",
    "no_ignored_folder_patterns": "\u7121\u8996\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u30D1\u30BF\u30FC\u30F3\u306F\u3042\u308A\u307E\u305B\u3093\u3002",
    "default_sort_type": "\u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u4E26\u3073\u66FF\u3048",
    "default_sort_type_desc": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3092\u958B\u3044\u305F\u3068\u304D\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u4E26\u3073\u66FF\u3048\u65B9\u6CD5\u3092\u8A2D\u5B9A",
    "note_title_field": "\u30CE\u30FC\u30C8\u30BF\u30A4\u30C8\u30EB\u30D5\u30A3\u30FC\u30EB\u30C9\u540D",
    "note_title_field_desc": "frontmatter\u3067\u30CE\u30FC\u30C8\u30BF\u30A4\u30C8\u30EB\u3068\u3057\u3066\u4F7F\u7528\u3059\u308B\u30D5\u30A3\u30FC\u30EB\u30C9\u540D\u3092\u8A2D\u5B9A",
    "note_summary_field": "\u30CE\u30FC\u30C8\u8981\u7D04\u30D5\u30A3\u30FC\u30EB\u30C9\u540D",
    "note_summary_field_desc": "frontmatter\u3067\u30CE\u30FC\u30C8\u8981\u7D04\u3068\u3057\u3066\u4F7F\u7528\u3059\u308B\u30D5\u30A3\u30FC\u30EB\u30C9\u540D\u3092\u8A2D\u5B9A",
    "modified_date_field": '"\u66F4\u65B0\u65E5"\u30D5\u30A3\u30FC\u30EB\u30C9\u540D',
    "modified_date_field_desc": "frontmatter\u3067\u66F4\u65B0\u65E5\u3068\u3057\u3066\u4F7F\u7528\u3059\u308B\u30D5\u30A3\u30FC\u30EB\u30C9\u540D\u3092\u8A2D\u5B9A (\u8907\u6570\u306E\u30D5\u30A3\u30FC\u30EB\u30C9\u540D\u3092\u30AB\u30F3\u30DE\u533A\u5207\u308A\u3067\u6307\u5B9A\u53EF\u80FD)",
    "created_date_field": '"\u4F5C\u6210\u65E5"\u30D5\u30A3\u30FC\u30EB\u30C9\u540D',
    "created_date_field_desc": "frontmatter\u3067\u4F5C\u6210\u65E5\u3068\u3057\u3066\u4F7F\u7528\u3059\u308B\u30D5\u30A3\u30FC\u30EB\u30C9\u540D\u3092\u8A2D\u5B9A (\u8907\u6570\u306E\u30D5\u30A3\u30FC\u30EB\u30C9\u540D\u3092\u30AB\u30F3\u30DE\u533A\u5207\u308A\u3067\u6307\u5B9A\u53EF\u80FD)",
    "grid_item_width": "\u30B0\u30EA\u30C3\u30C9\u30A2\u30A4\u30C6\u30E0\u306E\u5E45",
    "grid_item_width_desc": "\u30B0\u30EA\u30C3\u30C9\u30A2\u30A4\u30C6\u30E0\u306E\u5E45\u3092\u8A2D\u5B9A",
    "grid_item_height": "\u30B0\u30EA\u30C3\u30C9\u30A2\u30A4\u30C6\u30E0\u306E\u9AD8\u3055",
    "grid_item_height_desc": "\u30B0\u30EA\u30C3\u30C9\u30A2\u30A4\u30C6\u30E0\u306E\u9AD8\u3055\u3092\u8A2D\u5B9A\uFF080\u306B\u8A2D\u5B9A\u3059\u308B\u3068\u81EA\u52D5\u8ABF\u6574\uFF09",
    "image_area_width": "\u753B\u50CF\u30A8\u30EA\u30A2\u306E\u5E45",
    "image_area_width_desc": "\u753B\u50CF\u30D7\u30EC\u30D3\u30E5\u30FC\u30A8\u30EA\u30A2\u306E\u5E45\u3092\u8A2D\u5B9A",
    "image_area_height": "\u753B\u50CF\u30A8\u30EA\u30A2\u306E\u9AD8\u3055",
    "image_area_height_desc": "\u753B\u50CF\u30D7\u30EC\u30D3\u30E5\u30FC\u30A8\u30EA\u30A2\u306E\u9AD8\u3055\u3092\u8A2D\u5B9A",
    "title_font_size": "\u30BF\u30A4\u30C8\u30EB\u306E\u30D5\u30A9\u30F3\u30C8\u30B5\u30A4\u30BA",
    "title_font_size_desc": "\u30BF\u30A4\u30C8\u30EB\u306E\u30D5\u30A9\u30F3\u30C8\u30B5\u30A4\u30BA\u3092\u8A2D\u5B9A",
    "summary_length": "\u8981\u7D04\u306E\u9577\u3055",
    "summary_length_desc": "\u8981\u7D04\u306E\u9577\u3055\u3092\u8A2D\u5B9A",
    "grid_item_style_settings": "\u30B0\u30EA\u30C3\u30C9\u30A2\u30A4\u30C6\u30E0\u30B9\u30BF\u30A4\u30EB\u8A2D\u5B9A",
    "card_layout": "\u30AB\u30FC\u30C9\u30EC\u30A4\u30A2\u30A6\u30C8",
    "card_layout_desc": "\u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u30AB\u30FC\u30C9\u30EC\u30A4\u30A2\u30A6\u30C8\u3092\u9078\u629E",
    "horizontal_card": "\u6C34\u5E73\u30AB\u30FC\u30C9",
    "vertical_card": "\u5782\u76F4\u30AB\u30FC\u30C9",
    "image_position": "\u753B\u50CF\u4F4D\u7F6E",
    "image_position_desc": "\u753B\u50CF\u306E\u4F4D\u7F6E\u3092\u8A2D\u5B9A",
    "top": "\u4E0A\u90E8",
    "bottom": "\u4E0B\u90E8",
    "multi_line_title": "\u30BF\u30A4\u30C8\u30EB\u30B5\u30DD\u30FC\u30C8\u591A\u884C\u8868\u793A",
    "multi_line_title_desc": "\u30BF\u30A4\u30C8\u30EB\u3092\u591A\u884C\u8868\u793A\u3059\u308B\u304B\u3069\u3046\u304B\u3092\u8A2D\u5B9A",
    "show_code_block_in_summary": "\u8981\u7D04\u306BCodeBlock\u3092\u8868\u793A",
    "show_code_block_in_summary_desc": "\u8981\u7D04\u306BCodeBlock\u3092\u8868\u793A\u3059\u308B\u304B\u3069\u3046\u304B\u3092\u8A2D\u5B9A",
    "enable_file_watcher": "\u30D5\u30A1\u30A4\u30EB\u76E3\u8996\u3092\u6709\u52B9\u306B\u3059\u308B",
    "enable_file_watcher_desc": "\u6709\u52B9\u306B\u3059\u308B\u3068\u3001\u30D5\u30A1\u30A4\u30EB\u306E\u5909\u66F4\u3092\u81EA\u52D5\u7684\u306B\u691C\u51FA\u3057\u3066\u30D3\u30E5\u30FC\u3092\u66F4\u65B0\u3057\u307E\u3059\u3002\u7121\u52B9\u306E\u5834\u5408\u306F\u3001\u66F4\u65B0\u30DC\u30BF\u30F3\u3092\u624B\u52D5\u3067\u30AF\u30EA\u30C3\u30AF\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059",
    "intercept_all_tag_clicks": "\u3059\u3079\u3066\u306E\u30BF\u30B0\u30AF\u30EA\u30C3\u30AF\u3092\u30A4\u30F3\u30BF\u30FC\u30BB\u30D7\u30C8",
    "intercept_all_tag_clicks_desc": "\u6709\u52B9\u306B\u3059\u308B\u3068\u3001\u3059\u3079\u3066\u306E\u30BF\u30B0\u30AF\u30EA\u30C3\u30AF\u304C\u30A4\u30F3\u30BF\u30FC\u30BB\u30D7\u30C8\u3055\u308C\u3001\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u958B\u304B\u308C\u307E\u3059",
    "intercept_breadcrumb_clicks": "\u30D1\u30F3\u304F\u305A\u30EA\u30B9\u30C8\u306E\u30AF\u30EA\u30C3\u30AF\u3092\u30A4\u30F3\u30BF\u30FC\u30BB\u30D7\u30C8",
    "intercept_breadcrumb_clicks_desc": "\u6709\u52B9\u306B\u3059\u308B\u3068\u3001\u30D1\u30F3\u304F\u305A\u30EA\u30B9\u30C8\u306E\u30AF\u30EA\u30C3\u30AF\u304C\u30A4\u30F3\u30BF\u30FC\u30BB\u30D7\u30C8\u3055\u308C\u3001\u30D1\u30B9\u304C\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u958B\u304B\u308C\u307E\u3059",
    "reset_to_default": "\u30C7\u30D5\u30A9\u30EB\u30C8\u306B\u623B\u3059",
    "settings_reset_notice": "\u8A2D\u5B9A\u5024\u304C\u30C7\u30D5\u30A9\u30EB\u30C8\u5024\u306B\u30EA\u30BB\u30C3\u30C8\u3055\u308C\u307E\u3057\u305F",
    "config_management": "\u8A2D\u5B9A\u7BA1\u7406",
    "config_management_desc": "\u7BA1\u7406\u8A2D\u5B9A\u306E\u30EA\u30BB\u30C3\u30C8\u3001\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3001\u30A4\u30F3\u30DD\u30FC\u30C8",
    "ignored_folders_settings": "\u7121\u8996\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u8A2D\u5B9A",
    "display_mode_settings": "\u8868\u793A\u30E2\u30FC\u30C9\u8A2D\u5B9A",
    "custom_mode_settings": "\u30AB\u30B9\u30BF\u30E0\u30E2\u30FC\u30C9\u8A2D\u5B9A",
    "add_custom_mode": "\u30AB\u30B9\u30BF\u30E0\u30E2\u30FC\u30C9\u3092\u8FFD\u52A0",
    "export": "\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",
    "import": "\u30A4\u30F3\u30DD\u30FC\u30C8",
    "no_custom_modes_to_export": "\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3059\u308B\u30AB\u30B9\u30BF\u30E0\u30E2\u30FC\u30C9\u304C\u3042\u308A\u307E\u305B\u3093",
    "export_success_vault": "\u30AB\u30B9\u30BF\u30E0\u30E2\u30FC\u30C9\u3092 {filename} \u306B\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3057\u305F",
    "export_error": "\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u5931\u6557",
    "import_success": "\u30A4\u30F3\u30DD\u30FC\u30C8\u6210\u529F",
    "import_error": "\u30A4\u30F3\u30DD\u30FC\u30C8\u5931\u6557\uFF1A\u7121\u52B9\u306A\u30D5\u30A1\u30A4\u30EB\u5F62\u5F0F",
    "edit_custom_mode": "\u30AB\u30B9\u30BF\u30E0\u30E2\u30FC\u30C9\u3092\u7DE8\u96C6",
    "custom_mode": "\u30AB\u30B9\u30BF\u30E0\u30E2\u30FC\u30C9",
    "custom_mode_display_name": "\u8868\u793A\u540D",
    "custom_mode_display_name_desc": "\u30E2\u30FC\u30C9\u30E1\u30CB\u30E5\u30FC\u3067\u8868\u793A\u3059\u308B\u540D\u524D",
    "custom_mode_dataview_code": "Dataviewjs \u30B3\u30FC\u30C9",
    "custom_mode_dataview_code_desc": "\u30D5\u30A1\u30A4\u30EB\u30EA\u30B9\u30C8\u3092\u53D6\u5F97\u3059\u308B Dataviewjs \u30B3\u30FC\u30C9\u3092\u5165\u529B",
    "custom_mode_sub_options": "\u30AB\u30B9\u30BF\u30E0\u30E2\u30FC\u30C9\u5B50\u9078\u629E\u80A2",
    "custom_mode_fields_placeholder": "frontmatter\u306E\u30D5\u30A3\u30FC\u30EB\u30C9\u540D\u3092\u30AB\u30F3\u30DE\u533A\u5207\u308A\u3067\u5165\u529B (\u4F8B: date,category,status) (\u4EFB\u610F)",
    "dataview_plugin_not_enabled": "Dataview \u30D7\u30E9\u30B0\u30A4\u30F3\u304C\u6709\u52B9\u306B\u306A\u3063\u3066\u3044\u307E\u305B\u3093",
    "show_bookmarks_mode": "\u30D6\u30C3\u30AF\u30DE\u30FC\u30AF\u30E2\u30FC\u30C9\u3092\u8868\u793A",
    "show_search_mode": "\u691C\u7D22\u7D50\u679C\u30E2\u30FC\u30C9\u3092\u8868\u793A",
    "show_backlinks_mode": "\u30D0\u30C3\u30AF\u30EA\u30F3\u30AF\u30E2\u30FC\u30C9\u3092\u8868\u793A",
    "show_outgoinglinks_mode": "\u30A2\u30A6\u30C8\u30B0\u30EA\u30F3\u30AF\u30E2\u30FC\u30C9\u3092\u8868\u793A",
    "show_all_files_mode": "\u5168\u30D5\u30A1\u30A4\u30EB\u30E2\u30FC\u30C9\u3092\u8868\u793A",
    "show_recent_files_mode": "\u6700\u8FD1\u30D5\u30A1\u30A4\u30EB\u30E2\u30FC\u30C9\u3092\u8868\u793A",
    "recent_files_count": "\u6700\u8FD1\u30D5\u30A1\u30A4\u30EB\u30E2\u30FC\u30C9\u8868\u793A\u7B46\u6570",
    "show_random_note_mode": "\u30E9\u30F3\u30C0\u30E0\u30CE\u30FC\u30C8\u30E2\u30FC\u30C9\u3092\u8868\u793A",
    "random_note_count": "\u30E9\u30F3\u30C0\u30E0\u30CE\u30FC\u30C8\u30E2\u30FC\u30C9\u8868\u793A\u7B46\u6570",
    "random_note_notes_only": "\u30CE\u30FC\u30C8\u306E\u307F",
    "random_note_include_media_files": "\u30E1\u30C7\u30A3\u30A2\u30D5\u30A1\u30A4\u30EB\u3092\u542B\u3080",
    "show_tasks_mode": "\u30BF\u30B9\u30AF\u30E2\u30FC\u30C9\u3092\u8868\u793A",
    "task_filter": "\u30BF\u30B9\u30AF\u30D5\u30A3\u30EB\u30BF",
    "uncompleted": "\u672A\u5B8C\u4E86",
    "completed": "\u5B8C\u4E86",
    "foldernote_display_settings": "\u30D5\u30A9\u30EB\u30C0\u30CE\u30FC\u30C8\u306E\u8868\u793A\u8A2D\u5B9A",
    "foldernote_display_settings_desc": "\u30D5\u30A9\u30EB\u30C0\u30CE\u30FC\u30C8\u306E\u8868\u793A\u65B9\u6CD5\u3092\u8A2D\u5B9A\u3057\u307E\u3059",
    "all": "\u3059\u3079\u3066",
    "default": "\u30C7\u30D5\u30A9\u30EB\u30C8",
    "hidden": "\u96A0\u3059",
    // 隠す頂部元素
    "hide_header_elements": "\u9802\u90E8\u5143\u7D20\u3092\u96A0\u3059",
    // 開く場所設定
    "default_open_location": "\u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u958B\u304F\u5834\u6240",
    "default_open_location_desc": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3092\u958B\u304F\u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u5834\u6240\u3092\u8A2D\u5B9A",
    "open_in_left_sidebar": "\u5DE6\u30B5\u30A4\u30C9\u30D0\u30FC\u3067\u958B\u304F",
    "open_in_right_sidebar": "\u53F3\u30B5\u30A4\u30C9\u30D0\u30FC\u3067\u958B\u304F",
    "open_in_new_tab": "\u65B0\u3057\u3044\u30BF\u30D6\u3067\u958B\u304F",
    "reuse_existing_leaf": "\u65E2\u5B58\u306E\u30D3\u30E5\u30FC\u3092\u518D\u5229\u7528",
    "reuse_existing_leaf_desc": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3092\u958B\u304F\u3068\u304D\u3001\u65B0\u3057\u3044\u30D3\u30E5\u30FC\u3092\u4F5C\u6210\u305B\u305A\u306B\u65E2\u5B58\u306E\u30D3\u30E5\u30FC\u3092\u512A\u5148\u4F7F\u7528",
    "custom_document_extensions": "\u30AB\u30B9\u30BF\u30E0\u6587\u66F8\u62E1\u5F35\u5B50",
    "custom_document_extensions_desc": "\u8FFD\u52A0\u306E\u6587\u66F8\u62E1\u5F35\u5B50\uFF08\u30AB\u30F3\u30DE\u533A\u5207\u308A\u3001\u30C9\u30C3\u30C8\u7121\u3057\uFF09",
    "custom_document_extensions_placeholder": "\u4F8B\uFF1Atxt,doc,docx",
    "custom_folder_icon": "\u30AB\u30B9\u30BF\u30E0\u30D5\u30A9\u30EB\u30C0\u30FC\u30A2\u30A4\u30B3\u30F3",
    "custom_folder_icon_desc": "\u30AB\u30B9\u30BF\u30E0\u30D5\u30A9\u30EB\u30C0\u30FC\u30A2\u30A4\u30B3\u30F3\uFF08Emoji\u3092\u4F7F\u7528\uFF09",
    // フォルダ選択ダイアログ
    "select_folders": "\u30D5\u30A9\u30EB\u30C0\u3092\u9078\u629E",
    "select_folders_to_ignore": "\u7121\u8996\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u3092\u9078\u629E",
    "explorer": "\u30D6\u30E9\u30A6\u30B6\u30FC",
    "open_explorer": "\u30D6\u30E9\u30A6\u30B6\u30FC\u3092\u958B\u304F",
    "open_grid_view": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3092\u958B\u304F",
    "open_in_grid_view": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u958B\u304F",
    "show_note_in_grid_view": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u8868\u793A",
    "open_note_in_grid_view": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u73FE\u5728\u306E\u30CE\u30FC\u30C8\u3092\u958B\u304F",
    "open_backlinks_in_grid_view": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u30D0\u30C3\u30AF\u30EA\u30F3\u30AF\u3092\u958B\u304F",
    "open_outgoinglinks_in_grid_view": "\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u5916\u90E8\u30EA\u30F3\u30AF\u3092\u958B\u304F",
    "open_recent_files_in_grid_view": "\u6700\u8FD1\u306E\u30D5\u30A1\u30A4\u30EB\u3067\u73FE\u5728\u306E\u30CE\u30FC\u30C8\u3092\u958B\u304F",
    "open_settings": "\u8A2D\u5B9A\u3092\u958B\u304F",
    "open_new_grid_view": "\u65B0\u3057\u3044\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3092\u958B\u304F",
    "open_in_new_grid_view": "\u65B0\u3057\u3044\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u958B\u304F",
    "min_mode": "\u6700\u5C0F\u5316\u30E2\u30FC\u30C9",
    "show_ignored_folders": "\u7121\u8996\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u30FC\u3092\u8868\u793A",
    "delete_note": "\u30D5\u30A1\u30A4\u30EB\u3092\u524A\u9664",
    "open_folder_note": "\u30D5\u30A9\u30EB\u30C0\u30FC\u30CE\u30FC\u30C8\u3092\u958B\u304F",
    "create_folder_note": "\u30D5\u30A9\u30EB\u30C0\u30FC\u30CE\u30FC\u30C8\u3092\u4F5C\u6210",
    "delete_folder_note": "\u30D5\u30A9\u30EB\u30C0\u30FC\u30CE\u30FC\u30C8\u3092\u524A\u9664",
    "edit_folder_note_settings": "\u30D5\u30A9\u30EB\u30C0\u30FC\u30CE\u30FC\u30C8\u8A2D\u5B9A\u3092\u7DE8\u96C6",
    "ignore_folder": "\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u30FC\u3092\u7121\u8996",
    "unignore_folder": "\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u30FC\u3092\u7121\u8996\u89E3\u9664",
    "searching": "\u691C\u7D22\u4E2D...",
    "no_files": "\u30D5\u30A1\u30A4\u30EB\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",
    "filter_folders": "\u30D5\u30A9\u30EB\u30C0\u3092\u30D5\u30A3\u30EB\u30BF\u30EA\u30F3\u30B0...",
    "search_for": "\u691C\u7D22",
    // ショートカット選択ダイアログ
    "create_shortcut": "\u30B7\u30E7\u30FC\u30C8\u30AB\u30C3\u30C8\u3092\u4F5C\u6210",
    "select_folder": "\u30D5\u30A9\u30EB\u30C0\u3092\u9078\u629E",
    "select_file": "\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u629E",
    "target_not_found": "\u76EE\u6A19\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",
    "shortcut_created": "\u30B7\u30E7\u30FC\u30C8\u30AB\u30C3\u30C8\u304C\u4F5C\u6210\u3055\u308C\u307E\u3057\u305F",
    "failed_to_create_shortcut": "\u30B7\u30E7\u30FC\u30C8\u30AB\u30C3\u30C8\u306E\u4F5C\u6210\u306B\u5931\u6557\u3057\u307E\u3057\u305F",
    // フォルダーノート設定ダイアログ
    "folder_note_settings": "\u30D5\u30A9\u30EB\u30C0\u30FC\u30CE\u30FC\u30C8\u8A2D\u5B9A",
    "folder_sort_type": "\u30D5\u30A9\u30EB\u30C0\u306E\u4E26\u3073\u66FF\u3048",
    "folder_sort_type_desc": "\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u4E26\u3073\u66FF\u3048\u65B9\u6CD5\u3092\u8A2D\u5B9A",
    "folder_color": "\u30D5\u30A9\u30EB\u30C0\u306E\u8272",
    "folder_color_desc": "\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306E\u8868\u793A\u8272\u3092\u8A2D\u5B9A",
    "folder_icon": "\u30D5\u30A9\u30EB\u30C0\u306E\u30A2\u30A4\u30B3\u30F3",
    "folder_icon_desc": "\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306E\u8868\u793A\u30A2\u30A4\u30B3\u30F3\u3092\u8A2D\u5B9A",
    "no_color": "\u8272\u306A\u3057",
    "color_red": "\u8D64",
    "color_orange": "\u30AA\u30EC\u30F3\u30B8",
    "color_yellow": "\u9EC4",
    "color_green": "\u7DD1",
    "color_cyan": "\u30B7\u30A2\u30F3",
    "color_blue": "\u9752",
    "color_purple": "\u7D2B",
    "color_pink": "\u30D4\u30F3\u30AF",
    "color_custom": "\u30AB\u30B9\u30BF\u30E0",
    "confirm": "\u78BA\u8A8D",
    "search_text": "\u691C\u7D22\u30C6\u30AD\u30B9\u30C8",
    "enter_search_text": "\u691C\u7D22\u30C6\u30AD\u30B9\u30C8\u3092\u5165\u529B",
    "enter_uri": "URI\u3092\u5165\u529B",
    "enter_uri_placeholder": "URL\u307E\u305F\u306Fobsidian://\u30D7\u30ED\u30C8\u30B3\u30EB\u3092\u5165\u529B",
    "note_attribute_settings": "\u30CE\u30FC\u30C8\u5C5E\u6027\u8A2D\u5B9A",
    "note_title": "\u30CE\u30FC\u30C8\u30BF\u30A4\u30C8\u30EB",
    "note_title_desc": "\u3053\u306E\u30CE\u30FC\u30C8\u306E\u8868\u793A\u30BF\u30A4\u30C8\u30EB\u3092\u8A2D\u5B9A",
    "note_summary": "\u30CE\u30FC\u30C8\u8981\u7D04",
    "note_summary_desc": "\u3053\u306E\u30CE\u30FC\u30C8\u306E\u8868\u793A\u8981\u7D04\u3092\u8A2D\u5B9A",
    "note_color": "\u30CE\u30FC\u30C8\u8272",
    "note_color_desc": "\u3053\u306E\u30CE\u30FC\u30C8\u306E\u8868\u793A\u8272\u3092\u8A2D\u5B9A",
    "custom_hex_color": "\u30AB\u30B9\u30BF\u30E0 HEX \u30AB\u30E9\u30FC",
    "custom_hex_color_desc": "\u30AB\u30B9\u30BF\u30E0 HEX \u30AB\u30E9\u30FC\u5024\u3092\u5165\u529B\uFF08\u4F8B\uFF1A#FF8800 \u307E\u305F\u306F #F80\uFF09",
    "set_note_attribute": "\u30CE\u30FC\u30C8\u5C5E\u6027\u8A2D\u5B9A",
    "rename_folder": "\u30D5\u30A9\u30EB\u30C0\u3092\u518D\u547D\u540D",
    "enter_new_folder_name": "\u65B0\u3057\u3044\u30D5\u30A9\u30EB\u30C0\u540D\u3092\u5165\u529B",
    "search_selection_in_grid_view": "... \u3092\u30B0\u30EA\u30C3\u30C9\u30D3\u30E5\u30FC\u3067\u691C\u7D22",
    "show_date_dividers": "\u65E5\u4ED8\u533A\u5207\u308A\u3092\u8868\u793A",
    "show_date_dividers_desc": "\u65E5\u4ED8\u95A2\u9023\u306E\u4E26\u3073\u66FF\u3048\u6642\u3001\u5404\u65E5\u306E\u6700\u521D\u306E\u30A2\u30A4\u30C6\u30E0\u306E\u524D\u306B\u65E5\u4ED8\u533A\u5207\u308A\u3092\u8868\u793A\u3059\u308B",
    "date_divider_format": "\u65E5\u4ED8\u533A\u5207\u308A\u30D5\u30A9\u30FC\u30DE\u30C3\u30C8",
    "date_divider_mode": "\u65E5\u4ED8\u533A\u5207\u308A",
    "date_divider_mode_desc": "\u65E5\u4ED8\u533A\u5207\u308A\u306E\u8868\u793A\u30E2\u30FC\u30C9\u3092\u9078\u629E",
    "date_divider_mode_none": "\u4F7F\u7528\u3057\u306A\u3044",
    "date_divider_mode_year": "\u5E74",
    "date_divider_mode_month": "\u6708",
    "date_divider_mode_day": "\u65E5",
    "pinned": "\u30D4\u30F3\u7559\u3081",
    "pinned_desc": "\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u6700\u4E0A\u90E8\u306B\u56FA\u5B9A\u3059\u308B",
    "foldernote_pinned": "\u30D5\u30A9\u30EB\u30C0\u30CE\u30FC\u30C8\u3092\u30D4\u30F3\u7559\u3081",
    "foldernote_pinned_desc": "\u30D5\u30A9\u30EB\u30C0\u30FC\u30CE\u30FC\u30C8\u3092\u6700\u4E0A\u90E8\u306B\u56FA\u5B9A",
    "display_minimized": "\u6700\u5C0F\u5316\u8868\u793A",
    "display_minimized_desc": "\u3053\u306E\u30CE\u30FC\u30C8\u3092\u6700\u5C0F\u5316\u30E2\u30FC\u30C9\u3067\u8868\u793A",
    // Quick Access Settings and Commands
    "quick_access_settings_title": "\u30AF\u30A4\u30C3\u30AF\u30A2\u30AF\u30BB\u30B9\u8A2D\u5B9A",
    "quick_access_folder_name": "\u30AF\u30A4\u30C3\u30AF\u30A2\u30AF\u30BB\u30B9\u30D5\u30A9\u30EB\u30C0\u30FC",
    "quick_access_folder_desc": "\u300C\u30AF\u30A4\u30C3\u30AF\u30A2\u30AF\u30BB\u30B9 \u30D5\u30A9\u30EB\u30C0\u30FC\u3092\u958B\u304F\u300D\u30B3\u30DE\u30F3\u30C9\u3067\u4F7F\u7528\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u30FC\u3092\u8A2D\u5B9A\u3057\u307E\u3059",
    "quick_access_mode_name": "\u30AF\u30A4\u30C3\u30AF\u30A2\u30AF\u30BB\u30B9\u30E2\u30FC\u30C9",
    "quick_access_mode_desc": "\u300C\u30AF\u30A4\u30C3\u30AF\u30A2\u30AF\u30BB\u30B9\u30E2\u30FC\u30C9\u3092\u958B\u304F\u300D\u30B3\u30DE\u30F3\u30C9\u3067\u4F7F\u7528\u3059\u308B\u65E2\u5B9A\u306E\u30E2\u30FC\u30C9\u3092\u8A2D\u5B9A\u3057\u307E\u3059",
    "use_quick_access_as_new_tab_view": "\u30AF\u30A4\u30C3\u30AF\u30A2\u30AF\u30BB\u30B9\u3092\u65B0\u3057\u3044\u30BF\u30D6\u3068\u3057\u3066\u4F7F\u7528\u3059\u308B",
    "use_quick_access_as_new_tab_view_desc": "\u65E2\u5B9A\u306E\u300C\u65B0\u3057\u3044\u30BF\u30D6\u300D\u306E\u8868\u793A\u3092\u3001\u9078\u629E\u3057\u305F\u30AF\u30A4\u30C3\u30AF\u30A2\u30AF\u30BB\u30B9\u30AA\u30D7\u30B7\u30E7\u30F3\uFF08\u30D5\u30A9\u30EB\u30C0\u30FC\u307E\u305F\u306F\u30E2\u30FC\u30C9\uFF09\u306E\u30B0\u30EA\u30C3\u30C9\u8868\u793A\u306B\u7F6E\u304D\u63DB\u3048\u307E\u3059\u3002\u3053\u306E\u8A2D\u5B9A\u306F\u3001\u300C\u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u958B\u304F\u5834\u6240\u300D\u304C\u300C\u65B0\u3057\u3044\u30BF\u30D6\u3067\u958B\u304F\u300D\u306B\u8A2D\u5B9A\u3055\u308C\u3066\u3044\u308B\u5834\u5408\u306B\u306E\u307F\u6709\u52B9\u3067\u3059\uFF01",
    "default_new_tab": "\u65E2\u5B9A\u306E\u65B0\u3057\u3044\u30BF\u30D6",
    "use_quick_access_folder": "\u30AF\u30A4\u30C3\u30AF\u30A2\u30AF\u30BB\u30B9\u30D5\u30A9\u30EB\u30C0\u30FC\u3092\u4F7F\u7528\u3059\u308B",
    "use_quick_access_mode": "\u30AF\u30A4\u30C3\u30AF\u30A2\u30AF\u30BB\u30B9\u30E2\u30FC\u30C9\u3092\u4F7F\u7528\u3059\u308B",
    "open_quick_access_folder": "\u30AF\u30A4\u30C3\u30AF\u30A2\u30AF\u30BB\u30B9 \u30D5\u30A9\u30EB\u30C0\u30FC\u3092\u958B\u304F",
    "open_quick_access_mode": "\u30AF\u30A4\u30C3\u30AF\u30A2\u30AF\u30BB\u30B9\u30E2\u30FC\u30C9\u3092\u958B\u304F",
    // Explorer Stash
    "stash": "\u4E00\u6642\u4FDD\u5B58",
    "drop_files_here": "\u3053\u3053\u306B\u30C9\u30E9\u30C3\u30B0\u3057\u3066\u4E00\u6642\u4FDD\u5B58",
    "clear": "\u30AF\u30EA\u30A2",
    "save_stash_as_markdown": "\u4E00\u6642\u4FDD\u5B58\u3092Markdown\u3068\u3057\u3066\u4FDD\u5B58",
    "add_to_stash": "\u4E00\u6642\u4FDD\u5B58\u306B\u8FFD\u52A0",
    "added_to_stash": "\u4E00\u6642\u4FDD\u5B58\u306B\u8FFD\u52A0\u3055\u308C\u307E\u3057\u305F"
  },
  "ru": {
    // Notifications
    "bookmarks_plugin_disabled": "\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0441\u043D\u0430\u0447\u0430\u043B\u0430 \u0432\u043A\u043B\u044E\u0447\u0438\u0442\u0435 \u043F\u043B\u0430\u0433\u0438\u043D \u0417\u0430\u043A\u043B\u0430\u0434\u043A\u0438",
    // Buttons and Labels
    "sorting": "\u0421\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u043E",
    "refresh": "\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C",
    "reselect": "\u041F\u0435\u0440\u0435\u0432\u044B\u0431\u0440\u0430\u0442\u044C",
    "no_backlinks": "\u041D\u0435\u0442 \u043E\u0431\u0440\u0430\u0442\u043D\u044B\u0445 \u0441\u0441\u044B\u043B\u043E\u043A",
    "back": "\u041D\u0430\u0437\u0430\u0434",
    "search": "\u041F\u043E\u0438\u0441\u043A",
    "default_search_option": "\u041F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",
    "search_placeholder": "\u041A\u043B\u044E\u0447\u0435\u0432\u043E\u0435 \u0441\u043B\u043E\u0432\u043E \u0434\u043B\u044F \u043F\u043E\u0438\u0441\u043A\u0430",
    "search_current_location_only": "\u0418\u0441\u043A\u0430\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E \u0432 \u0442\u0435\u043A\u0443\u0449\u0435\u043C \u0440\u0430\u0441\u043F\u043E\u043B\u043E\u0436\u0435\u043D\u0438\u0438",
    "search_files_name_only": "\u0418\u0441\u043A\u0430\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E \u0432 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0438 \u0444\u0430\u0439\u043B\u043E\u0432",
    "search_media_files": "\u0418\u0441\u043A\u0430\u0442\u044C \u043C\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043B\u044B",
    "cancel": "\u041E\u0442\u043C\u0435\u043D\u0430",
    "new_note": "\u041D\u043E\u0432\u0430\u044F \u0437\u0430\u043C\u0435\u0442\u043A\u0430",
    "new_folder": "\u041D\u043E\u0432\u0430\u044F \u043F\u0430\u043F\u043A\u0430",
    "new_canvas": "\u041D\u043E\u0432\u044B\u0439 \u043A\u0430\u043D\u0432\u0430\u0441",
    "new_base": "\u041D\u043E\u0432\u044B\u0439 base",
    "new_shortcut": "\u041D\u043E\u0432\u044B\u0439 \u044F\u0440\u043B\u044B\u043A",
    "delete_folder": "\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u0430\u043F\u043A\u0443",
    "move_folder": "\u041F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u043F\u0430\u043F\u043A\u0443",
    "untitled": "\u0411\u0435\u0437 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044F",
    "files": "\u0444\u0430\u0439\u043B\u044B",
    "add": "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",
    "root": "\u041A\u043E\u0440\u0435\u043D\u044C",
    "sub_folders": "\u041F\u043E\u0434\u043F\u0430\u043F\u043A\u0438",
    "parent_folders": "\u0420\u043E\u0434\u0438\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0435 \u043F\u0430\u043F\u043A\u0438",
    "more_options": "\u0411\u043E\u043B\u044C\u0448\u0435 \u043E\u043F\u0446\u0438\u0439",
    "add_tag_to_search": "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u043F\u043E\u0438\u0441\u043A",
    "remove_tag_from_search": "\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0437 \u043F\u043E\u0438\u0441\u043A\u0430",
    "global_search": "\u0413\u043B\u043E\u0431\u0430\u043B\u044C\u043D\u044B\u0439 \u043F\u043E\u0438\u0441\u043A",
    "remove": "\u0423\u0434\u0430\u043B\u0438\u0442\u044C",
    "edit": "\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",
    "delete": "\u0423\u0434\u0430\u043B\u0438\u0442\u044C",
    "save": "\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",
    "option": "\u041E\u043F\u0446\u0438\u044F",
    "add_option": "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043E\u043F\u0446\u0438\u044E",
    // View Titles
    "grid_view_title": "\u0421\u0435\u0442\u043E\u0447\u043D\u044B\u0439 \u0432\u0438\u0434",
    "modes": "\u0420\u0435\u0436\u0438\u043C\u044B",
    "custom_modes": "\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0435 \u0440\u0435\u0436\u0438\u043C\u044B",
    "bookmarks_mode": "\u0417\u0430\u043A\u043B\u0430\u0434\u043A\u0438",
    "folder_mode": "\u041F\u0430\u043F\u043A\u0430",
    "search_results": "\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u043F\u043E\u0438\u0441\u043A\u0430",
    "backlinks_mode": "\u041E\u0431\u0440\u0430\u0442\u043D\u044B\u0435 \u0441\u0441\u044B\u043B\u043A\u0438",
    "outgoinglinks_mode": "\u0418\u0441\u0445\u043E\u0434\u044F\u0449\u0438\u0435 \u0441\u0441\u044B\u043B\u043A\u0438",
    "all_files_mode": "\u0412\u0441\u0435 \u0444\u0430\u0439\u043B\u044B",
    "recent_files_mode": "\u041D\u0435\u0434\u0430\u0432\u043D\u0438\u0435 \u0444\u0430\u0439\u043B\u044B",
    "random_note_mode": "\u0421\u043B\u0443\u0447\u0430\u0439\u043D\u0430\u044F \u0437\u0430\u043C\u0435\u0442\u043A\u0430",
    "tasks_mode": "\u0417\u0430\u0434\u0430\u0447\u0438",
    // Sort Options
    "sort_name_asc": "\u0418\u043C\u044F (\u0410 \u2192 \u042F)",
    "sort_name_desc": "\u0418\u043C\u044F (\u042F \u2192 \u0410)",
    "sort_mtime_desc": "\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u043E (\u041D\u043E\u0432\u043E\u0435 \u2192 \u0421\u0442\u0430\u0440\u043E\u0435)",
    "sort_mtime_asc": "\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u043E (\u0421\u0442\u0430\u0440\u043E\u0435 \u2192 \u041D\u043E\u0432\u043E\u0435)",
    "sort_ctime_desc": "\u0421\u043E\u0437\u0434\u0430\u043D\u043E (\u041D\u043E\u0432\u043E\u0435 \u2192 \u0421\u0442\u0430\u0440\u043E\u0435)",
    "sort_ctime_asc": "\u0421\u043E\u0437\u0434\u0430\u043D\u043E (\u0421\u0442\u0430\u0440\u043E\u0435 \u2192 \u041D\u043E\u0432\u043E\u0435)",
    "sort_random": "\u0421\u043B\u0443\u0447\u0430\u0439\u043D\u043E",
    // Settings
    "grid_view_settings": "\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u0433\u043E \u0432\u0438\u0434\u0430",
    "folder_display_style": "\u0421\u0442\u0438\u043B\u044C \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043F\u0430\u043F\u043E\u043A",
    "folder_display_style_desc": "\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430 \u0441\u043F\u043E\u0441\u043E\u0431\u0430 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043F\u0430\u043F\u043E\u043A \u0432 \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u043C \u0432\u0438\u0434\u0435",
    "folder_display_style_show": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u043D\u0430\u043F\u0440\u044F\u043C\u0443\u044E",
    "folder_display_style_menu": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0432 \u043C\u0435\u043D\u044E",
    "folder_display_style_hide": "\u0421\u043A\u0440\u044B\u0442\u044C",
    "show_media_files": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u043C\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043B\u044B",
    "show_media_files_desc": "\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u044C \u043C\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043B\u044B \u0432 \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u043C \u0432\u0438\u0434\u0435",
    "show_video_thumbnails": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u0430\u0442\u044E\u0440\u044B \u0432\u0438\u0434\u0435\u043E",
    "show_video_thumbnails_desc": "\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u0430\u0442\u044E\u0440\u044B \u0434\u043B\u044F \u0432\u0438\u0434\u0435\u043E \u0432 \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u043C \u0432\u0438\u0434\u0435, \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u0442 \u0437\u043D\u0430\u0447\u043E\u043A \u0432\u043E\u0441\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u044F, \u0435\u0441\u043B\u0438 \u043E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u043E",
    "show_note_in_grid": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0438 \u0432 \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u043C \u0432\u0438\u0434\u0435",
    "show_note_in_grid_desc": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0438 \u0432 \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u043C \u0432\u0438\u0434\u0435 \u043F\u0440\u0438 \u043D\u0430\u0436\u0430\u0442\u0438\u0438. \u0415\u0441\u043B\u0438 \u043E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u043E, \u043D\u0443\u0436\u043D\u043E \u043E\u0442\u043A\u0440\u044B\u0432\u0430\u0442\u044C \u0447\u0435\u0440\u0435\u0437 \u043A\u043E\u043D\u0442\u0435\u043A\u0441\u0442\u043D\u043E\u0435 \u043C\u0435\u043D\u044E",
    "open_note_layout": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443",
    "open_note_layout_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0441\u043F\u043E\u0441\u043E\u0431 \u043E\u0442\u043A\u0440\u044B\u0442\u0438\u044F \u0437\u0430\u043C\u0435\u0442\u043E\u043A \u0432 \u0432\u0438\u0434\u0435 \u0441\u0435\u0442\u043A\u0438",
    "open_note_layout_default": "\u041F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",
    "open_note_layout_newTab": "\u041D\u043E\u0432\u0430\u044F \u0432\u043A\u043B\u0430\u0434\u043A\u0430",
    "open_note_layout_split": "\u0420\u0430\u0437\u0434\u0435\u043B\u0438\u0442\u044C \u044D\u043A\u0440\u0430\u043D",
    "open_note_layout_newWindow": "\u041D\u043E\u0432\u043E\u0435 \u043E\u043A\u043D\u043E",
    "show_note_tags": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0442\u0435\u0433\u0438 \u0437\u0430\u043C\u0435\u0442\u043E\u043A",
    "show_note_tags_desc": "\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u044C \u0442\u0435\u0433\u0438 \u0434\u043B\u044F \u0437\u0430\u043C\u0435\u0442\u043E\u043A \u0432 \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u043C \u0432\u0438\u0434\u0435",
    "ignored_folders": "\u0418\u0433\u043D\u043E\u0440\u0438\u0440\u0443\u0435\u043C\u044B\u0435 \u043F\u0430\u043F\u043A\u0438",
    "ignored_folders_desc": "\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u043F\u0430\u043F\u043A\u0438 \u0434\u043B\u044F \u0438\u0433\u043D\u043E\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0437\u0434\u0435\u0441\u044C",
    "add_ignored_folder": "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0438\u0433\u043D\u043E\u0440\u0438\u0440\u0443\u0435\u043C\u0443\u044E \u043F\u0430\u043F\u043A\u0443",
    "no_ignored_folders": "\u041D\u0435\u0442 \u0438\u0433\u043D\u043E\u0440\u0438\u0440\u0443\u0435\u043C\u044B\u0445 \u043F\u0430\u043F\u043E\u043A.",
    "ignored_folder_patterns": "\u0418\u0433\u043D\u043E\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u0430\u043F\u043A\u0438 \u0438 \u0444\u0430\u0439\u043B\u044B \u043F\u043E \u0448\u0430\u0431\u043B\u043E\u043D\u0443",
    "ignored_folder_patterns_desc": "\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0441\u0442\u0440\u043E\u043A\u043E\u0432\u044B\u0435 \u0448\u0430\u0431\u043B\u043E\u043D\u044B \u0434\u043B\u044F \u0438\u0433\u043D\u043E\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043F\u0430\u043F\u043E\u043A \u0438 \u0444\u0430\u0439\u043B\u043E\u0432 (\u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0440\u0435\u0433\u0443\u043B\u044F\u0440\u043D\u044B\u0435 \u0432\u044B\u0440\u0430\u0436\u0435\u043D\u0438\u044F)",
    "add_ignored_folder_pattern": "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D \u043F\u0430\u043F\u043A\u0438",
    "ignored_folder_pattern_placeholder": "\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F \u043F\u0430\u043F\u043A\u0438 \u0438\u043B\u0438 \u0448\u0430\u0431\u043B\u043E\u043D \u0440\u0435\u0433\u0443\u043B\u044F\u0440\u043D\u043E\u0433\u043E \u0432\u044B\u0440\u0430\u0436\u0435\u043D\u0438\u044F",
    "no_ignored_folder_patterns": "\u041D\u0435\u0442 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432 \u0438\u0433\u043D\u043E\u0440\u0438\u0440\u0443\u0435\u043C\u044B\u0445 \u043F\u0430\u043F\u043E\u043A.",
    "default_sort_type": "\u0422\u0438\u043F \u0441\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0438 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",
    "default_sort_type_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u043C\u0435\u0442\u043E\u0434 \u0441\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0438 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E \u043F\u0440\u0438 \u043E\u0442\u043A\u0440\u044B\u0442\u0438\u0438 \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u0433\u043E \u0432\u0438\u0434\u0430",
    "note_title_field": '\u0418\u043C\u044F \u043F\u043E\u043B\u044F "\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u043C\u0435\u0442\u043A\u0438"',
    "note_title_field_desc": "\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0438\u043C\u044F \u043F\u043E\u043B\u044F \u0432 \u043C\u0435\u0442\u0430\u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F \u0432 \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044F \u0437\u0430\u043C\u0435\u0442\u043A\u0438",
    "note_summary_field": '\u0418\u043C\u044F \u043F\u043E\u043B\u044F "\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"',
    "note_summary_field_desc": "\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0438\u043C\u044F \u043F\u043E\u043B\u044F \u0432 \u043C\u0435\u0442\u0430\u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F \u0432 \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043A\u0440\u0430\u0442\u043A\u043E\u0433\u043E \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u044F",
    "modified_date_field": '\u0418\u043C\u044F \u043F\u043E\u043B\u044F "\u0414\u0430\u0442\u0430 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F"',
    "modified_date_field_desc": "\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0438\u043C\u044F \u043F\u043E\u043B\u044F \u0432 \u043C\u0435\u0442\u0430\u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F \u0432 \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0434\u0430\u0442\u044B \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F (\u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044E\u0442\u0441\u044F \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u043F\u043E\u043B\u0435\u0439, \u0440\u0430\u0437\u0434\u0435\u043B\u0435\u043D\u043D\u044B\u0445 \u0437\u0430\u043F\u044F\u0442\u044B\u043C\u0438)",
    "created_date_field": '\u0418\u043C\u044F \u043F\u043E\u043B\u044F "\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F"',
    "created_date_field_desc": "\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0438\u043C\u044F \u043F\u043E\u043B\u044F \u0432 \u043C\u0435\u0442\u0430\u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F \u0432 \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0434\u0430\u0442\u044B \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F (\u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044E\u0442\u0441\u044F \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u043F\u043E\u043B\u0435\u0439, \u0440\u0430\u0437\u0434\u0435\u043B\u0435\u043D\u043D\u044B\u0445 \u0437\u0430\u043F\u044F\u0442\u044B\u043C\u0438)",
    "grid_item_width": "\u0428\u0438\u0440\u0438\u043D\u0430 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430 \u0441\u0435\u0442\u043A\u0438",
    "grid_item_width_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0448\u0438\u0440\u0438\u043D\u0443 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432 \u0441\u0435\u0442\u043A\u0438",
    "grid_item_height": "\u0412\u044B\u0441\u043E\u0442\u0430 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430 \u0441\u0435\u0442\u043A\u0438",
    "grid_item_height_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0432\u044B\u0441\u043E\u0442\u0443 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432 \u0441\u0435\u0442\u043A\u0438 (0 \u0434\u043B\u044F \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0439 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438)",
    "image_area_width": "\u0428\u0438\u0440\u0438\u043D\u0430 \u043E\u0431\u043B\u0430\u0441\u0442\u0438 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",
    "image_area_width_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0448\u0438\u0440\u0438\u043D\u0443 \u043E\u0431\u043B\u0430\u0441\u0442\u0438 \u043F\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0433\u043E \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",
    "image_area_height": "\u0412\u044B\u0441\u043E\u0442\u0430 \u043E\u0431\u043B\u0430\u0441\u0442\u0438 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",
    "image_area_height_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0432\u044B\u0441\u043E\u0442\u0443 \u043E\u0431\u043B\u0430\u0441\u0442\u0438 \u043F\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0433\u043E \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",
    "title_font_size": "\u0420\u0430\u0437\u043C\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430",
    "title_font_size_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0440\u0430\u0437\u043C\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430",
    "summary_length": "\u0414\u043B\u0438\u043D\u0430 \u043A\u0440\u0430\u0442\u043A\u043E\u0433\u043E \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u044F",
    "summary_length_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0434\u043B\u0438\u043D\u0443 \u043A\u0440\u0430\u0442\u043A\u043E\u0433\u043E \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u044F",
    "grid_item_style_settings": "\u0421\u0442\u0438\u043B\u044C \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430 \u0441\u0435\u0442\u043A\u0438",
    "card_layout": "\u041A\u0430\u0440\u0442\u043E\u0447\u043D\u044B\u0439 \u043C\u0430\u043A\u0435\u0442",
    "card_layout_desc": "\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043C\u0430\u043A\u0435\u0442 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",
    "horizontal_card": "\u0413\u043E\u0440\u0438\u0437\u043E\u043D\u0442\u0430\u043B\u044C\u043D\u0430\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430",
    "vertical_card": "\u0412\u0435\u0440\u0442\u0438\u043A\u0430\u043B\u044C\u043D\u0430\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430",
    "image_position": "\u041F\u043E\u0437\u0438\u0446\u0438\u044F \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",
    "image_position_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u043F\u043E\u0437\u0438\u0446\u0438\u044E \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",
    "top": "\u0412\u0435\u0440\u0445",
    "bottom": "\u041D\u0438\u0437",
    "multi_line_title": "\u041F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430 \u043C\u043D\u043E\u0433\u043E\u0442\u043E\u0447\u0438\u044F \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430",
    "multi_line_title_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044C \u043C\u043D\u043E\u0433\u043E\u0442\u043E\u0447\u0438\u0435 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430",
    "show_code_block_in_summary": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C CodeBlock \u0432 \u043A\u0440\u0430\u0442\u043A\u043E\u043C \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0438",
    "show_code_block_in_summary_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C CodeBlock \u0432 \u043A\u0440\u0430\u0442\u043A\u043E\u043C \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0438",
    "enable_file_watcher": "\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u043D\u0430\u0431\u043B\u044E\u0434\u0435\u043D\u0438\u0435 \u0437\u0430 \u0444\u0430\u0439\u043B\u0430\u043C\u0438",
    "enable_file_watcher_desc": "\u041F\u0440\u0438 \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0438 \u0432\u0438\u0434 \u0431\u0443\u0434\u0435\u0442 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u044F\u0442\u044C\u0441\u044F \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0438 \u0444\u0430\u0439\u043B\u043E\u0432. \u0415\u0441\u043B\u0438 \u043E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u043E, \u043D\u0443\u0436\u043D\u043E \u0432\u0440\u0443\u0447\u043D\u0443\u044E \u043D\u0430\u0436\u0438\u043C\u0430\u0442\u044C \u043A\u043D\u043E\u043F\u043A\u0443 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F",
    "intercept_all_tag_clicks": "\u041F\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u044B\u0432\u0430\u0442\u044C \u0432\u0441\u0435 \u043A\u043B\u0438\u043A\u0438 \u043F\u043E \u0442\u0435\u0433\u0430\u043C",
    "intercept_all_tag_clicks_desc": "\u041F\u0440\u0438 \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0438 \u0432\u0441\u0435 \u043A\u043B\u0438\u043A\u0438 \u043F\u043E \u0442\u0435\u0433\u0430\u043C \u0431\u0443\u0434\u0443\u0442 \u043F\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u044B\u0432\u0430\u0442\u044C\u0441\u044F \u0438 \u043E\u0442\u043A\u0440\u044B\u0432\u0430\u0442\u044C\u0441\u044F \u0432 \u0432\u0438\u0434\u0435 \u0441\u0435\u0442\u043A\u0438",
    "intercept_breadcrumb_clicks": "\u041F\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u044B\u0432\u0430\u0442\u044C \u043A\u043B\u0438\u043A\u0438 \u043F\u043E \u043D\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u043E\u043D\u043D\u043E\u0439 \u0446\u0435\u043F\u043E\u0447\u043A\u0435",
    "intercept_breadcrumb_clicks_desc": "\u041F\u0440\u0438 \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0438 \u043A\u043B\u0438\u043A\u0438 \u043F\u043E \u043D\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u043E\u043D\u043D\u043E\u0439 \u0446\u0435\u043F\u043E\u0447\u043A\u0435 \u0431\u0443\u0434\u0443\u0442 \u043F\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u044B\u0432\u0430\u0442\u044C\u0441\u044F, \u0438 \u043F\u0443\u0442\u044C \u0431\u0443\u0434\u0435\u0442 \u043E\u0442\u043A\u0440\u044B\u0432\u0430\u0442\u044C\u0441\u044F \u0432 \u0432\u0438\u0434\u0435 \u0441\u0435\u0442\u043A\u0438",
    "reset_to_default": "\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u043D\u0430 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",
    "settings_reset_notice": "\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u0431\u0440\u043E\u0448\u0435\u043D\u044B \u043D\u0430 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",
    "config_management": "\u041A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F",
    "config_management_desc": "\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0435\u0439 (\u0441\u0431\u0440\u043E\u0441, \u044D\u043A\u0441\u043F\u043E\u0440\u0442, \u0438\u043C\u043F\u043E\u0440\u0442)",
    "ignored_folders_settings": "\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0438\u0433\u043D\u043E\u0440\u0438\u0440\u0443\u0435\u043C\u044B\u0445 \u043F\u0430\u043F\u043E\u043A",
    "display_mode_settings": "\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0440\u0435\u0436\u0438\u043C\u0430 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",
    "custom_mode_settings": "\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0440\u0435\u0436\u0438\u043C\u0430 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",
    "add_custom_mode": "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",
    "export": "\u042D\u043A\u0441\u043F\u043E\u0440\u0442",
    "import": "\u0418\u043C\u043F\u043E\u0440\u0442",
    "no_custom_modes_to_export": "\u041D\u0435\u0442 \u0440\u0435\u0436\u0438\u043C\u043E\u0432 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0434\u043B\u044F \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0430",
    "export_success_vault": "\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0435 \u0440\u0435\u0436\u0438\u043C\u044B \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u044B \u0432 {filename}",
    "export_error": "\u041E\u0448\u0438\u0431\u043A\u0430 \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0430",
    "import_success": "\u0418\u043C\u043F\u043E\u0440\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E",
    "import_error": "\u041E\u0448\u0438\u0431\u043A\u0430 \u0438\u043C\u043F\u043E\u0440\u0442\u0430: \u043D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u0444\u0430\u0439\u043B\u0430",
    "edit_custom_mode": "\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",
    "custom_mode": "\u0420\u0435\u0436\u0438\u043C \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F",
    "custom_mode_display_name": "\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u043C\u043E\u0435 \u0438\u043C\u044F",
    "custom_mode_display_name_desc": "\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u043C\u043E\u0435 \u0438\u043C\u044F \u0432 \u043C\u0435\u043D\u044E \u0440\u0435\u0436\u0438\u043C\u043E\u0432",
    "custom_mode_dataview_code": "\u041A\u043E\u0434 Dataview",
    "custom_mode_dataview_code_desc": "\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0434 Dataview \u0434\u043B\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0441\u043F\u0438\u0441\u043A\u0430 \u0444\u0430\u0439\u043B\u043E\u0432",
    "custom_mode_sub_options": "\u041F\u043E\u0434\u043E\u043F\u0446\u0438\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u043E\u0433\u043E \u0440\u0435\u0436\u0438\u043C\u0430",
    "custom_mode_fields_placeholder": "\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044F \u043F\u043E\u043B\u0435\u0439 frontmatter \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043F\u044F\u0442\u0443\u044E (\u043D\u0430\u043F\u0440.: date,category,status) (\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E)",
    "dataview_plugin_not_enabled": "Dataview \u043F\u043B\u0430\u0433\u0438\u043D \u043D\u0435 \u0432\u043A\u043B\u044E\u0447\u0435\u043D",
    "show_bookmarks_mode": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u0437\u0430\u043A\u043B\u0430\u0434\u043E\u043A",
    "show_search_mode": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432 \u043F\u043E\u0438\u0441\u043A\u0430",
    "show_backlinks_mode": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u043E\u0431\u0440\u0430\u0442\u043D\u044B\u0445 \u0441\u0441\u044B\u043B\u043E\u043A",
    "show_outgoinglinks_mode": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u0438\u0441\u0445\u043E\u0434\u044F\u0449\u0438\u0445 \u0441\u0441\u044B\u043B\u043E\u043A",
    "show_all_files_mode": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u0432\u0441\u0435\u0445 \u0444\u0430\u0439\u043B\u043E\u0432",
    "show_recent_files_mode": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u043D\u0435\u0434\u0430\u0432\u043D\u0438\u0445 \u0444\u0430\u0439\u043B\u043E\u0432",
    "recent_files_count": "\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043D\u0435\u0434\u0430\u0432\u043D\u0438\u0445 \u0444\u0430\u0439\u043B\u043E\u0432",
    "show_random_note_mode": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E\u0439 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",
    "random_note_count": "\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u044B\u0445 \u0437\u0430\u043C\u0435\u0442\u043E\u043A",
    "random_note_notes_only": "\u0422\u043E\u043B\u044C\u043A\u043E \u0437\u0430\u043C\u0435\u0442\u043A\u0438",
    "random_note_include_media_files": "\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u043C\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043B\u044B",
    "show_tasks_mode": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u0437\u0430\u0434\u0430\u0447",
    "task_filter": "\u0424\u0438\u043B\u044C\u0442\u0440 \u0437\u0430\u0434\u0430\u0447",
    "uncompleted": "\u041D\u0435\u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u044B\u0435",
    "completed": "\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u044B\u0435",
    "foldernote_display_settings": "\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0437\u0430\u043C\u0435\u0442\u043E\u043A \u043F\u0430\u043F\u043E\u043A",
    "foldernote_display_settings_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0437\u0430\u043C\u0435\u0442\u043E\u043A \u043F\u0430\u043F\u043E\u043A",
    "all": "\u0412\u0441\u0435",
    "default": "\u041F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",
    "hidden": "\u0421\u043A\u0440\u044B\u0442\u044B\u0435",
    // Hide header elements setting
    "hide_header_elements": "\u0421\u043A\u0440\u044B\u0442\u044C \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430",
    // Default open location setting
    "default_open_location": "\u041C\u0435\u0441\u0442\u043E \u043E\u0442\u043A\u0440\u044B\u0442\u0438\u044F \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",
    "default_open_location_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u043C\u0435\u0441\u0442\u043E \u043E\u0442\u043A\u0440\u044B\u0442\u0438\u044F \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u0433\u043E \u0432\u0438\u0434\u0430 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",
    "open_in_left_sidebar": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0432 \u043B\u0435\u0432\u043E\u0439 \u0431\u043E\u043A\u043E\u0432\u043E\u0439 \u043F\u0430\u043D\u0435\u043B\u0438",
    "open_in_right_sidebar": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0432 \u043F\u0440\u0430\u0432\u043E\u0439 \u0431\u043E\u043A\u043E\u0432\u043E\u0439 \u043F\u0430\u043D\u0435\u043B\u0438",
    "open_in_new_tab": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0432 \u043D\u043E\u0432\u043E\u0439 \u0432\u043A\u043B\u0430\u0434\u043A\u0435",
    "reuse_existing_leaf": "\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u0432\u0438\u0434",
    "reuse_existing_leaf_desc": "\u041F\u0440\u0438 \u043E\u0442\u043A\u0440\u044B\u0442\u0438\u0438 \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u0433\u043E \u0432\u0438\u0434\u0430 \u043F\u0440\u0435\u0434\u043F\u043E\u0447\u0442\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u0432\u0438\u0434 \u0432\u043C\u0435\u0441\u0442\u043E \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043D\u043E\u0432\u043E\u0433\u043E",
    "custom_document_extensions": "\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0435 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u0438\u044F \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u043E\u0432",
    "custom_document_extensions_desc": "\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u0438\u044F \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u043E\u0432 (\u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043F\u044F\u0442\u0443\u044E, \u0431\u0435\u0437 \u0442\u043E\u0447\u0435\u043A)",
    "custom_document_extensions_placeholder": "\u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, txt,doc,docx",
    "custom_folder_icon": "\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0439 \u0438\u043A\u043E\u043D\u043A\u0430 \u043F\u0430\u043F\u043A\u0438",
    "custom_folder_icon_desc": "\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0430\u044F \u0438\u043A\u043E\u043D\u043A\u0430 \u043F\u0430\u043F\u043A\u0438 (\u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 Emoji)",
    // Select Folder Dialog
    "select_folders": "\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u043F\u0430\u043F\u043A\u0443",
    "select_folders_to_ignore": "\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u043F\u0430\u043F\u043A\u0438 \u0434\u043B\u044F \u0438\u0433\u043D\u043E\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F",
    "explorer": "\u0411\u0440\u0430\u0443\u0437\u0435\u0440",
    "open_explorer": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0431\u0440\u0430\u0443\u0437\u0435\u0440",
    "open_grid_view": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0441\u0435\u0442\u043E\u0447\u043D\u044B\u0439 \u0432\u0438\u0434",
    "open_in_grid_view": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0432 \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u043C \u0432\u0438\u0434\u0435",
    "show_note_in_grid_view": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0432 \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u043C \u0432\u0438\u0434\u0435",
    "open_note_in_grid_view": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u0432 \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u043C \u0432\u0438\u0434\u0435",
    "open_backlinks_in_grid_view": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u043E\u0431\u0440\u0430\u0442\u043D\u044B\u0435 \u0441\u0441\u044B\u043B\u043A\u0438 \u0432 \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u043C \u0432\u0438\u0434\u0435",
    "open_outgoinglinks_in_grid_view": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0438\u0441\u0445\u043E\u0434\u044F\u0449\u0438\u0435 \u0441\u0441\u044B\u043B\u043A\u0438 \u0432 \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u043C \u0432\u0438\u0434\u0435",
    "open_recent_files_in_grid_view": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0442\u0435\u043A\u0443\u0449\u0443\u044E \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u0432 \u043D\u0435\u0434\u0430\u0432\u043D\u0438\u0445 \u0444\u0430\u0439\u043B\u0430\u0445",
    "open_settings": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",
    "open_new_grid_view": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0441\u0435\u0442\u043E\u0447\u043D\u044B\u0439 \u0432\u0438\u0434",
    "open_in_new_grid_view": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0432 \u043D\u043E\u0432\u043E\u043C \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u043C \u0432\u0438\u0434\u0435",
    "min_mode": "\u041C\u0438\u043D\u0438\u043C\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u0438\u0434",
    "show_ignored_folders": "\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0438\u0433\u043D\u043E\u0440\u0438\u0440\u0443\u0435\u043C\u044B\u0435 \u043F\u0430\u043F\u043A\u0438",
    "delete_note": "\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0444\u0430\u0439\u043B",
    "open_folder_note": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u043F\u0430\u043F\u043A\u0438",
    "create_folder_note": "\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u043F\u0430\u043F\u043A\u0438",
    "delete_folder_note": "\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u043F\u0430\u043F\u043A\u0438",
    "edit_folder_note_settings": "\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0437\u0430\u043C\u0435\u0442\u043A\u0438 \u043F\u0430\u043F\u043A\u0438",
    "ignore_folder": "\u0418\u0433\u043D\u043E\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u044D\u0442\u0443 \u043F\u0430\u043F\u043A\u0443",
    "unignore_folder": "\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u0438\u0433\u043D\u043E\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u044D\u0442\u043E\u0439 \u043F\u0430\u043F\u043A\u0438",
    "searching": "\u041F\u043E\u0438\u0441\u043A...",
    "no_files": "\u0424\u0430\u0439\u043B\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B",
    "filter_folders": "\u0424\u0438\u043B\u044C\u0442\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u0430\u043F\u043A\u0438...",
    "search_for": "\u041F\u043E\u0438\u0441\u043A",
    // Shortcut Selection Dialog
    "create_shortcut": "\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u044F\u0440\u043B\u0438\u043A",
    "select_folder": "\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u043F\u0430\u043F\u043A\u0443",
    "select_file": "\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0444\u0430\u0439\u043B",
    "target_not_found": "\u0426\u0435\u043B\u044C \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430",
    "shortcut_created": "\u042F\u0440\u043B\u0438\u043A \u0441\u043E\u0437\u0434\u0430\u043D",
    "failed_to_create_shortcut": "\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u044F\u0440\u043B\u0438\u043A",
    // Folder Note Settings Dialog
    "folder_note_settings": "\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0437\u0430\u043C\u0435\u0442\u043A\u0438 \u043F\u0430\u043F\u043A\u0438",
    "folder_sort_type": "\u0422\u0438\u043F \u0441\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0438 \u043F\u0430\u043F\u043A\u0438",
    "folder_sort_type_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0442\u0438\u043F \u0441\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0438 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E \u0434\u043B\u044F \u044D\u0442\u043E\u0439 \u043F\u0430\u043F\u043A\u0438",
    "folder_color": "\u0426\u0432\u0435\u0442 \u043F\u0430\u043F\u043A\u0438",
    "folder_color_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0446\u0432\u0435\u0442 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0434\u043B\u044F \u044D\u0442\u043E\u0439 \u043F\u0430\u043F\u043A\u0438",
    "folder_icon": "\u0418\u043A\u043E\u043D\u043A\u0430 \u043F\u0430\u043F\u043A\u0438",
    "folder_icon_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0438\u043A\u043E\u043D\u043A\u0443 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0434\u043B\u044F \u044D\u0442\u043E\u0439 \u043F\u0430\u043F\u043A\u0438",
    "no_color": "\u0411\u0435\u0437 \u0446\u0432\u0435\u0442\u0430",
    "color_red": "\u041A\u0440\u0430\u0441\u043D\u044B\u0439",
    "color_orange": "\u041E\u0440\u0430\u043D\u0436\u0435\u0432\u044B\u0439",
    "color_yellow": "\u0416\u0435\u043B\u0442\u044B\u0439",
    "color_green": "\u0417\u0435\u043B\u0435\u043D\u044B\u0439",
    "color_cyan": "\u0413\u043E\u043B\u0443\u0431\u043E\u0439",
    "color_blue": "\u0421\u0438\u043D\u0438\u0439",
    "color_purple": "\u0424\u0438\u043E\u043B\u0435\u0442\u043E\u0432\u044B\u0439",
    "color_pink": "\u0420\u043E\u0437\u043E\u0432\u044B\u0439",
    "color_custom": "\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0439",
    "confirm": "\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044C",
    "search_text": "\u041F\u043E\u0438\u0441\u043A\u043E\u0432\u044B\u0439 \u0442\u0435\u043A\u0441\u0442",
    "enter_search_text": "\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043E\u0438\u0441\u043A\u043E\u0432\u044B\u0439 \u0442\u0435\u043A\u0441\u0442",
    "enter_uri": "\u0412\u0432\u0435\u0434\u0438\u0442\u0435 URI",
    "enter_uri_placeholder": "\u0412\u0432\u0435\u0434\u0438\u0442\u0435 URL \u0438\u043B\u0438 \u043F\u0440\u043E\u0442\u043E\u043A\u043E\u043B obsidian://",
    "note_attribute_settings": "\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043E\u0432 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",
    "note_title": "\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",
    "note_title_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u043C\u043E\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0434\u043B\u044F \u044D\u0442\u043E\u0439 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",
    "note_summary": "\u041A\u0440\u0430\u0442\u043A\u0438\u0439 \u043E\u043F\u0438\u0441\u0430\u0442\u0435\u043B\u044C",
    "note_summary_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u043C\u043E\u0435 \u043A\u0440\u0430\u0442\u043A\u0438\u0439 \u043E\u043F\u0438\u0441\u0430\u0442\u0435\u043B\u044C \u0434\u043B\u044F \u044D\u0442\u043E\u0439 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",
    "note_color": "\u0426\u0432\u0435\u0442 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",
    "note_color_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0446\u0432\u0435\u0442 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0434\u043B\u044F \u044D\u0442\u043E\u0439 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",
    "custom_hex_color": "\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0439 HEX \u0446\u0432\u0435\u0442",
    "custom_hex_color_desc": "\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 HEX \u0446\u0432\u0435\u0442\u0430 (\u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, #FF8800 \u0438\u043B\u0438 #F80)",
    "set_note_attribute": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044B \u0437\u0430\u043C\u0435\u0442\u043A\u0438",
    "rename_folder": "\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u0442\u044C \u043F\u0430\u043F\u043A\u0443",
    "enter_new_folder_name": "\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u043E\u0432\u043E\u0435 \u0438\u043C\u044F \u043F\u0430\u043F\u043A\u0438",
    "search_selection_in_grid_view": "\u041F\u043E\u0438\u0441\u043A ... \u0432 \u0441\u0435\u0442\u043E\u0447\u043D\u043E\u043C \u0432\u0438\u0434\u0435",
    "show_date_dividers": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0440\u0430\u0437\u0434\u0435\u043B\u0438\u0442\u0435\u043B\u0438 \u0434\u0430\u0442",
    "show_date_dividers_desc": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0440\u0430\u0437\u0434\u0435\u043B\u0438\u0442\u0435\u043B\u0438 \u0434\u0430\u0442 \u043F\u0435\u0440\u0435\u0434 \u043F\u0435\u0440\u0432\u044B\u043C \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u043C \u043A\u0430\u0436\u0434\u043E\u0433\u043E \u043D\u043E\u0432\u043E\u0433\u043E \u0434\u043D\u044F \u043F\u0440\u0438 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0438 \u0441\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0438 \u043F\u043E \u0434\u0430\u0442\u0435",
    "date_divider_format": "\u0424\u043E\u0440\u043C\u0430\u0442 \u0440\u0430\u0437\u0434\u0435\u043B\u0438\u0442\u0435\u043B\u044F \u0434\u0430\u0442",
    "date_divider_mode": "\u0420\u0430\u0437\u0434\u0435\u043B\u0438\u0442\u0435\u043B\u044C \u0434\u0430\u0442",
    "date_divider_mode_desc": "\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0435\u0436\u0438\u043C \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0440\u0430\u0437\u0434\u0435\u043B\u0438\u0442\u0435\u043B\u0435\u0439 \u0434\u0430\u0442",
    "date_divider_mode_none": "\u041D\u0435\u0442",
    "date_divider_mode_year": "\u0413\u043E\u0434",
    "date_divider_mode_month": "\u041C\u0435\u0441\u044F\u0446",
    "date_divider_mode_day": "\u0414\u0435\u043D\u044C",
    "pinned": "\u0417\u0430\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u043E",
    "pinned_desc": "\u0417\u0430\u043A\u0440\u0435\u043F\u0438\u0442\u044C \u0444\u0430\u0439\u043B \u043D\u0430\u0432\u0435\u0440\u0445\u0443",
    "foldernote_pinned": "\u0417\u0430\u043A\u0440\u0435\u043F\u0438\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0438 \u043F\u0430\u043F\u043A\u0438",
    "foldernote_pinned_desc": "\u0417\u0430\u043A\u0440\u0435\u043F\u0438\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0438 \u043F\u0430\u043F\u043A\u0438 \u0432\u0432\u0435\u0440\u0445\u0443",
    "display_minimized": "\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u0432\u0438\u0434",
    "display_minimized_desc": "\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u044D\u0442\u0443 \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u0432 \u043C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u043C \u0440\u0435\u0436\u0438\u043C\u0435",
    // Quick Access Settings and Commands
    "quick_access_settings_title": "\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0411\u044B\u0441\u0442\u0440\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0430",
    "quick_access_folder_name": "\u041F\u0430\u043F\u043A\u0430 \u0431\u044B\u0441\u0442\u0440\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0430",
    "quick_access_folder_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u043F\u0430\u043F\u043A\u0443, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C\u0443\u044E \u043A\u043E\u043C\u0430\u043D\u0434\u043E\u0439 \xAB\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u043F\u0430\u043F\u043A\u0443 \u0431\u044B\u0441\u0442\u0440\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0430\xBB",
    "quick_access_mode_name": "\u0420\u0435\u0436\u0438\u043C \u0431\u044B\u0441\u0442\u0440\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0430",
    "quick_access_mode_desc": "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0440\u0435\u0436\u0438\u043C \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C\u044B\u0439 \u043A\u043E\u043C\u0430\u043D\u0434\u043E\u0439 \xAB\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0431\u044B\u0441\u0442\u0440\u044B\u0439 \u0434\u043E\u0441\u0442\u0443\u043F \u043F\u043E \u0440\u0435\u0436\u0438\u043C\u0443\xBB",
    "use_quick_access_as_new_tab_view": "\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0411\u044B\u0441\u0442\u0440\u044B\u0439 \u0434\u043E\u0441\u0442\u0443\u043F \u043A\u0430\u043A \u043D\u043E\u0432\u0443\u044E \u0432\u043A\u043B\u0430\u0434\u043A\u0443",
    "use_quick_access_as_new_tab_view_desc": "\u0417\u0430\u043C\u0435\u043D\u0438\u0442\u0435 \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u044B\u0439 \u0432\u0438\u0434 \xAB\u041D\u043E\u0432\u0430\u044F \u0432\u043A\u043B\u0430\u0434\u043A\u0430\xBB \u043D\u0430 \u0441\u0435\u0442\u043E\u0447\u043D\u044B\u0439 \u0432\u0438\u0434 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0439 \u043E\u043F\u0446\u0438\u0438 \u0411\u044B\u0441\u0442\u0440\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0430 (\u043F\u0430\u043F\u043A\u0438 \u0438\u043B\u0438 \u0440\u0435\u0436\u0438\u043C\u0430). \u0420\u0430\u0431\u043E\u0442\u0430\u0435\u0442, \u0442\u043E\u043B\u044C\u043A\u043E \u0435\u0441\u043B\u0438 \xAB\u041C\u0435\u0441\u0442\u043E \u043E\u0442\u043A\u0440\u044B\u0442\u0438\u044F \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E\xBB \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E \u043D\u0430 \xAB\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0432 \u043D\u043E\u0432\u043E\u0439 \u0432\u043A\u043B\u0430\u0434\u043A\u0435\xBB!",
    "default_new_tab": "\u041F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",
    "use_quick_access_folder": "\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u043F\u0430\u043F\u043A\u0443 \u0431\u044B\u0441\u0442\u0440\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0430",
    "use_quick_access_mode": "\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u0431\u044B\u0441\u0442\u0440\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0430",
    "open_quick_access_folder": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u043F\u0430\u043F\u043A\u0443 \u0431\u044B\u0441\u0442\u0440\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0430",
    "open_quick_access_mode": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0431\u044B\u0441\u0442\u0440\u044B\u0439 \u0434\u043E\u0441\u0442\u0443\u043F \u043F\u043E \u0440\u0435\u0436\u0438\u043C\u0443",
    // Explorer Stash
    "stash": "\u0425\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435",
    "drop_files_here": "\u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u0430\u0439\u043B\u044B \u0441\u044E\u0434\u0430, \u0447\u0442\u043E\u0431\u044B \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",
    "clear": "\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C",
    "save_stash_as_markdown": "\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435 \u043A\u0430\u043A Markdown",
    "add_to_stash": "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435",
    "added_to_stash": "\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E \u0432 \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435"
  },
  "uk": {
    // Notifications
    "bookmarks_plugin_disabled": "\u0411\u0443\u0434\u044C \u043B\u0430\u0441\u043A\u0430, \u0441\u043F\u043E\u0447\u0430\u0442\u043A\u0443 \u0443\u0432\u0456\u043C\u043A\u043D\u0456\u0442\u044C \u043F\u043B\u0430\u0433\u0456\u043D \u0417\u0430\u043A\u043B\u0430\u0434\u043A\u0438",
    // Buttons and Labels
    "sorting": "\u0421\u043E\u0440\u0442\u0443\u0432\u0430\u0442\u0438 \u0437\u0430",
    "refresh": "\u041E\u043D\u043E\u0432\u0438\u0442\u0438",
    "reselect": "\u041F\u0435\u0440\u0435\u043E\u0431\u0440\u0430\u0442\u0438",
    "no_backlinks": "\u041D\u0435\u043C\u0430\u0454 \u0437\u0432\u043E\u0440\u043E\u0442\u043D\u0438\u0445 \u043F\u043E\u0441\u0438\u043B\u0430\u043D\u044C",
    "back": "\u041D\u0430\u0437\u0430\u0434",
    "search": "\u041F\u043E\u0448\u0443\u043A",
    "default_search_option": "\u041F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",
    "search_placeholder": "\u041A\u043B\u044E\u0447\u043E\u0432\u0435 \u0441\u043B\u043E\u0432\u043E \u0434\u043B\u044F \u043F\u043E\u0448\u0443\u043A\u0443",
    "search_current_location_only": "\u0428\u0443\u043A\u0430\u0442\u0438 \u043B\u0438\u0448\u0435 \u0432 \u043F\u043E\u0442\u043E\u0447\u043D\u043E\u043C\u0443 \u0440\u043E\u0437\u0442\u0430\u0448\u0443\u0432\u0430\u043D\u043D\u0456",
    "search_files_name_only": "\u0428\u0443\u043A\u0430\u0442\u0438 \u043B\u0438\u0448\u0435 \u0432 \u043D\u0430\u0437\u0432\u0456 \u0444\u0430\u0439\u043B\u0456\u0432",
    "search_media_files": "\u0428\u0443\u043A\u0430\u0442\u0438 \u043C\u0435\u0434\u0456\u0430\u0444\u0430\u0439\u043B\u0438",
    "cancel": "\u0421\u043A\u0430\u0441\u0443\u0432\u0430\u0442\u0438",
    "new_note": "\u041D\u043E\u0432\u0430 \u043D\u043E\u0442\u0430\u0442\u043A\u0430",
    "new_folder": "\u041D\u043E\u0432\u0430 \u043F\u0430\u043F\u043A\u0430",
    "new_canvas": "\u041D\u043E\u0432\u0438\u0439 \u043A\u0430\u043D\u0432\u0430\u0441",
    "new_base": "\u041D\u043E\u0432\u0438\u0439 base",
    "new_shortcut": "\u041D\u043E\u0432\u0438\u0439 \u044F\u0440\u043B\u0438\u043A",
    "delete_folder": "\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043F\u0430\u043F\u043A\u0443",
    "move_folder": "\u041F\u0435\u0440\u0435\u043C\u0456\u0441\u0442\u0438\u0442\u0438 \u043F\u0430\u043F\u043A\u0443",
    "untitled": "\u0411\u0435\u0437 \u043D\u0430\u0437\u0432\u0438",
    "files": "\u0444\u0430\u0439\u043B\u0438",
    "add": "\u0414\u043E\u0434\u0430\u0442\u0438",
    "root": "\u041A\u043E\u0440\u0435\u043D\u044C",
    "sub_folders": "\u041F\u0456\u0434\u043F\u0430\u043F\u043A\u0438",
    "parent_folders": "\u0420\u043E\u0434\u0438\u0442\u0435\u043B\u044C\u0441\u044C\u043A\u0456 \u043F\u0430\u043F\u043A\u0438",
    "more_options": "\u0411\u0456\u043B\u044C\u0448\u0435 \u043E\u043F\u0446\u0456\u0439",
    "add_tag_to_search": "\u0414\u043E\u0434\u0430\u0442\u0438 \u0434\u043E \u043F\u043E\u0448\u0443\u043A\u0443",
    "remove_tag_from_search": "\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0437 \u043F\u043E\u0448\u0443\u043A\u0443",
    "global_search": "\u0413\u043B\u043E\u0431\u0430\u043B\u044C\u043D\u0438\u0439 \u043F\u043E\u0448\u0443\u043A",
    "remove": "\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438",
    "edit": "\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438",
    "delete": "\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438",
    "save": "\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438",
    "option": "\u041E\u043F\u0446\u0456\u044F",
    "add_option": "\u0414\u043E\u0434\u0430\u0442\u0438 \u043E\u043F\u0446\u0456\u044E",
    // View Titles
    "grid_view_title": "\u0421\u0456\u0442\u043A\u043E\u0432\u0438\u0439 \u0432\u0438\u0433\u043B\u044F\u0434",
    "modes": "\u0420\u0435\u0436\u0438\u043C\u0438",
    "custom_modes": "\u041A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0446\u044C\u043A\u0456 \u0440\u0435\u0436\u0438\u043C\u0438",
    "bookmarks_mode": "\u0417\u0430\u043A\u043B\u0430\u0434\u043A\u0438",
    "folder_mode": "\u041F\u0430\u043F\u043A\u0430",
    "search_results": "\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u0438 \u043F\u043E\u0448\u0443\u043A\u0443",
    "backlinks_mode": "\u0417\u0432\u043E\u0440\u043E\u0442\u043D\u0456 \u043F\u043E\u0441\u0438\u043B\u0430\u043D\u043D\u044F",
    "outgoinglinks_mode": "\u0412\u0438\u0445\u0456\u0434\u043D\u0456 \u043F\u043E\u0441\u0438\u043B\u0430\u043D\u043D\u044F",
    "all_files_mode": "\u0423\u0441\u0456 \u0444\u0430\u0439\u043B\u0438",
    "recent_files_mode": "\u041E\u0441\u0442\u0430\u043D\u043D\u0456 \u0444\u0430\u0439\u043B\u0438",
    "random_note_mode": "\u0412\u0438\u043F\u0430\u0434\u043A\u043E\u0432\u0430 \u043D\u043E\u0442\u0430\u0442\u043A\u0430",
    "tasks_mode": "\u0417\u0430\u0434\u0430\u0447\u0456",
    // Sort Options
    "sort_name_asc": "\u041D\u0430\u0437\u0432\u0430 (\u0410 \u2192 \u042F)",
    "sort_name_desc": "\u041D\u0430\u0437\u0432\u0430 (\u042F \u2192 \u0410)",
    "sort_mtime_desc": "\u0417\u043C\u0456\u043D\u0435\u043D\u043E (\u041D\u043E\u0432\u0435 \u2192 \u0421\u0442\u0430\u0440\u0435)",
    "sort_mtime_asc": "\u0417\u043C\u0456\u043D\u0435\u043D\u043E (\u0421\u0442\u0430\u0440\u0435 \u2192 \u041D\u043E\u0432\u0435)",
    "sort_ctime_desc": "\u0421\u0442\u0432\u043E\u0440\u0435\u043D\u043E (\u041D\u043E\u0432\u0435 \u2192 \u0421\u0442\u0430\u0440\u0435)",
    "sort_ctime_asc": "\u0421\u0442\u0432\u043E\u0440\u0435\u043D\u043E (\u0421\u0442\u0430\u0440\u0435 \u2192 \u041D\u043E\u0432\u0435)",
    "sort_random": "\u0412\u0438\u043F\u0430\u0434\u043A\u043E\u0432\u043E",
    // Settings
    "grid_view_settings": "\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u0433\u043E \u0432\u0438\u0433\u043B\u044F\u0434\u0443",
    "folder_display_style": "\u0421\u0442\u0438\u043B\u044C \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F \u043F\u0430\u043F\u043E\u043A",
    "folder_display_style_desc": "\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u0441\u043F\u043E\u0441\u043E\u0431\u0443 \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F \u043F\u0430\u043F\u043E\u043A \u0443 \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u043C\u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456",
    "folder_display_style_show": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u0431\u0435\u0437\u043F\u043E\u0441\u0435\u0440\u0435\u0434\u043D\u044C\u043E",
    "folder_display_style_menu": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u0432 \u043C\u0435\u043D\u044E",
    "folder_display_style_hide": "\u041F\u0440\u0438\u0445\u043E\u0432\u0430\u0442\u0438",
    "show_media_files": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u043C\u0435\u0434\u0456\u0430\u0444\u0430\u0439\u043B\u0438",
    "show_media_files_desc": "\u0412\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u0438 \u043C\u0435\u0434\u0456\u0430\u0444\u0430\u0439\u043B\u0438 \u0443 \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u043C\u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456",
    "show_video_thumbnails": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u043C\u0456\u043D\u0456\u0430\u0442\u044E\u0440\u0438 \u0432\u0456\u0434\u0435\u043E",
    "show_video_thumbnails_desc": "\u0412\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u0438 \u043C\u0456\u043D\u0456\u0430\u0442\u044E\u0440\u0438 \u0434\u043B\u044F \u0432\u0456\u0434\u0435\u043E \u0443 \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u043C\u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456, \u043F\u043E\u043A\u0430\u0437\u0443\u0454 \u0456\u043A\u043E\u043D\u043A\u0443 \u0432\u0456\u0434\u0442\u0432\u043E\u0440\u0435\u043D\u043D\u044F, \u044F\u043A\u0449\u043E \u0432\u0438\u043C\u043A\u043D\u0435\u043D\u043E",
    "show_note_in_grid": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u043D\u043E\u0442\u0430\u0442\u043A\u0438 \u0443 \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u043C\u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456",
    "show_note_in_grid_desc": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u043D\u043E\u0442\u0430\u0442\u043A\u0438 \u0443 \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u043C\u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456 \u043F\u0440\u0438 \u043D\u0430\u0442\u0438\u0441\u043A\u0430\u043D\u043D\u0456. \u042F\u043A\u0449\u043E \u0432\u0438\u043C\u043A\u043D\u0435\u043D\u043E, \u043F\u043E\u0442\u0440\u0456\u0431\u043D\u043E \u0432\u0456\u0434\u043A\u0440\u0438\u0432\u0430\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 \u043A\u043E\u043D\u0442\u0435\u043A\u0441\u0442\u043D\u0435 \u043C\u0435\u043D\u044E",
    "open_note_layout": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u043D\u043E\u0442\u0430\u0442\u043A\u0443",
    "open_note_layout_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u0441\u043F\u043E\u0441\u0456\u0431 \u0432\u0456\u0434\u043A\u0440\u0438\u0442\u0442\u044F \u043D\u043E\u0442\u0430\u0442\u043E\u043A \u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456 \u0441\u0456\u0442\u043A\u0438",
    "open_note_layout_default": "\u0417\u0430 \u0437\u0430\u043C\u043E\u0432\u0447\u0443\u0432\u0430\u043D\u043D\u044F\u043C",
    "open_note_layout_newTab": "\u041D\u043E\u0432\u0430 \u0432\u043A\u043B\u0430\u0434\u043A\u0430",
    "open_note_layout_split": "\u0420\u043E\u0437\u0434\u0456\u043B\u0438\u0442\u0438 \u0435\u043A\u0440\u0430\u043D",
    "open_note_layout_newWindow": "\u041D\u043E\u0432\u0435 \u0432\u0456\u043A\u043D\u043E",
    "show_note_tags": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u0442\u0435\u0433\u0438 \u043D\u043E\u0442\u0430\u0442\u043E\u043A",
    "show_note_tags_desc": "\u0412\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u0438 \u0442\u0435\u0433\u0438 \u0434\u043B\u044F \u043D\u043E\u0442\u0430\u0442\u043E\u043A \u0443 \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u043C\u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456",
    "ignored_folders": "\u0406\u0433\u043D\u043E\u0440\u043E\u0432\u0430\u043D\u0456 \u043F\u0430\u043F\u043A\u0438",
    "ignored_folders_desc": "\u0412\u043A\u0430\u0436\u0456\u0442\u044C \u043F\u0430\u043F\u043A\u0438 \u0434\u043B\u044F \u0456\u0433\u043D\u043E\u0440\u0443\u0432\u0430\u043D\u043D\u044F \u0442\u0443\u0442",
    "add_ignored_folder": "\u0414\u043E\u0434\u0430\u0442\u0438 \u0456\u0433\u043D\u043E\u0440\u043E\u0432\u0430\u043D\u0443 \u043F\u0430\u043F\u043A\u0443",
    "no_ignored_folders": "\u041D\u0435\u043C\u0430\u0454 \u0456\u0433\u043D\u043E\u0440\u043E\u0432\u0430\u043D\u0438\u0445 \u043F\u0430\u043F\u043E\u043A.",
    "ignored_folder_patterns": "\u0406\u0433\u043D\u043E\u0440\u0443\u0432\u0430\u0442\u0438 \u043F\u0430\u043F\u043A\u0438 \u0442\u0430 \u0444\u0430\u0439\u043B\u0438 \u0437\u0430 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u043C",
    "ignored_folder_patterns_desc": "\u0412\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0439\u0442\u0435 \u0440\u044F\u0434\u043A\u043E\u0432\u0456 \u0448\u0430\u0431\u043B\u043E\u043D\u0438 \u0434\u043B\u044F \u0456\u0433\u043D\u043E\u0440\u0443\u0432\u0430\u043D\u043D\u044F \u043F\u0430\u043F\u043E\u043A \u0456 \u0444\u0430\u0439\u043B\u0456\u0432 (\u043F\u0456\u0434\u0442\u0440\u0438\u043C\u0443\u0454 \u0440\u0435\u0433\u0443\u043B\u044F\u0440\u043D\u0456 \u0432\u0438\u0440\u0430\u0437\u0438)",
    "add_ignored_folder_pattern": "\u0414\u043E\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D \u043F\u0430\u043F\u043A\u0438",
    "ignored_folder_pattern_placeholder": "\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043D\u0430\u0437\u0432\u0443 \u043F\u0430\u043F\u043A\u0438 \u0430\u0431\u043E \u0448\u0430\u0431\u043B\u043E\u043D \u0440\u0435\u0433\u0443\u043B\u044F\u0440\u043D\u043E\u0433\u043E \u0432\u0438\u0440\u0430\u0437\u0443",
    "no_ignored_folder_patterns": "\u041D\u0435\u043C\u0430\u0454 \u0448\u0430\u0431\u043B\u043E\u043D\u0456\u0432 \u0456\u0433\u043D\u043E\u0440\u043E\u0432\u0430\u043D\u0438\u0445 \u043F\u0430\u043F\u043E\u043A.",
    "default_sort_type": "\u0422\u0438\u043F \u0441\u043E\u0440\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u0437\u0430 \u0437\u0430\u043C\u043E\u0432\u0447\u0443\u0432\u0430\u043D\u043D\u044F\u043C",
    "default_sort_type_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u043C\u0435\u0442\u043E\u0434 \u0441\u043E\u0440\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u0437\u0430 \u0437\u0430\u043C\u043E\u0432\u0447\u0443\u0432\u0430\u043D\u043D\u044F\u043C \u043F\u0440\u0438 \u0432\u0456\u0434\u043A\u0440\u0438\u0442\u0442\u0456 \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u0433\u043E \u0432\u0438\u0433\u043B\u044F\u0434\u0443",
    "note_title_field": '\u041D\u0430\u0437\u0432\u0430 \u043F\u043E\u043B\u044F "\u041D\u0430\u0437\u0432\u0430 \u043D\u043E\u0442\u0430\u0442\u043A\u0438"',
    "note_title_field_desc": "\u0412\u043A\u0430\u0436\u0456\u0442\u044C \u043D\u0430\u0437\u0432\u0443 \u043F\u043E\u043B\u044F \u0432 \u043C\u0435\u0442\u0430\u0434\u0430\u043D\u0438\u0445 \u0434\u043B\u044F \u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u0430\u043D\u043D\u044F \u044F\u043A \u043D\u0430\u0437\u0432\u0438 \u043D\u043E\u0442\u0430\u0442\u043A\u0438",
    "note_summary_field": '\u041D\u0430\u0437\u0432\u0430 \u043F\u043E\u043B\u044F "\u041A\u0440\u0430\u0442\u043A\u0438\u0439 \u043E\u043F\u0438\u0441"',
    "note_summary_field_desc": "\u0412\u043A\u0430\u0436\u0456\u0442\u044C \u043D\u0430\u0437\u0432\u0443 \u043F\u043E\u043B\u044F \u0432 \u043C\u0435\u0442\u0430\u0434\u0430\u043D\u0438\u0445 \u0434\u043B\u044F \u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u0430\u043D\u043D\u044F \u044F\u043A \u043A\u0440\u0430\u0442\u043A\u043E\u0433\u043E \u043E\u043F\u0438\u0441\u0443",
    "modified_date_field": '\u041D\u0430\u0437\u0432\u0430 \u043F\u043E\u043B\u044F "\u0414\u0430\u0442\u0430 \u0437\u043C\u0456\u043D\u0438"',
    "modified_date_field_desc": "\u0412\u043A\u0430\u0436\u0456\u0442\u044C \u043D\u0430\u0437\u0432\u0443 \u043F\u043E\u043B\u044F \u0432 \u043C\u0435\u0442\u0430\u0434\u0430\u043D\u0438\u0445 \u0434\u043B\u044F \u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u0430\u043D\u043D\u044F \u044F\u043A \u0434\u0430\u0442\u0438 \u0437\u043C\u0456\u043D\u0438 (\u043F\u0456\u0434\u0442\u0440\u0438\u043C\u0443\u0454\u0442\u044C\u0441\u044F \u043A\u0456\u043B\u044C\u043A\u0430 \u043D\u0430\u0437\u0432 \u043F\u043E\u043B\u0456\u0432, \u0440\u043E\u0437\u0434\u0456\u043B\u0435\u043D\u0438\u0445 \u043A\u043E\u043C\u0430\u043C\u0438)",
    "created_date_field": '\u041D\u0430\u0437\u0432\u0430 \u043F\u043E\u043B\u044F "\u0414\u0430\u0442\u0430 \u0441\u0442\u0432\u043E\u0440\u0435\u043D\u043D\u044F"',
    "created_field_desc": "\u0412\u043A\u0430\u0436\u0456\u0442\u044C \u043D\u0430\u0437\u0432\u0443 \u043F\u043E\u043B\u044F \u0432 \u043C\u0435\u0442\u0430\u0434\u0430\u043D\u0438\u0445 \u0434\u043B\u044F \u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u0430\u043D\u043D\u044F \u044F\u043A \u0434\u0430\u0442\u0438 \u0441\u0442\u0432\u043E\u0440\u0435\u043D\u043D\u044F (\u043F\u0456\u0434\u0442\u0440\u0438\u043C\u0443\u0454\u0442\u044C\u0441\u044F \u043A\u0456\u043B\u044C\u043A\u0430 \u043D\u0430\u0437\u0432 \u043F\u043E\u043B\u0456\u0432, \u0440\u043E\u0437\u0434\u0456\u043B\u0435\u043D\u0438\u0445 \u043A\u043E\u043C\u0430\u043C\u0438)",
    "grid_item_width": "\u0428\u0438\u0440\u0438\u043D\u0430 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430 \u0441\u0456\u0442\u043A\u0438",
    "grid_item_width_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u0448\u0438\u0440\u0438\u043D\u0443 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432 \u0441\u0456\u0442\u043A\u0438",
    "grid_item_height": "\u0412\u0438\u0441\u043E\u0442\u0430 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430 \u0441\u0456\u0442\u043A\u0438",
    "grid_item_height_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u0432\u0438\u0441\u043E\u0442\u0443 \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432 \u0441\u0456\u0442\u043A\u0438 (0 \u0434\u043B\u044F \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u043D\u043E\u0457 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438)",
    "image_area_width": "\u0428\u0438\u0440\u0438\u043D\u0430 \u043E\u0431\u043B\u0430\u0441\u0442\u0456 \u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F",
    "image_area_width_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u0448\u0438\u0440\u0438\u043D\u0443 \u043E\u0431\u043B\u0430\u0441\u0442\u0456 \u043F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u044C\u043E\u0433\u043E \u043F\u0435\u0440\u0435\u0433\u043B\u044F\u0434\u0443 \u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F",
    "image_area_height": "\u0412\u0438\u0441\u043E\u0442\u0430 \u043E\u0431\u043B\u0430\u0441\u0442\u0456 \u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F",
    "image_area_height_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u0432\u0438\u0441\u043E\u0442\u0443 \u043E\u0431\u043B\u0430\u0441\u0442\u0456 \u043F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u044C\u043E\u0433\u043E \u043F\u0435\u0440\u0435\u0433\u043B\u044F\u0434\u0443 \u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F",
    "title_font_size": "\u0420\u043E\u0437\u043C\u0456\u0440 \u0448\u0440\u0438\u0444\u0442\u0443 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430",
    "title_font_size_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u0440\u043E\u0437\u043C\u0456\u0440 \u0448\u0440\u0438\u0444\u0442\u0443 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430",
    "summary_length": "\u0414\u043E\u0432\u0436\u0438\u043D\u0430 \u043A\u043E\u0440\u043E\u0442\u043A\u043E\u0433\u043E \u043E\u043F\u0438\u0441\u0443",
    "summary_length_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u0434\u043E\u0432\u0436\u0438\u043D\u0443 \u043A\u043E\u0440\u043E\u0442\u043A\u043E\u0433\u043E \u043E\u043F\u0438\u0441\u0443",
    "grid_item_style_settings": "\u0421\u0442\u0438\u043B\u044C \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430 \u0441\u0456\u0442\u043A\u0438",
    "card_layout": "\u041A\u0430\u0440\u0442\u043E\u0447\u043D\u0438\u0439 \u043C\u0430\u043A\u0435\u0442",
    "card_layout_desc": "\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043C\u0430\u043A\u0435\u0442 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u0437\u0430 \u0437\u0430\u043C\u043E\u0432\u0447\u0443\u0432\u0430\u043D\u043D\u044F\u043C",
    "horizontal_card": "\u0413\u043E\u0440\u0438\u0437\u043E\u043D\u0442\u0430\u043B\u044C\u043D\u0430 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430",
    "vertical_card": "\u0412\u0435\u0440\u0442\u0438\u043A\u0430\u043B\u044C\u043D\u0430 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430",
    "image_position": "\u041F\u043E\u0437\u0438\u0446\u0456\u044F \u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F",
    "image_position_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u043F\u043E\u0437\u0438\u0446\u0456\u044E \u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F",
    "top": "\u0412\u0435\u0440\u0445",
    "bottom": "\u041D\u0438\u0436\u0447\u0435",
    "multi_line_title": "\u041F\u043E\u0434\u0442\u0440\u0438\u043C\u043A\u0430 \u043C\u043D\u043E\u0433\u043E\u0442\u043E\u0447\u043D\u044F \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430",
    "multi_line_title_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C, \u0449\u043E\u0431 \u0434\u043E\u0437\u0432\u043E\u043B\u0438\u0442\u0438 \u043C\u043D\u043E\u0433\u043E\u0442\u043E\u0447\u043D\u044F \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430",
    "show_code_block_in_summary": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 CodeBlock \u0432 \u043A\u043E\u0440\u043E\u0442\u043A\u043E\u043C\u0443 \u043E\u043F\u0438\u0441\u0456",
    "show_code_block_in_summary_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C, \u0449\u043E\u0431 \u043F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 CodeBlock \u0432 \u043A\u043E\u0440\u043E\u0442\u043A\u043E\u043C\u0443 \u043E\u043F\u0438\u0441\u0456",
    "enable_file_watcher": "\u0423\u0432\u0456\u043C\u043A\u043D\u0443\u0442\u0438 \u0441\u043F\u043E\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043D\u043D\u044F \u0437\u0430 \u0444\u0430\u0439\u043B\u0430\u043C\u0438",
    "enable_file_watcher_desc": "\u041F\u0440\u0438 \u0443\u0432\u0456\u043C\u043A\u043D\u0435\u043D\u043D\u0456 \u0432\u0438\u0433\u043B\u044F\u0434 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u043D\u043E \u043E\u043D\u043E\u0432\u043B\u044E\u0432\u0430\u0442\u0438\u043C\u0435\u0442\u044C\u0441\u044F \u043F\u0440\u0438 \u0437\u043C\u0456\u043D\u0456 \u0444\u0430\u0439\u043B\u0456\u0432. \u042F\u043A\u0449\u043E \u0432\u0438\u043C\u043A\u043D\u0435\u043D\u043E, \u043F\u043E\u0442\u0440\u0456\u0431\u043D\u043E \u0432\u0440\u0443\u0447\u043D\u0443 \u043D\u0430\u0442\u0438\u0441\u043A\u0430\u0442\u0438 \u043A\u043D\u043E\u043F\u043A\u0443 \u043E\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044F",
    "intercept_all_tag_clicks": "\u041F\u0435\u0440\u0435\u0445\u043E\u043F\u043B\u044E\u0432\u0430\u0442\u0438 \u0432\u0441\u0456 \u043A\u043B\u0456\u043A\u0438 \u0437\u0430 \u0442\u0435\u0433\u0430\u043C\u0438",
    "intercept_all_tag_clicks_desc": "\u041F\u0440\u0438 \u0432\u0432\u0456\u043C\u043A\u043D\u0435\u043D\u043D\u0456 \u0432\u0441\u0456 \u043A\u043B\u0456\u043A\u0438 \u0437\u0430 \u0442\u0435\u0433\u0430\u043C\u0438 \u0431\u0443\u0434\u0443\u0442\u044C \u043F\u0435\u0440\u0435\u0445\u043E\u043F\u043B\u044E\u0432\u0430\u0442\u0438\u0441\u044F \u0442\u0430 \u0432\u0456\u0434\u043A\u0440\u0438\u0432\u0430\u0442\u0438\u0441\u044F \u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456 \u0441\u0456\u0442\u043A\u0438",
    "intercept_breadcrumb_clicks": "\u041F\u0435\u0440\u0435\u0445\u043E\u043F\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u043B\u0456\u043A\u0438 \u0437\u0430 \u043D\u0430\u0432\u0456\u0433\u0430\u0446\u0456\u0439\u043D\u0438\u043C \u043B\u0430\u043D\u0446\u044E\u0436\u043A\u043E\u043C",
    "intercept_breadcrumb_clicks_desc": "\u041F\u0440\u0438 \u0432\u0432\u0456\u043C\u043A\u043D\u0435\u043D\u043D\u0456 \u043A\u043B\u0456\u043A\u0438 \u0437\u0430 \u043D\u0430\u0432\u0456\u0433\u0430\u0446\u0456\u0439\u043D\u0438\u043C \u043B\u0430\u043D\u0446\u044E\u0436\u043A\u043E\u043C \u0431\u0443\u0434\u0443\u0442\u044C \u043F\u0435\u0440\u0435\u0445\u043E\u043F\u043B\u044E\u0432\u0430\u0442\u0438\u0441\u044F, \u0456 \u0448\u043B\u044F\u0445 \u0431\u0443\u0434\u0435 \u0432\u0456\u0434\u043A\u0440\u0438\u0432\u0430\u0442\u0438\u0441\u044F \u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456 \u0441\u0456\u0442\u043A\u0438",
    "reset_to_default": "\u0421\u043A\u0438\u043D\u0443\u0442\u0438 \u0434\u043E \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u0438\u0445 \u0437\u043D\u0430\u0447\u0435\u043D\u044C",
    "settings_reset_notice": "\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u0441\u043A\u0438\u043D\u0443\u0442\u043E \u0434\u043E \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u0438\u0445 \u0437\u043D\u0430\u0447\u0435\u043D\u044C",
    "config_management": "\u041A\u043E\u043D\u0444\u0456\u0433\u0443\u0440\u0430\u0446\u0456\u044F \u0443\u043F\u0440\u0430\u0432\u043B\u0456\u043D\u043D\u044F",
    "config_management_desc": "\u0423\u043F\u0440\u0430\u0432\u043B\u0456\u043D\u043D\u044F \u043A\u043E\u043D\u0444\u0456\u0433\u0443\u0440\u0430\u0446\u0456\u0454\u044E (\u0441\u043A\u0438\u0434\u0430\u043D\u043D\u044F, \u0435\u043A\u0441\u043F\u043E\u0440\u0442, \u0456\u043C\u043F\u043E\u0440\u0442)",
    "ignored_folders_settings": "\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u0456\u0433\u043D\u043E\u0440\u043E\u0432\u0430\u043D\u0438\u0445 \u043F\u0430\u043F\u043E\u043A",
    "display_mode_settings": "\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u0440\u0435\u0436\u0438\u043C\u0443 \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F",
    "custom_mode_settings": "\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u0440\u0435\u0436\u0438\u043C\u0443 \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F",
    "add_custom_mode": "\u0414\u043E\u0434\u0430\u0442\u0438 \u0440\u0435\u0436\u0438\u043C \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F",
    "export": "\u0415\u043A\u0441\u043F\u043E\u0440\u0442",
    "import": "\u0406\u043C\u043F\u043E\u0440\u0442",
    "no_custom_modes_to_export": "\u041D\u0435\u043C\u0430\u0454 \u0440\u0435\u0436\u0438\u043C\u0456\u0432 \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F \u0434\u043B\u044F \u0435\u043A\u0441\u043F\u043E\u0440\u0442\u0443",
    "export_success_vault": "\u041A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0446\u044C\u043A\u0456 \u0440\u0435\u0436\u0438\u043C\u0438 \u0435\u043A\u0441\u043F\u043E\u0440\u0442\u043E\u0432\u0430\u043D\u043E \u0434\u043E {filename}",
    "export_error": "\u041F\u043E\u043C\u0438\u043B\u043A\u0430 \u0435\u043A\u0441\u043F\u043E\u0440\u0442\u0443",
    "import_success": "\u0406\u043C\u043F\u043E\u0440\u0442 \u0443\u0441\u043F\u0456\u0448\u043D\u0438\u0439",
    "import_error": "\u041F\u043E\u043C\u0438\u043B\u043A\u0430 \u0456\u043C\u043F\u043E\u0440\u0442\u0443: \u043D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u0438\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u0444\u0430\u0439\u043B\u0443",
    "edit_custom_mode": "\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0440\u0435\u0436\u0438\u043C \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F",
    "custom_mode": "\u0420\u0435\u0436\u0438\u043C \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F",
    "custom_mode_display_name": "\u0412\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0430\u0454\u0442\u044C\u0441\u044F \u0456\u043C`\u044F",
    "custom_mode_display_name_desc": "\u0412\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0430\u0454\u0442\u044C\u0441\u044F \u0456\u043C`\u044F \u0432 \u043C\u0435\u043D\u044E \u0440\u0435\u0436\u0438\u043C\u0456\u0432",
    "custom_mode_dataview_code": "\u041A\u043E\u0434 Dataview",
    "custom_mode_dataview_code_desc": "\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043A\u043E\u0434 Dataview \u0434\u043B\u044F \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043D\u044F \u0441\u043F\u0438\u0441\u043A\u0443 \u0444\u0430\u0439\u043B\u0456\u0432",
    "custom_mode_sub_options": "\u041F\u0456\u0434\u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u0438 \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0446\u044C\u043A\u043E\u0433\u043E \u0440\u0435\u0436\u0438\u043C\u0443",
    "custom_mode_fields_placeholder": "\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043D\u0430\u0437\u0432\u0438 \u043F\u043E\u043B\u0456\u0432 frontmatter \u0447\u0435\u0440\u0435\u0437 \u043A\u043E\u043C\u0443 (\u043D\u0430\u043F\u0440.: date,category,status) (\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E)",
    "dataview_plugin_not_enabled": "Dataview \u043F\u043B\u0430\u0433\u0456\u043D \u043D\u0435 \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0439",
    "show_bookmarks_mode": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u0440\u0435\u0436\u0438\u043C \u0437\u0430\u043A\u043B\u0430\u0434\u043E\u043A",
    "show_search_mode": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u0440\u0435\u0436\u0438\u043C \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u0456\u0432 \u043F\u043E\u0448\u0443\u043A\u0443",
    "show_backlinks_mode": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u0440\u0435\u0436\u0438\u043C \u0437\u0432\u043E\u0440\u043E\u0442\u043D\u0438\u0445 \u043F\u043E\u0441\u0438\u043B\u0430\u043D\u044C",
    "show_outgoinglinks_mode": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u0440\u0435\u0436\u0438\u043C \u0432\u0438\u0445\u0456\u0434\u043D\u0438\u0445 \u043F\u043E\u0441\u0438\u043B\u0430\u043D\u044C",
    "show_all_files_mode": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u0440\u0435\u0436\u0438\u043C \u0443\u0441\u0456\u0445 \u0444\u0430\u0439\u043B\u0456\u0432",
    "show_recent_files_mode": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u0440\u0435\u0436\u0438\u043C \u043E\u0441\u0442\u0430\u043D\u043D\u0456\u0445 \u0444\u0430\u0439\u043B\u0456\u0432",
    "recent_files_count": "\u041A\u0456\u043B\u044C\u043A\u0456\u0441\u0442\u044C \u043E\u0441\u0442\u0430\u043D\u043D\u0456\u0445 \u0444\u0430\u0439\u043B\u0456\u0432",
    "show_random_note_mode": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u0440\u0435\u0436\u0438\u043C \u0432\u0438\u043F\u0430\u0434\u043A\u043E\u0432\u043E\u0457 \u043D\u043E\u0442\u0430\u0442\u043A\u0438",
    "random_note_count": "\u041A\u0456\u043B\u044C\u043A\u0456\u0441\u0442\u044C \u0432\u0438\u043F\u0430\u0434\u043A\u043E\u0432\u0438\u0445 \u043D\u043E\u0442\u0430\u0442\u043E\u043A",
    "random_note_notes_only": "\u0422\u0456\u043B\u044C\u043A\u0438 \u043D\u043E\u0442\u0430\u0442\u043A\u0438",
    "random_note_include_media_files": "\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u0438 \u043C\u0435\u0434\u0456\u0430\u0444\u0430\u0439\u043B\u0438",
    "show_tasks_mode": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u0440\u0435\u0436\u0438\u043C \u0437\u0430\u0432\u0434\u0430\u043D\u044C",
    "task_filter": "\u0424\u0456\u043B\u044C\u0442\u0440 \u0437\u0430\u0432\u0434\u0430\u043D\u044C",
    "uncompleted": "\u041D\u0435\u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0456",
    "completed": "\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0456",
    "foldernote_display_settings": "\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F \u043D\u043E\u0442\u0430\u0442\u043E\u043A \u043F\u0430\u043F\u043A\u0438",
    "foldernote_display_settings_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F \u043D\u043E\u0442\u0430\u0442\u043E\u043A \u043F\u0430\u043F\u043A\u0438",
    "all": "\u0412\u0441\u0456",
    "default": "\u041F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",
    "hidden": "\u0421\u0445\u043E\u0432\u0430\u0442\u0438",
    // Hide header elements setting
    "hide_header_elements": "\u0421\u043A\u0440\u044B\u0442\u044C \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430",
    // Default open location setting
    "default_open_location": "\u041C\u0456\u0441\u0446\u0435 \u0432\u0456\u0434\u043A\u0440\u0438\u0442\u0442\u044F \u0437\u0430 \u0437\u0430\u043C\u043E\u0432\u0447\u0443\u0432\u0430\u043D\u043D\u044F\u043C",
    "default_open_location_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u043C\u0456\u0441\u0446\u0435 \u0432\u0456\u0434\u043A\u0440\u0438\u0442\u0442\u044F \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u0433\u043E \u0432\u0438\u0433\u043B\u044F\u0434\u0443 \u0437\u0430 \u0437\u0430\u043C\u043E\u0432\u0447\u0443\u0432\u0430\u043D\u043D\u044F\u043C",
    "open_in_left_sidebar": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u0432 \u043B\u0456\u0432\u0456\u0439 \u0431\u0456\u0447\u043D\u0456\u0439 \u043F\u0430\u043D\u0435\u043B\u0456",
    "open_in_right_sidebar": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u0432 \u043F\u0440\u0430\u0432\u0456\u0439 \u0431\u0456\u0447\u043D\u0456\u0439 \u043F\u0430\u043D\u0435\u043B\u0456",
    "open_in_new_tab": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u0432 \u043D\u043E\u0432\u0456\u0439 \u0432\u043A\u043B\u0430\u0434\u0446\u0456",
    "reuse_existing_leaf": "\u0412\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0432\u0430\u0442\u0438 \u043D\u0430\u044F\u0432\u043D\u0438\u0439 \u0432\u0438\u0433\u043B\u044F\u0434",
    "reuse_existing_leaf_desc": "\u041F\u0440\u0438 \u0432\u0456\u0434\u043A\u0440\u0438\u0442\u0442\u0456 \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u0433\u043E \u0432\u0438\u0433\u043B\u044F\u0434\u0443 \u043D\u0430\u0434\u0430\u0432\u0430\u0442\u0438 \u043F\u0435\u0440\u0435\u0432\u0430\u0433\u0443 \u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u0430\u043D\u043D\u044E \u043D\u0430\u044F\u0432\u043D\u043E\u0433\u043E \u0432\u0438\u0433\u043B\u044F\u0434\u0443 \u0437\u0430\u043C\u0456\u0441\u0442\u044C \u0441\u0442\u0432\u043E\u0440\u0435\u043D\u043D\u044F \u043D\u043E\u0432\u043E\u0433\u043E",
    "custom_document_extensions": "\u041A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0446\u044C\u043A\u0456 \u0440\u043E\u0437\u0448\u0438\u0440\u0435\u043D\u043D\u044F \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0456\u0432",
    "custom_document_extensions_desc": "\u0414\u043E\u0434\u0430\u0442\u043A\u043E\u0432\u0456 \u0440\u043E\u0437\u0448\u0438\u0440\u0435\u043D\u043D\u044F \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0456\u0432 (\u0447\u0435\u0440\u0435\u0437 \u043A\u043E\u043C\u0443, \u0431\u0435\u0437 \u043A\u0440\u0430\u043F\u043E\u043A)",
    "custom_document_extensions_placeholder": "\u043D\u0430\u043F\u0440\u0438\u043A\u043B\u0430\u0434, txt,doc,docx",
    "custom_folder_icon": "\u041A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0446\u044C\u043A\u0430 \u0456\u043A\u043E\u043D\u043A\u0430 \u043F\u0430\u043F\u043A\u0438",
    "custom_folder_icon_desc": "\u041A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0446\u044C\u043A\u0430 \u0456\u043A\u043E\u043D\u043A\u0430 \u043F\u0430\u043F\u043A\u0438 (\u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0439\u0442\u0435 Emoji)",
    // Select Folder Dialog
    "select_folders": "\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u043F\u0430\u043F\u043A\u0443",
    "select_folders_to_ignore": "\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u043F\u0430\u043F\u043A\u0438 \u0434\u043B\u044F \u0456\u0433\u043D\u043E\u0440\u0443\u0432\u0430\u043D\u043D\u044F",
    "explorer": "\u0411\u0440\u0430\u0443\u0437\u0435\u0440",
    "open_explorer": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u0431\u0440\u0430\u0443\u0437\u0435\u0440",
    "open_grid_view": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u0441\u0456\u0442\u043A\u043E\u0432\u0438\u0439 \u0432\u0438\u0433\u043B\u044F\u0434",
    "open_in_grid_view": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u0432 \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u043C\u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456",
    "show_note_in_grid_view": "\u0412\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u0438 \u043D\u043E\u0442\u0430\u0442\u043A\u0443 \u0432 \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u043C\u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456",
    "open_note_in_grid_view": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u043D\u043E\u0442\u0430\u0442\u043A\u0443 \u0432 \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u043C\u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456",
    "open_backlinks_in_grid_view": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u0437\u0432\u043E\u0440\u043E\u0442\u043D\u0456 \u043F\u043E\u0441\u0438\u043B\u0430\u043D\u043D\u044F \u0432 \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u043C\u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456",
    "open_outgoinglinks_in_grid_view": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u0432\u0438\u0445\u0456\u0434\u043D\u0456 \u043F\u043E\u0441\u0438\u043B\u0430\u043D\u043D\u044F \u0432 \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u043C\u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456",
    "open_recent_files_in_grid_view": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u043F\u043E\u0442\u043E\u0447\u043D\u0443 \u043D\u043E\u0442\u0430\u0442\u043A\u0443 \u0432 \u043E\u0441\u0442\u0430\u043D\u043D\u0456\u0445 \u0444\u0430\u0439\u043B\u0430\u0445",
    "open_settings": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u043D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F",
    "open_new_grid_view": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u043D\u043E\u0432\u0438\u0439 \u0441\u0456\u0442\u043A\u043E\u0432\u0438\u0439 \u0432\u0438\u0433\u043B\u044F\u0434",
    "open_in_new_grid_view": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u0432 \u043D\u043E\u0432\u043E\u043C\u0443 \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u043C\u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456",
    "min_mode": "\u041C\u0456\u043D\u0456\u043C\u0456\u0437\u0443\u0432\u0430\u0442\u0438 \u0432\u0438\u0433\u043B\u044F\u0434",
    "show_ignored_folders": "\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u0438 \u0456\u0433\u043D\u043E\u0440\u043E\u0432\u0430\u043D\u0456 \u043F\u0430\u043F\u043A\u0438",
    "delete_note": "\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0444\u0430\u0439\u043B",
    "open_folder_note": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u043D\u043E\u0442\u0430\u0442\u043A\u0443 \u043F\u0430\u043F\u043A\u0438",
    "create_folder_note": "\u0421\u0442\u0432\u043E\u0440\u0438\u0442\u0438 \u043D\u043E\u0442\u0430\u0442\u043A\u0443 \u043F\u0430\u043F\u043A\u0438",
    "delete_folder_note": "\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043D\u043E\u0442\u0430\u0442\u043A\u0443 \u043F\u0430\u043F\u043A\u0438",
    "edit_folder_note_settings": "\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u043D\u043E\u0442\u0430\u0442\u043A\u0438 \u043F\u0430\u043F\u043A\u0438",
    "ignore_folder": "\u0406\u0433\u043D\u043E\u0440\u0443\u0432\u0430\u0442\u0438 \u0446\u044E \u043F\u0430\u043F\u043A\u0443",
    "unignore_folder": "\u0412\u0456\u0434\u043C\u0456\u043D\u0438\u0442\u0438 \u0456\u0433\u043D\u043E\u0440\u0443\u0432\u0430\u043D\u043D\u044F \u0446\u0456\u0454\u0457 \u043F\u0430\u043F\u043A\u0438",
    "searching": "\u041F\u043E\u0448\u0443\u043A...",
    "no_files": "\u0424\u0430\u0439\u043B\u0438 \u043D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E",
    "filter_folders": "\u0424\u0456\u043B\u044C\u0442\u0440\u0443\u0432\u0430\u0442\u0438 \u043F\u0430\u043F\u043A\u0438...",
    "search_for": "\u041F\u043E\u0448\u0443\u043A",
    // Shortcut Selection Dialog
    "create_shortcut": "\u0421\u0442\u0432\u043E\u0440\u0438\u0442\u0438 \u044F\u0440\u043B\u0438\u043A",
    "select_folder": "\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u043F\u0430\u043F\u043A\u0443",
    "select_file": "\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u0444\u0430\u0439\u043B",
    "target_not_found": "\u0426\u0435\u043B\u044C \u043D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u0430",
    "shortcut_created": "\u042F\u0440\u043B\u0438\u043A \u0441\u0442\u0432\u043E\u0440\u0435\u043D\u0438\u0439",
    "failed_to_create_shortcut": "\u041D\u0435 \u0432\u0434\u0430\u043B\u043E\u0441\u044F \u0441\u0442\u0432\u043E\u0440\u0438\u0442\u0438 \u044F\u0440\u043B\u0438\u043A",
    // Folder Note Settings Dialog
    "folder_note_settings": "\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u043D\u043E\u0442\u0430\u0442\u043A\u0438 \u043F\u0430\u043F\u043A\u0438",
    "folder_sort_type": "\u0422\u0438\u043F \u0441\u043E\u0440\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u043F\u0430\u043F\u043A\u0438",
    "folder_sort_type_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u0442\u0438\u043F \u0441\u043E\u0440\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u0437\u0430 \u0437\u0430\u043C\u043E\u0432\u0447\u0443\u0432\u0430\u043D\u043D\u044F\u043C \u0434\u043B\u044F \u0446\u0456\u0454\u0457 \u043F\u0430\u043F\u043A\u0438",
    "folder_color": "\u041A\u043E\u043B\u0456\u0440 \u043F\u0430\u043F\u043A\u0438",
    "folder_color_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u043A\u043E\u043B\u0456\u0440 \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F \u0434\u043B\u044F \u0446\u0456\u0454\u0457 \u043F\u0430\u043F\u043A\u0438",
    "folder_icon": "\u0406\u043A\u043E\u043D\u043A\u0430 \u043F\u0430\u043F\u043A\u0438",
    "folder_icon_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u0456\u043A\u043E\u043D\u043A\u0443 \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F \u0434\u043B\u044F \u0446\u0456\u0454\u0457 \u043F\u0430\u043F\u043A\u0438",
    "no_color": "\u0411\u0435\u0437 \u043A\u043E\u043B\u044C\u043E\u0440\u0443",
    "color_red": "\u0427\u0435\u0440\u0432\u043E\u043D\u0438\u0439",
    "color_orange": "\u041F\u043E\u043C\u0430\u0440\u0430\u043D\u0447\u0435\u0432\u0438\u0439",
    "color_yellow": "\u0416\u043E\u0432\u0442\u0438\u0439",
    "color_green": "\u0417\u0435\u043B\u0435\u043D\u0438\u0439",
    "color_cyan": "\u0411\u0456\u0440\u044E\u0437\u043E\u0432\u0438\u0439",
    "color_blue": "\u0421\u0438\u043D\u0456\u0439",
    "color_purple": "\u0424\u0456\u043E\u043B\u0435\u0442\u043E\u0432\u0438\u0439",
    "color_pink": "\u0420\u043E\u0436\u0435\u0432\u0438\u0439",
    "color_custom": "\u041A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0446\u044C\u043A\u0438\u0439",
    "confirm": "\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438",
    "search_text": "\u041F\u043E\u0448\u0443\u043A\u043E\u0432\u0438\u0439 \u0442\u0435\u043A\u0441\u0442",
    "enter_search_text": "\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043F\u043E\u0448\u0443\u043A\u043E\u0432\u0438\u0439 \u0442\u0435\u043A\u0441\u0442",
    "enter_uri": "\u0412\u0432\u0435\u0434\u0456\u0442\u044C URI",
    "enter_uri_placeholder": "\u0412\u0432\u0435\u0434\u0456\u0442\u044C URL \u0430\u0431\u043E \u043F\u0440\u043E\u0442\u043E\u043A\u043E\u043B obsidian://",
    "note_attribute_settings": "\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0456\u0432 \u043D\u043E\u0442\u0430\u0442\u043A\u0438",
    "note_title": "\u041D\u0430\u0437\u0432\u0430 \u043D\u043E\u0442\u0430\u0442\u043A\u0438",
    "note_title_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u043D\u0430\u0437\u0432\u0443 \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F \u0434\u043B\u044F \u0446\u0456\u0454\u0457 \u043D\u043E\u0442\u0430\u0442\u043A\u0438",
    "note_summary": "\u041A\u0440\u0430\u0442\u043A\u0438\u0439 \u043E\u043F\u0438\u0441",
    "note_summary_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u043A\u0440\u0430\u0442\u043A\u0438\u0439 \u043E\u043F\u0438\u0441 \u0434\u043B\u044F \u0446\u0456\u0454\u0457 \u043D\u043E\u0442\u0430\u0442\u043A\u0438",
    "note_color": "\u041A\u043E\u043B\u0456\u0440 \u043D\u043E\u0442\u0430\u0442\u043A\u0438",
    "note_color_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u043A\u043E\u043B\u0456\u0440 \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F \u0434\u043B\u044F \u0446\u0456\u0454\u0457 \u043D\u043E\u0442\u0430\u0442\u043A\u0438",
    "custom_hex_color": "\u041A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0446\u044C\u043A\u0438\u0439 HEX \u043A\u043E\u043B\u0456\u0440",
    "custom_hex_color_desc": "\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0446\u044C\u043A\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F HEX \u043A\u043E\u043B\u044C\u043E\u0440\u0443 (\u043D\u0430\u043F\u0440\u0438\u043A\u043B\u0430\u0434, #FF8800 \u0430\u0431\u043E #F80)",
    "set_note_attribute": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0438 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0438 \u043D\u043E\u0442\u0430\u0442\u043A\u0438",
    "rename_folder": "\u041F\u0435\u0440\u0435\u0439\u043C\u0435\u043D\u0443\u0432\u0430\u0442\u0438 \u043F\u0430\u043F\u043A\u0443",
    "enter_new_folder_name": "\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043D\u043E\u0432\u0443 \u043D\u0430\u0437\u0432\u0443 \u043F\u0430\u043F\u043A\u0438",
    "search_selection_in_grid_view": "\u041F\u043E\u0448\u0443\u043A ... \u0443 \u0441\u0456\u0442\u043A\u043E\u0432\u043E\u043C\u0443 \u0432\u0438\u0433\u043B\u044F\u0434\u0456",
    "show_date_dividers": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u0440\u043E\u0437\u0434\u0456\u043B\u044C\u043D\u0438\u043A\u0438 \u0434\u0430\u0442",
    "show_date_dividers_desc": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u0440\u043E\u0437\u0434\u0456\u043B\u044C\u043D\u0438\u043A\u0438 \u0434\u0430\u0442 \u043F\u0435\u0440\u0435\u0434 \u043F\u0435\u0440\u0448\u0438\u043C \u0435\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u043C \u043A\u043E\u0436\u043D\u043E\u0433\u043E \u043D\u043E\u0432\u043E\u0433\u043E \u0434\u043D\u044F \u043F\u0440\u0438 \u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u0430\u043D\u043D\u0456 \u0441\u043E\u0440\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u0437\u0430 \u0434\u0430\u0442\u043E\u044E",
    "date_divider_format": "\u0424\u043E\u0440\u043C\u0430\u0442 \u0440\u043E\u0437\u0434\u0456\u043B\u044C\u043D\u0438\u043A\u0430 \u0434\u0430\u0442",
    "date_divider_mode": "\u0420\u043E\u0437\u0434\u0456\u043B\u044C\u043D\u0438\u043A \u0434\u0430\u0442",
    "date_divider_mode_desc": "\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F \u0440\u043E\u0437\u0434\u0456\u043B\u044C\u043D\u0438\u043A\u0456\u0432 \u0434\u0430\u0442",
    "date_divider_mode_none": "\u041D\u0435\u043C\u0430\u0454",
    "date_divider_mode_year": "\u0420\u0456\u043A",
    "date_divider_mode_month": "\u041C\u0456\u0441\u044F\u0446\u044C",
    "date_divider_mode_day": "\u0414\u0435\u043D\u044C",
    "pinned": "\u0417\u0430\u043A\u0440\u0456\u043F\u043B\u0435\u043D\u043E",
    "pinned_desc": "\u0417\u0430\u043A\u0440\u0456\u043F\u0438\u0442\u0438 \u0444\u0430\u0439\u043B \u0443\u0433\u043E\u0440\u0456",
    "foldernote_pinned": "\u0417\u0430\u043A\u0440\u0456\u043F\u0438\u0442\u0438 \u043D\u043E\u0442\u0430\u0442\u043A\u0438 \u043F\u0430\u043F\u043A\u0438",
    "foldernote_pinned_desc": "\u0417\u0430\u043A\u0440\u0456\u043F\u0438\u0442\u0438 \u043D\u043E\u0442\u0430\u0442\u043A\u0438 \u043F\u0430\u043F\u043A\u0438 \u0443\u0433\u043E\u0440\u0456",
    "display_minimized": "\u041C\u0456\u043D\u0456\u043C\u0456\u0437\u043E\u0432\u0430\u043D\u0438\u0439 \u0432\u0438\u0433\u043B\u044F\u0434",
    "display_minimized_desc": "\u041F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u0446\u044E \u043D\u043E\u0442\u0430\u0442\u043A\u0443 \u0443 \u043C\u0456\u043D\u0456\u043C\u0456\u0437\u043E\u0432\u0430\u043D\u043E\u043C\u0443 \u0440\u0435\u0436\u0438\u043C\u0456",
    // Quick Access Settings and Commands
    "quick_access_settings_title": "\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F \u0428\u0432\u0438\u0434\u043A\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0443",
    "quick_access_folder_name": "\u041F\u0430\u043F\u043A\u0430 \u0448\u0432\u0438\u0434\u043A\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0443",
    "quick_access_folder_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u043F\u0430\u043F\u043A\u0443, \u0449\u043E \u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0454\u0442\u044C\u0441\u044F \u043A\u043E\u043C\u0430\u043D\u0434\u043E\u044E \xAB\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u043F\u0430\u043F\u043A\u0443 \u0448\u0432\u0438\u0434\u043A\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0443\xBB",
    "quick_access_mode_name": "\u0420\u0435\u0436\u0438\u043C \u0448\u0432\u0438\u0434\u043A\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0443",
    "quick_access_mode_desc": "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u0437\u0430 \u0437\u0430\u043C\u043E\u0432\u0447\u0443\u0432\u0430\u043D\u043D\u044F\u043C, \u0449\u043E \u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0454\u0442\u044C\u0441\u044F \u043A\u043E\u043C\u0430\u043D\u0434\u043E\u044E \xAB\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u0448\u0432\u0438\u0434\u043A\u0438\u0439 \u0434\u043E\u0441\u0442\u0443\u043F \u0437\u0430 \u0440\u0435\u0436\u0438\u043C\u043E\u043C\xBB",
    "use_quick_access_as_new_tab_view": "\u0412\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0432\u0430\u0442\u0438 \u0428\u0432\u0438\u0434\u043A\u0438\u0439 \u0434\u043E\u0441\u0442\u0443\u043F \u044F\u043A \u043D\u043E\u0432\u0443 \u0432\u043A\u043B\u0430\u0434\u043A\u0443",
    "use_quick_access_as_new_tab_view_desc": "\u0417\u0430\u043C\u0456\u043D\u0456\u0442\u044C \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u0438\u0439 \u0432\u0438\u0434 \xAB\u041D\u043E\u0432\u0430 \u0432\u043A\u043B\u0430\u0434\u043A\u0430\xBB \u043D\u0430 \u0441\u0456\u0442\u043A\u043E\u0432\u0438\u0439 \u0432\u0438\u0434 \u043E\u0431\u0440\u0430\u043D\u043E\u0457 \u043E\u043F\u0446\u0456\u0457 \u0428\u0432\u0438\u0434\u043A\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0443 (\u043F\u0430\u043F\u043A\u0438 \u0430\u0431\u043E \u0440\u0435\u0436\u0438\u043C\u0443). \u041F\u0440\u0430\u0446\u044E\u0454, \u043B\u0438\u0448\u0435 \u044F\u043A\u0449\u043E \xAB\u041C\u0456\u0441\u0446\u0435 \u0432\u0456\u0434\u043A\u0440\u0438\u0442\u0442\u044F \u0437\u0430 \u0437\u0430\u043C\u043E\u0432\u0447\u0443\u0432\u0430\u043D\u043D\u044F\u043C\xBB \u0432\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E \u043D\u0430 \xAB\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u0432 \u043D\u043E\u0432\u0456\u0439 \u0432\u043A\u043B\u0430\u0434\u0446\u0456\xBB!",
    "default_new_tab": "\u0417\u0430 \u0437\u0430\u043C\u043E\u0432\u0447\u0443\u0432\u0430\u043D\u043D\u044F\u043C",
    "use_quick_access_folder": "\u0412\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0432\u0430\u0442\u0438 \u043F\u0430\u043F\u043A\u0443 \u0448\u0432\u0438\u0434\u043A\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0443",
    "use_quick_access_mode": "\u0412\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0432\u0430\u0442\u0438 \u0440\u0435\u0436\u0438\u043C \u0448\u0432\u0438\u0434\u043A\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0443",
    "open_quick_access_folder": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u043F\u0430\u043F\u043A\u0443 \u0448\u0432\u0438\u0434\u043A\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0443",
    "open_quick_access_mode": "\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u0448\u0432\u0438\u0434\u043A\u0438\u0439 \u0434\u043E\u0441\u0442\u0443\u043F \u0437\u0430 \u0440\u0435\u0436\u0438\u043C\u043E\u043C",
    // Explorer Stash
    "stash": "\u0422\u0438\u043C\u0447\u0430\u0441\u043E\u0432\u0435 \u0441\u0445\u043E\u0432\u0438\u0449\u0435",
    "drop_files_here": "\u041F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0456\u0442\u044C \u0444\u0430\u0439\u043B\u0438 \u0441\u044E\u0434\u0438 \u0434\u043B\u044F \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043D\u043D\u044F",
    "clear": "\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u0438",
    "save_stash_as_markdown": "\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0441\u0445\u043E\u0432\u0438\u0449\u0435 \u044F\u043A Markdown",
    "add_to_stash": "\u0414\u043E\u0434\u0430\u0442\u0438 \u0434\u043E \u0441\u0445\u043E\u0432\u0438\u0449\u0430",
    "added_to_stash": "\u0414\u043E\u0434\u0430\u043D\u043E \u0434\u043E \u0441\u0445\u043E\u0432\u0438\u0449\u0430"
  }
};

// src/utils/fileUtils.ts
var IMAGE_EXTENSIONS = /* @__PURE__ */ new Set(["jpg", "jpeg", "png", "gif", "webp", "avif", "bmp", "svg"]);
var VIDEO_EXTENSIONS = /* @__PURE__ */ new Set(["mp4", "webm", "mov", "avi", "mkv", "ogv"]);
var AUDIO_EXTENSIONS = /* @__PURE__ */ new Set(["flac", "m4a", "mp3", "ogg", "wav", "3gp"]);
var DOCUMENT_EXTENSIONS = /* @__PURE__ */ new Set(["md", "pdf", "canvas", "base"]);
var customDocumentExtensions = [];
function updateCustomDocumentExtensions(settings) {
  if (settings.customDocumentExtensions) {
    customDocumentExtensions = settings.customDocumentExtensions.split(",").map((ext) => ext.trim().toLowerCase()).filter((ext) => ext.length > 0);
  } else {
    customDocumentExtensions = [];
  }
}
function isDocumentFile(file) {
  const extension = file.extension.toLowerCase();
  return DOCUMENT_EXTENSIONS.has(extension) || customDocumentExtensions.includes(extension);
}
function isImageFile(file) {
  return IMAGE_EXTENSIONS.has(file.extension.toLowerCase());
}
function isVideoFile(file) {
  return VIDEO_EXTENSIONS.has(file.extension.toLowerCase());
}
function isAudioFile(file) {
  return AUDIO_EXTENSIONS.has(file.extension.toLowerCase());
}
function isMediaFile(file) {
  return isImageFile(file) || isVideoFile(file) || isAudioFile(file);
}
function sortFiles(files, gridView, overrideSortType) {
  const app = gridView.app;
  const settings = gridView.plugin.settings;
  const sortType = overrideSortType != null ? overrideSortType : gridView.sortType;
  const isNonDateSort = ["name-asc", "name-desc", "random"].includes(sortType);
  const hasModifiedField = !!settings.modifiedDateField;
  const hasCreatedField = !!settings.createdDateField;
  const hasAnyDateField = hasModifiedField || hasCreatedField;
  const shouldUseSimpleSort = isNonDateSort || !hasAnyDateField;
  if (shouldUseSimpleSort) {
    if (sortType === "name-asc") {
      return files.sort((a, b) => a.basename.localeCompare(b.basename, void 0, { numeric: true, sensitivity: "base" }));
    } else if (sortType === "name-desc") {
      return files.sort((a, b) => b.basename.localeCompare(a.basename, void 0, { numeric: true, sensitivity: "base" }));
    } else if (sortType === "mtime-desc") {
      return files.sort((a, b) => b.stat.mtime - a.stat.mtime);
    } else if (sortType === "mtime-asc") {
      return files.sort((a, b) => a.stat.mtime - b.stat.mtime);
    } else if (sortType === "ctime-desc") {
      return files.sort((a, b) => b.stat.ctime - a.stat.ctime);
    } else if (sortType === "ctime-asc") {
      return files.sort((a, b) => a.stat.ctime - b.stat.ctime);
    } else if (sortType === "random") {
      return files.sort(() => Math.random() - 0.5);
    } else {
      return files;
    }
  }
  const filesWithDates = files.map((file) => {
    const shouldReadMetadata = file.extension === "md";
    const metadata = shouldReadMetadata ? app.metadataCache.getFileCache(file) : null;
    return {
      file,
      mDate: (() => {
        if (metadata == null ? void 0 : metadata.frontmatter) {
          const fieldNames = settings.modifiedDateField ? settings.modifiedDateField.split(",").map((f) => f.trim()).filter(Boolean) : [];
          for (const fieldName of fieldNames) {
            const dateStr = metadata.frontmatter[fieldName];
            if (dateStr) {
              const date = new Date(dateStr);
              if (!isNaN(date.getTime())) {
                return date.getTime();
              }
            }
          }
        }
        return file.stat.mtime;
      })(),
      cDate: (() => {
        if (metadata == null ? void 0 : metadata.frontmatter) {
          const fieldNames = settings.createdDateField ? settings.createdDateField.split(",").map((f) => f.trim()).filter(Boolean) : [];
          for (const fieldName of fieldNames) {
            const dateStr = metadata.frontmatter[fieldName];
            if (dateStr) {
              const date = new Date(dateStr);
              if (!isNaN(date.getTime())) {
                return date.getTime();
              }
            }
          }
        }
        return file.stat.ctime;
      })()
    };
  });
  if (sortType === "mtime-desc") {
    return filesWithDates.sort((a, b) => b.mDate - a.mDate).map((item) => item.file);
  } else if (sortType === "mtime-asc") {
    return filesWithDates.sort((a, b) => a.mDate - b.mDate).map((item) => item.file);
  } else if (sortType === "ctime-desc") {
    return filesWithDates.sort((a, b) => b.cDate - a.cDate).map((item) => item.file);
  } else if (sortType === "ctime-asc") {
    return filesWithDates.sort((a, b) => a.cDate - b.cDate).map((item) => item.file);
  } else {
    return files;
  }
}
function isFolderIgnored(folder, ignoredFolders, ignoredFolderPatterns, showIgnoredFolders) {
  if (showIgnoredFolders)
    return false;
  const isInIgnoredFolders = ignoredFolders.some(
    (ignored) => folder.path === ignored || folder.path.startsWith(ignored + "/")
  );
  if (isInIgnoredFolders)
    return true;
  if (ignoredFolderPatterns && ignoredFolderPatterns.length > 0) {
    const matchesIgnoredPattern = ignoredFolderPatterns.some((pattern) => {
      try {
        if (/[\^\$\*\+\?\(\)\[\]\{\}\|\\]/.test(pattern)) {
          const regex = new RegExp(pattern);
          return regex.test(folder.path);
        } else {
          return folder.name.toLowerCase().includes(pattern.toLowerCase());
        }
      } catch (error) {
        return folder.name.toLowerCase().includes(pattern.toLowerCase());
      }
    });
    if (matchesIgnoredPattern)
      return true;
  }
  return false;
}
function ignoredFiles(files, gridView) {
  const settings = gridView.plugin.settings;
  if (gridView.showIgnoredFolders) {
    return files;
  }
  const folderCache = {};
  return files.filter((file) => {
    var _a;
    const folderPath = ((_a = file.parent) == null ? void 0 : _a.path) || "/";
    if (folderCache[folderPath] === void 0) {
      const folder = gridView.app.vault.getAbstractFileByPath(folderPath);
      if (folder instanceof import_obsidian.TFolder) {
        folderCache[folderPath] = isFolderIgnored(
          folder,
          settings.ignoredFolders,
          settings.ignoredFolderPatterns,
          false
          // 這裡傳入 false 因為已經在前面檢查過 showIgnoredFolders
        );
      } else {
        folderCache[folderPath] = false;
      }
    }
    return !folderCache[folderPath];
  });
}
async function getFiles(gridView, includeMediaFiles) {
  var _a, _b, _c, _d;
  const app = gridView.app;
  const settings = gridView.plugin.settings;
  const sourceMode = gridView.sourceMode;
  const sourcePath = gridView.sourcePath;
  if (sourceMode === "folder" && sourcePath) {
    const folder = app.vault.getAbstractFileByPath(sourcePath);
    if (folder instanceof import_obsidian.TFolder) {
      const files = folder.children.filter((file) => {
        if (!(file instanceof import_obsidian.TFile))
          return false;
        const allowMedia = settings.showMediaFiles && (!gridView.searchQuery || includeMediaFiles);
        if (isDocumentFile(file) || allowMedia && isMediaFile(file)) {
          return true;
        }
        return false;
      });
      return sortFiles(files, gridView);
    }
    return [];
  } else if (sourceMode === "search") {
    const globalSearchPlugin = app.internalPlugins.getPluginById("global-search");
    if (globalSearchPlugin == null ? void 0 : globalSearchPlugin.instance) {
      const searchLeaf = app.workspace.getLeavesOfType("search")[0];
      if (searchLeaf && searchLeaf.view && searchLeaf.view.dom) {
        const resultDomLookup = searchLeaf.view.dom.resultDomLookup;
        if (resultDomLookup) {
          const files = Array.from(resultDomLookup.keys()).filter((file) => file instanceof import_obsidian.TFile);
          return sortFiles(files, gridView);
        }
      }
    }
    return [];
  } else if (sourceMode === "backlinks") {
    const activeFile = app.workspace.getActiveFile();
    if (!activeFile) {
      return [];
    }
    const backlinks = /* @__PURE__ */ new Set();
    const resolvedLinks = app.metadataCache.resolvedLinks;
    for (const [sourcePath2, links] of Object.entries(resolvedLinks)) {
      if (Object.keys(links).includes(activeFile.path)) {
        const sourceFile = app.vault.getAbstractFileByPath(sourcePath2);
        if (sourceFile) {
          backlinks.add(sourceFile);
        }
      }
    }
    return sortFiles(Array.from(backlinks), gridView);
  } else if (sourceMode === "outgoinglinks") {
    const activeFile = app.workspace.getActiveFile();
    if (!activeFile) {
      return [];
    }
    const outgoingLinks = /* @__PURE__ */ new Set();
    const resolvedLinks = app.metadataCache.resolvedLinks;
    const fileLinks = resolvedLinks[activeFile.path];
    if (fileLinks) {
      for (const targetPath of Object.keys(fileLinks)) {
        const targetFile = app.vault.getAbstractFileByPath(targetPath);
        if (targetFile && (isDocumentFile(targetFile) || settings.showMediaFiles && isMediaFile(targetFile))) {
          outgoingLinks.add(targetFile);
        }
      }
    }
    if (settings.showMediaFiles) {
      try {
        const content = await app.vault.cachedRead(activeFile);
        const frontMatterInfo = (0, import_obsidian.getFrontMatterInfo)(content);
        const contentWithoutFrontmatter = content.substring(frontMatterInfo.contentStart);
        const mediaMatches = Array.from(contentWithoutFrontmatter.matchAll(/(?:!\[\[(.*?)(?:\|.*?)?\]\]|!\[(.*?)\]\((.*?)\))/g));
        for (const match of mediaMatches) {
          let mediaPath = match[1] || match[3];
          if (mediaPath) {
            mediaPath = mediaPath.split("|")[0].trim();
            const mediaFile = app.metadataCache.getFirstLinkpathDest(mediaPath, activeFile.path);
            if (mediaFile && isMediaFile(mediaFile)) {
              outgoingLinks.add(mediaFile);
            }
          }
        }
      } catch (e) {
      }
    }
    return sortFiles(Array.from(outgoingLinks), gridView);
  } else if (sourceMode === "bookmarks") {
    const bookmarksPlugin = app.internalPlugins.plugins.bookmarks;
    if (!(bookmarksPlugin == null ? void 0 : bookmarksPlugin.enabled)) {
      return [];
    }
    const bookmarks = bookmarksPlugin.instance.items;
    const bookmarkedFiles = /* @__PURE__ */ new Set();
    const processBookmarkItem = (item) => {
      if (item.type === "file") {
        const file = app.vault.getAbstractFileByPath(item.path);
        if (file instanceof import_obsidian.TFile) {
          if (isDocumentFile(file) || settings.showMediaFiles && isMediaFile(file)) {
            bookmarkedFiles.add(file);
          }
        }
      } else if (item.type === "group" && item.items) {
        item.items.forEach(processBookmarkItem);
      }
    };
    bookmarks.forEach(processBookmarkItem);
    return Array.from(bookmarkedFiles);
  } else if (sourceMode === "tasks") {
    const filesWithTasks = /* @__PURE__ */ new Set();
    const dv = (_a = this.app.plugins.plugins.dataview) == null ? void 0 : _a.api;
    const tasksPlugin = app.plugins.plugins["obsidian-tasks-plugin"];
    if (tasksPlugin) {
      try {
        const allTasks = tasksPlugin.getTasks ? tasksPlugin.getTasks() : [];
        for (const task of allTasks) {
          const file = app.vault.getAbstractFileByPath(task.path);
          if (!(file instanceof import_obsidian.TFile))
            continue;
          if (gridView.taskFilter === "uncompleted" && !task.isDone) {
            filesWithTasks.add(file);
          } else if (gridView.taskFilter === "completed" && task.isDone) {
            filesWithTasks.add(file);
          } else if (gridView.taskFilter === "all") {
            filesWithTasks.add(file);
          }
        }
      } catch (error) {
        console.error("Error getting tasks from Tasks plugin:", error);
        return [];
      }
    } else if (dv) {
      try {
        const tasks = dv.pages().file.tasks;
        let filteredTasks;
        if (gridView.taskFilter === "uncompleted") {
          filteredTasks = tasks.where((t2) => !t2.completed);
        } else if (gridView.taskFilter === "completed") {
          filteredTasks = tasks.where((t2) => t2.completed);
        } else {
          filteredTasks = tasks;
        }
        for (const task of filteredTasks.array()) {
          const file = app.vault.getAbstractFileByPath(task.path);
          if (file instanceof import_obsidian.TFile) {
            filesWithTasks.add(file);
          }
        }
      } catch (error) {
        console.error("Error getting tasks from Dataview:", error);
        return [];
      }
    } else {
      const markdownFiles = app.vault.getMarkdownFiles();
      for (const file of markdownFiles) {
        try {
          const content = await app.vault.cachedRead(file);
          let shouldAdd = false;
          if (gridView.taskFilter === "uncompleted") {
            shouldAdd = /^[\s]*[-*]\s*\[\s*\](?![^\[]*\[\s*[^\s\]]+\]).*$/m.test(content);
          } else if (gridView.taskFilter === "completed") {
            const hasCompleted = /^[\s]*[-*]\s*\[x\](?![^\[]*\[\s*[^\s\]]+\]).*$/m.test(content);
            const hasIncomplete = /^[\s]*[-*]\s*\[\s*\](?![^\[]*\[\s*[^\s\]]+\]).*$/m.test(content);
            shouldAdd = hasCompleted && !hasIncomplete;
          } else if (gridView.taskFilter === "all") {
            const hasIncomplete = /^[\s]*[-*]\s*\[\s*\](?![^\[]*\[\s*[^\s\]]+\]).*$/m.test(content);
            const hasCompleted = /^[\s]*[-*]\s*\[x\](?![^\[]*\[\s*[^\s\]]+\]).*$/m.test(content);
            shouldAdd = hasIncomplete || hasCompleted;
          }
          if (shouldAdd) {
            filesWithTasks.add(file);
          }
        } catch (error) {
          console.error(`Error reading file ${file.path}:`, error);
          return [];
        }
      }
    }
    return sortFiles(Array.from(filesWithTasks), gridView);
  } else if (sourceMode === "all-files") {
    const allVaultFiles = app.vault.getFiles().filter((file) => {
      if (isDocumentFile(file) || settings.showMediaFiles && includeMediaFiles && isMediaFile(file)) {
        return true;
      }
      return false;
    });
    return sortFiles(allVaultFiles, gridView);
  } else if (sourceMode === "recent-files") {
    const recentFiles = app.vault.getFiles().filter((file) => {
      if (isDocumentFile(file) || settings.showMediaFiles && includeMediaFiles && isMediaFile(file)) {
        return true;
      }
      return false;
    });
    return sortFiles(recentFiles, gridView, "mtime-desc");
  } else if (sourceMode === "random-note") {
    const randomFiles = app.vault.getFiles().filter((file) => {
      if (isDocumentFile(file) || settings.showMediaFiles && includeMediaFiles && isMediaFile(file)) {
        return true;
      }
      return false;
    }).sort(() => Math.random() - 0.5);
    return randomFiles;
  } else if (sourceMode.startsWith("custom-")) {
    const dvApi = (_b = app.plugins.plugins.dataview) == null ? void 0 : _b.api;
    if (!dvApi) {
      new import_obsidian.Notice(t("Dataview plugin is not enabled."));
      return [];
    }
    const mode = settings.customModes.find((m) => m.internalName === sourceMode);
    if (!mode) {
      return [];
    }
    let dvCode = mode == null ? void 0 : mode.dataviewCode;
    if (mode && mode.options && mode.options.length > 0) {
      const idx = (_c = gridView.customOptionIndex) != null ? _c : -1;
      if (idx >= 0 && idx < mode.options.length) {
        dvCode = mode.options[idx].dataviewCode;
      }
    }
    try {
      const activeFile = app.workspace.getActiveFile();
      if (activeFile) {
        dvApi.current = () => dvApi.page(activeFile.path);
      }
      const func = new Function("app", "dv", dvCode);
      const dvPagesResult = func(app, dvApi);
      const dvPages = Array.isArray(dvPagesResult) ? dvPagesResult : Array.from(dvPagesResult || []);
      if (!dvPages || dvPages.length === 0) {
        return [];
      }
      const files = /* @__PURE__ */ new Set();
      for (const page of dvPages) {
        if ((_d = page == null ? void 0 : page.file) == null ? void 0 : _d.path) {
          const file = app.vault.getAbstractFileByPath(page.file.path);
          if (file instanceof import_obsidian.TFile) {
            files.add(file);
          }
        }
      }
      return sortFiles(Array.from(files), gridView);
    } catch (error) {
      console.error("Grid Explorer: Error executing Dataview query.", error);
      return [];
    }
  } else {
    return [];
  }
}

// src/utils/dragUtils.ts
function parseObsidianOpenUris(input) {
  const results = [];
  if (!input)
    return results;
  const chunks = input.split(/\r?\n/).filter(Boolean);
  const toScan = chunks.length ? chunks : [input];
  for (const part of toScan) {
    const re = /obsidian:\/\/open\?([\s\S]*?)(?=obsidian:\/\/open\?|$)/g;
    let m;
    while ((m = re.exec(part)) !== null) {
      const q = m[1];
      try {
        const usp = new URLSearchParams(q);
        const vault = usp.get("vault") || void 0;
        const file = usp.get("file") ? decodeURIComponent(usp.get("file")) : void 0;
        results.push({ vault, file });
      } catch (e) {
      }
    }
  }
  return results;
}
async function extractObsidianPathsFromDT(dt) {
  var _a, _b, _c;
  if (!dt)
    return [];
  const texts = [];
  try {
    const uriList = dt.getData("text/uri-list");
    if (uriList)
      texts.push(uriList);
  } catch (e) {
  }
  const vaultName = (_c = (_b = (_a = window.app) == null ? void 0 : _a.vault) == null ? void 0 : _b.getName) == null ? void 0 : _c.call(_b);
  const paths = [];
  for (const t2 of texts) {
    const entries = parseObsidianOpenUris(t2);
    for (const e of entries) {
      if (!e.file)
        continue;
      if (e.vault && vaultName && e.vault !== vaultName)
        continue;
      paths.push(e.file);
    }
  }
  return Array.from(new Set(paths));
}

// src/utils/createItemUtils.ts
var import_obsidian3 = require("obsidian");

// src/modal/folderRenameModal.ts
var import_obsidian2 = require("obsidian");
function showFolderRenameModal(app, plugin, folder, gridView) {
  new FolderRenameModal(app, plugin, folder, gridView).open();
}
var NameInputModal = class extends import_obsidian2.Modal {
  constructor(app, options) {
    var _a, _b, _c;
    super(app);
    this.titleText = options.title;
    this.descText = options.description;
    this.confirmText = (_a = options.confirmText) != null ? _a : t("confirm");
    this.cancelText = (_b = options.cancelText) != null ? _b : t("cancel");
    this.value = (_c = options.defaultValue) != null ? _c : "";
    this.onSubmit = options.onSubmit;
  }
  onOpen() {
    var _a;
    const { contentEl } = this;
    contentEl.empty();
    new import_obsidian2.Setting(contentEl).setName(this.titleText).setDesc((_a = this.descText) != null ? _a : "").addText((text) => {
      text.setValue(this.value).onChange((value) => {
        this.value = value;
      });
      window.setTimeout(() => {
        text.inputEl.focus();
        text.inputEl.select();
      });
      text.inputEl.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          this.value = text.getValue();
          this.onSubmit(this.value.trim());
          this.close();
        }
      });
    });
    new import_obsidian2.Setting(contentEl).addButton((button) => {
      button.setButtonText(this.confirmText).setCta().onClick(() => {
        this.onSubmit(this.value.trim());
        this.close();
      });
    }).addButton((button) => {
      button.setButtonText(this.cancelText).onClick(() => {
        this.close();
      });
    });
  }
};
function showNameInputModal(app, options) {
  new NameInputModal(app, options).open();
}
var FolderRenameModal = class extends import_obsidian2.Modal {
  constructor(app, plugin, folder, gridView) {
    super(app);
    this.plugin = plugin;
    this.folder = folder;
    this.gridView = gridView;
    this.newName = folder.name;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    new import_obsidian2.Setting(contentEl).setName(t("rename_folder")).setDesc(t("enter_new_folder_name")).addText((text) => {
      text.setValue(this.folder.name).onChange((value) => {
        this.newName = value;
      });
      window.setTimeout(() => {
        text.inputEl.focus();
        text.inputEl.select();
      });
      text.inputEl.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          this.newName = text.getValue();
          this.renameFolder();
          this.close();
        }
      });
    });
    new import_obsidian2.Setting(contentEl).addButton((button) => {
      button.setButtonText(t("confirm")).setCta().onClick(() => {
        this.renameFolder();
        this.close();
      });
    }).addButton((button) => {
      button.setButtonText(t("cancel")).onClick(() => {
        this.close();
      });
    });
  }
  async renameFolder() {
    try {
      const parentPath = this.folder.parent ? this.folder.parent.path : "";
      const newPath = (0, import_obsidian2.normalizePath)(parentPath ? `${parentPath}/${this.newName}` : this.newName);
      await this.app.fileManager.renameFile(this.folder, newPath);
      setTimeout(() => {
        if (this.plugin.settings.folderDisplayStyle !== "show") {
          this.gridView.setSource("folder", newPath || "/");
        } else {
          this.gridView.render();
        }
      }, 100);
    } catch (error) {
      new import_obsidian2.Notice("Failed to rename folder");
      console.error("Failed to rename folder", error);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/utils/createItemUtils.ts
async function createNewNote(app, folderPath) {
  let newFileName = `${t("untitled")}.md`;
  let newFilePath = !folderPath || folderPath === "/" ? newFileName : `${folderPath}/${newFileName}`;
  let counter = 1;
  while (app.vault.getAbstractFileByPath(newFilePath)) {
    newFileName = `${t("untitled")} ${counter}.md`;
    newFilePath = !folderPath || folderPath === "/" ? newFileName : `${folderPath}/${newFileName}`;
    counter++;
  }
  try {
    const newFile = await app.vault.create(newFilePath, "");
    await app.workspace.getLeaf().openFile(newFile);
  } catch (error) {
    console.error("An error occurred while creating a new note:", error);
  }
}
async function createNewFolder(app, folderPath, onSuccess) {
  const defaultName = `${t("untitled")}`;
  showNameInputModal(app, {
    title: t("new_folder"),
    description: t("enter_new_folder_name"),
    defaultValue: defaultName,
    onSubmit: async (inputName) => {
      let baseName = inputName && inputName.trim().length > 0 ? inputName.trim() : defaultName;
      let newFolderName = baseName;
      let newFolderPath = !folderPath || folderPath === "/" ? newFolderName : `${folderPath}/${newFolderName}`;
      let counter = 1;
      while (app.vault.getAbstractFileByPath(newFolderPath)) {
        newFolderName = `${baseName} ${counter}`;
        newFolderPath = !folderPath || folderPath === "/" ? newFolderName : `${folderPath}/${newFolderName}`;
        counter++;
      }
      try {
        await app.vault.createFolder(newFolderPath);
        if (onSuccess) {
          onSuccess();
        }
      } catch (error) {
        console.error("An error occurred while creating a new folder:", error);
      }
    }
  });
}
async function createNewCanvas(app, folderPath) {
  let newFileName = `${t("untitled")}.canvas`;
  let newFilePath = !folderPath || folderPath === "/" ? newFileName : `${folderPath}/${newFileName}`;
  let counter = 1;
  while (app.vault.getAbstractFileByPath(newFilePath)) {
    newFileName = `${t("untitled")} ${counter}.canvas`;
    newFilePath = !folderPath || folderPath === "/" ? newFileName : `${folderPath}/${newFileName}`;
    counter++;
  }
  try {
    const newFile = await app.vault.create(newFilePath, "");
    await app.workspace.getLeaf().openFile(newFile);
  } catch (error) {
    console.error("An error occurred while creating a new canvas:", error);
  }
}
async function createNewBase(app, folderPath) {
  let newFileName = `${t("untitled")}.base`;
  let newFilePath = !folderPath || folderPath === "/" ? newFileName : `${folderPath}/${newFileName}`;
  let counter = 1;
  while (app.vault.getAbstractFileByPath(newFilePath)) {
    newFileName = `${t("untitled")} ${counter}.base`;
    newFilePath = !folderPath || folderPath === "/" ? newFileName : `${folderPath}/${newFileName}`;
    counter++;
  }
  try {
    const newFile = await app.vault.create(newFilePath, "");
    await app.workspace.getLeaf().openFile(newFile);
  } catch (error) {
    console.error("An error occurred while creating a new base:", error);
  }
}
async function createShortcut(app, folderPath, option) {
  try {
    let counter = 0;
    let shortcutName;
    if (option.type === "uri") {
      shortcutName = generateFilenameFromUri(option.value);
    } else {
      shortcutName = `${option.display}`;
    }
    let newName = `${shortcutName}.md`;
    let newPath = !folderPath || folderPath === "/" ? newName : `${folderPath}/${newName}`;
    while (app.vault.getAbstractFileByPath(newPath)) {
      counter++;
      const baseName = option.type === "uri" ? generateFilenameFromUri(option.value) : option.display;
      shortcutName = `${baseName} ${counter}`;
      newName = `${shortcutName}.md`;
      newPath = !folderPath || folderPath === "/" ? newName : `${folderPath}/${newName}`;
    }
    const newFile = await app.vault.create(newPath, "");
    await app.fileManager.processFrontMatter(newFile, (frontmatter) => {
      if (option.type === "mode") {
        frontmatter.type = "mode";
        frontmatter.redirect = option.value;
      } else if (option.type === "folder") {
        frontmatter.type = "folder";
        frontmatter.redirect = option.value;
      } else if (option.type === "file") {
        const link = app.fileManager.generateMarkdownLink(
          app.vault.getAbstractFileByPath(option.value),
          ""
        );
        frontmatter.type = "file";
        frontmatter.redirect = link;
      } else if (option.type === "search") {
        frontmatter.type = "search";
        frontmatter.redirect = option.value;
        if (option.searchOptions) {
          frontmatter.searchCurrentLocationOnly = option.searchOptions.searchCurrentLocationOnly;
          frontmatter.searchFilesNameOnly = option.searchOptions.searchFilesNameOnly;
          frontmatter.searchMediaFiles = option.searchOptions.searchMediaFiles;
        }
      } else if (option.type === "uri") {
        frontmatter.type = "uri";
        frontmatter.redirect = option.value;
      }
    });
    new import_obsidian3.Notice(`${t("shortcut_created")}: ${shortcutName}`);
  } catch (error) {
    console.error("Create shortcut error", error);
    new import_obsidian3.Notice(t("failed_to_create_shortcut"));
  }
}
function generateFilenameFromUri(uri) {
  try {
    if (uri.startsWith("obsidian://")) {
      const match = uri.match(/obsidian:\/\/([^?]+)/);
      let vaultName = "";
      const vaultMatch = uri.match(/[?&]vault=([^&]+)/);
      if (vaultMatch) {
        vaultName = decodeURIComponent(vaultMatch[1]);
        vaultName = vaultName.replace(/[<>:"/\\|?*]/g, "_");
      }
      if (match) {
        const action = match[1];
        const vaultSuffix = vaultName ? ` (${vaultName})` : "";
        switch (action) {
          case "open":
            return `\u{1F310} Obsidian Open${vaultSuffix}`;
          case "new":
            return `\u{1F310} Obsidian New${vaultSuffix}`;
          case "search":
            return `\u{1F310} Obsidian Search${vaultSuffix}`;
          case "hook-get-address":
            return `\u{1F310} Obsidian Hook${vaultSuffix}`;
          default:
            return `\u{1F310} Obsidian ${action}${vaultSuffix}`;
        }
      }
      return vaultName ? `\u{1F310} Obsidian Link (${vaultName})` : "\u{1F310} Obsidian Link";
    }
    if (uri.startsWith("file://")) {
      const filename = uri.split("/").pop() || "Local File";
      return `\u{1F310} ${filename}`;
    }
    if (uri.startsWith("http://") || uri.startsWith("https://")) {
      const url = new URL(uri);
      let domain = url.hostname;
      if (domain.startsWith("www.")) {
        domain = domain.substring(4);
      }
      if (url.pathname && url.pathname !== "/") {
        const pathParts = url.pathname.split("/").filter((part) => part.length > 0);
        if (pathParts.length > 0) {
          const lastPart = pathParts[pathParts.length - 1];
          if (lastPart.length < 50 && !lastPart.includes("?")) {
            return `\u{1F310} ${domain} - ${lastPart}`;
          }
        }
      }
      return `\u{1F310} ${domain}`;
    }
    const protocolMatch = uri.match(/^([^:]+):/);
    if (protocolMatch) {
      const protocol = protocolMatch[1].toUpperCase();
      return `\u{1F310} ${protocol} Link`;
    }
    const cleanUri = uri.replace(/[<>:"/\\|?*]/g, "_").substring(0, 30);
    return `\u{1F310} ${cleanUri}`;
  } catch (error) {
    const cleanUri = uri.replace(/[<>:"/\\|?*]/g, "_").substring(0, 30);
    return `\u{1F310} ${cleanUri}`;
  }
}

// src/modal/customModeModal.ts
var import_obsidian4 = require("obsidian");
var CustomModeModal = class extends import_obsidian4.Modal {
  constructor(app, plugin, mode, onSubmit) {
    super(app);
    this.plugin = plugin;
    this.mode = mode;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    var _a, _b;
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: this.mode ? t("edit_custom_mode") : t("add_custom_mode") });
    let icon = this.mode ? this.mode.icon : "\u{1F9E9}";
    let displayName = this.mode ? this.mode.displayName : "";
    let name = this.mode && this.mode.name ? this.mode.name : t("default");
    let options = ((_a = this.mode) == null ? void 0 : _a.options) ? this.mode.options.map((opt) => ({ ...opt })) : [];
    let dataviewCode = this.mode ? this.mode.dataviewCode : "";
    let enabled = this.mode ? (_b = this.mode.enabled) != null ? _b : true : true;
    let fields = this.mode ? this.mode.fields : "";
    new import_obsidian4.Setting(contentEl).setName(t("custom_mode_display_name")).setDesc(t("custom_mode_display_name_desc")).addText((text) => {
      text.setValue(icon).onChange((value) => {
        icon = value || "\u{1F9E9}";
      });
      text.inputEl.style.width = "3em";
      text.inputEl.style.minWidth = "3em";
    }).addText((text) => {
      text.setValue(displayName).onChange((value) => {
        displayName = value;
      });
    });
    const dvSetting = new import_obsidian4.Setting(contentEl).setName(t("custom_mode_dataview_code")).setDesc(t("custom_mode_dataview_code_desc"));
    dvSetting.settingEl.style.flexDirection = "column";
    dvSetting.settingEl.style.alignItems = "stretch";
    dvSetting.settingEl.style.gap = "0.5rem";
    dvSetting.addText((text) => {
      text.setValue(name).setPlaceholder(t("default")).onChange((v) => name = v);
    });
    dvSetting.addTextArea((text) => {
      text.setValue(dataviewCode).onChange((value) => {
        dataviewCode = value;
      }).setPlaceholder("Dataview JS code");
      text.inputEl.setAttr("rows", 6);
      text.inputEl.style.width = "100%";
    });
    dvSetting.addText((text) => {
      text.setValue(fields || "").setPlaceholder(t("custom_mode_fields_placeholder")).onChange((value) => {
        fields = value;
      });
    });
    dvSetting.controlEl.style.display = "flex";
    dvSetting.controlEl.style.flexDirection = "column";
    dvSetting.controlEl.style.alignItems = "stretch";
    dvSetting.controlEl.style.gap = "0.5rem";
    contentEl.createEl("h3", { text: t("custom_mode_sub_options") });
    const optionsContainer = contentEl.createDiv("ge-custommode-options-container");
    let draggedIndex = null;
    const expandedStates = [];
    let dropIndicators = [];
    const createDropIndicators = () => {
      dropIndicators.forEach((indicator) => indicator.remove());
      dropIndicators = [];
      for (let i = 0; i <= options.length; i++) {
        const indicator = optionsContainer.createDiv("ge-custommode-drop-indicator");
        dropIndicators.push(indicator);
      }
    };
    const showDropIndicator = (index) => {
      dropIndicators.forEach((indicator, i) => {
        if (i === index) {
          indicator.classList.add("show");
        } else {
          indicator.classList.remove("show");
        }
      });
    };
    const hideAllDropIndicators = () => {
      dropIndicators.forEach((indicator) => indicator.classList.remove("show"));
    };
    const getDropIndex = (e) => {
      const containers = Array.from(optionsContainer.querySelectorAll(".ge-custommode-option-container"));
      const y = e.clientY;
      for (let i = 0; i < containers.length; i++) {
        const container = containers[i];
        const rect = container.getBoundingClientRect();
        const midY = rect.top + rect.height / 2;
        if (y < midY) {
          return i;
        }
      }
      return containers.length;
    };
    const renderOptions = () => {
      optionsContainer.empty();
      createDropIndicators();
      options.forEach((opt, idx) => {
        if (expandedStates[idx] === void 0) {
          expandedStates[idx] = false;
        }
        const optionContainer = document.createElement("div");
        optionContainer.className = "ge-custommode-option-container";
        if (expandedStates[idx]) {
          optionContainer.classList.add("expanded");
        }
        optionsContainer.insertBefore(optionContainer, dropIndicators[idx + 1]);
        optionContainer.draggable = false;
        optionContainer.dataset.index = idx.toString();
        const headerEl = optionContainer.createDiv("ge-custommode-option-header");
        const dragHandle = headerEl.createDiv("ge-custommode-option-drag-handle");
        dragHandle.innerHTML = `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="12" r="1"/><circle cx="9" cy="5" r="1"/><circle cx="9" cy="19" r="1"/><circle cx="15" cy="12" r="1"/><circle cx="15" cy="5" r="1"/><circle cx="15" cy="19" r="1"/></svg>`;
        const nameEl = headerEl.createDiv("ge-custommode-option-name");
        nameEl.textContent = opt.name || `${t("option")} ${idx + 1}`;
        const toggleEl = headerEl.createDiv("ge-custommode-option-toggle");
        toggleEl.innerHTML = `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9,18 15,12 9,6"></polyline></svg>`;
        const deleteEl = headerEl.createDiv("ge-custommode-option-delete");
        deleteEl.innerHTML = `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3,6 5,6 21,6"></polyline><path d="m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"></path></svg>`;
        const contentEl2 = optionContainer.createDiv("ge-custommode-option-content");
        const optSetting = new import_obsidian4.Setting(contentEl2);
        optSetting.addText((text) => {
          text.setPlaceholder(t("option_name")).setValue(opt.name).onChange((val) => {
            opt.name = val;
            nameEl.textContent = val || `${t("option")} ${idx + 1}`;
          });
        }).addTextArea((text) => {
          text.setPlaceholder("Dataview JS code").setValue(opt.dataviewCode).onChange((val) => {
            opt.dataviewCode = val;
          });
          text.inputEl.setAttr("rows", 6);
          text.inputEl.style.width = "100%";
        }).addText((text) => {
          text.setPlaceholder(t("custom_mode_fields_placeholder")).setValue(opt.fields || "").onChange((val) => {
            opt.fields = val;
          });
        });
        headerEl.addEventListener("click", (e) => {
          if (e.target === dragHandle || dragHandle.contains(e.target) || e.target === deleteEl || deleteEl.contains(e.target)) {
            return;
          }
          expandedStates[idx] = !expandedStates[idx];
          if (expandedStates[idx]) {
            optionContainer.classList.add("expanded");
          } else {
            optionContainer.classList.remove("expanded");
          }
        });
        deleteEl.addEventListener("click", (e) => {
          e.stopPropagation();
          options.splice(idx, 1);
          expandedStates.splice(idx, 1);
          renderOptions();
        });
        dragHandle.addEventListener("mousedown", () => {
          optionContainer.draggable = true;
        });
        optionContainer.addEventListener("dragstart", (e) => {
          draggedIndex = idx;
          optionContainer.classList.add("dragging");
          if (e.dataTransfer) {
            e.dataTransfer.effectAllowed = "move";
            e.dataTransfer.setData("text/html", optionContainer.outerHTML);
          }
        });
        optionContainer.addEventListener("dragend", () => {
          optionContainer.classList.remove("dragging");
          optionContainer.draggable = false;
          hideAllDropIndicators();
          draggedIndex = null;
        });
      });
      optionsContainer.addEventListener("dragover", (e) => {
        e.preventDefault();
        if (e.dataTransfer && draggedIndex !== null) {
          e.dataTransfer.dropEffect = "move";
          const dropIndex = getDropIndex(e);
          showDropIndicator(dropIndex);
        }
      });
      optionsContainer.addEventListener("dragleave", (e) => {
        const rect = optionsContainer.getBoundingClientRect();
        if (e.clientX < rect.left || e.clientX > rect.right || e.clientY < rect.top || e.clientY > rect.bottom) {
          hideAllDropIndicators();
        }
      });
      optionsContainer.addEventListener("drop", (e) => {
        e.preventDefault();
        hideAllDropIndicators();
        if (draggedIndex !== null) {
          const dropIndex = getDropIndex(e);
          if (dropIndex !== draggedIndex && dropIndex !== draggedIndex + 1) {
            const draggedExpanded = expandedStates[draggedIndex];
            const draggedOption = options[draggedIndex];
            options.splice(draggedIndex, 1);
            expandedStates.splice(draggedIndex, 1);
            const newIndex = dropIndex > draggedIndex ? dropIndex - 1 : dropIndex;
            options.splice(newIndex, 0, draggedOption);
            expandedStates.splice(newIndex, 0, draggedExpanded);
            renderOptions();
          }
        }
      });
    };
    new import_obsidian4.Setting(contentEl).addButton((btn) => {
      btn.setButtonText(t("add_option")).onClick(() => {
        options.push({ name: `${t("option")} ${options.length + 1}`, dataviewCode: "" });
        renderOptions();
      });
    });
    renderOptions();
    const saveSetting = new import_obsidian4.Setting(contentEl);
    saveSetting.settingEl.classList.add("ge-save-footer");
    saveSetting.addButton((button) => {
      button.setButtonText(t("save")).setCta().onClick(() => {
        if (!displayName.trim())
          displayName = t("untitled");
        const internalName = this.mode ? this.mode.internalName : `custom-${Date.now()}`;
        this.onSubmit({
          internalName,
          icon,
          displayName,
          name,
          dataviewCode,
          options,
          enabled,
          fields
        });
        this.close();
      });
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/modal/folderNoteSettingsModal.ts
var import_obsidian5 = require("obsidian");
function showFolderNoteSettingsModal(app, plugin, folder, gridView) {
  new FolderNoteSettingsModal(app, plugin, folder, gridView).open();
}
var FolderNoteSettingsModal = class extends import_obsidian5.Modal {
  constructor(app, plugin, folder, gridView) {
    super(app);
    this.settings = {
      sort: "",
      color: "",
      icon: "\u{1F4C1}",
      isPinned: false,
      cardLayout: ""
    };
    this.existingFile = null;
    this.plugin = plugin;
    this.folder = folder;
    this.gridView = gridView;
    const notePath = `${folder.path}/${folder.name}.md`;
    const noteFile = this.app.vault.getAbstractFileByPath(notePath);
    if (noteFile instanceof import_obsidian5.TFile) {
      this.existingFile = noteFile;
    }
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.existingFile) {
      await this.loadExistingSettings();
    }
    new import_obsidian5.Setting(contentEl).setName(t("folder_note_settings")).setHeading();
    new import_obsidian5.Setting(contentEl).setName(t("folder_sort_type")).setDesc(t("folder_sort_type_desc")).addDropdown((dropdown) => {
      dropdown.addOption("", t("default")).addOption("name-asc", t("sort_name_asc")).addOption("name-desc", t("sort_name_desc")).addOption("mtime-desc", t("sort_mtime_desc")).addOption("mtime-asc", t("sort_mtime_asc")).addOption("ctime-desc", t("sort_ctime_desc")).addOption("ctime-asc", t("sort_ctime_asc")).addOption("random", t("sort_random")).setValue(this.settings.sort).onChange((value) => {
        this.settings.sort = value;
      });
    });
    const isCurrentColorHex = /^#([0-9A-Fa-f]{3}){1,2}$/.test(this.settings.color);
    new import_obsidian5.Setting(contentEl).setName(t("folder_color")).setDesc(t("folder_color_desc")).addDropdown((dropdown) => {
      dropdown.addOption("", t("no_color")).addOption("red", t("color_red")).addOption("orange", t("color_orange")).addOption("yellow", t("color_yellow")).addOption("green", t("color_green")).addOption("cyan", t("color_cyan")).addOption("blue", t("color_blue")).addOption("purple", t("color_purple")).addOption("pink", t("color_pink")).addOption("custom", t("color_custom")).setValue(isCurrentColorHex ? "custom" : this.settings.color).onChange((value) => {
        if (value !== "custom") {
          this.settings.color = value;
          if (hexInput) {
            hexInput.setValue("");
          }
        }
      });
    });
    let hexInput;
    const hexSetting = new import_obsidian5.Setting(contentEl).setName(t("custom_hex_color")).setDesc(t("custom_hex_color_desc")).addText((text) => {
      hexInput = text;
      text.setPlaceholder("#FF8800 or #F80").setValue(isCurrentColorHex ? this.settings.color : "").onChange((value) => {
        if (value && /^#([0-9A-Fa-f]{3}){1,2}$/.test(value)) {
          this.settings.color = value;
          text.inputEl.removeClass("ge-input-error");
        } else if (value && value.trim() !== "") {
          text.inputEl.addClass("ge-input-error");
        } else {
          text.inputEl.removeClass("ge-input-error");
          if (value === "") {
            this.settings.color = "";
          }
        }
      });
    });
    const customFolderIcon = this.plugin.settings.customFolderIcon;
    new import_obsidian5.Setting(contentEl).setName(t("folder_icon")).setDesc(t("folder_icon_desc")).addText((text) => {
      text.setPlaceholder(customFolderIcon).setValue(this.settings.icon || customFolderIcon).onChange((value) => {
        this.settings.icon = value || customFolderIcon;
      });
    });
    new import_obsidian5.Setting(contentEl).setName(t("card_layout")).setDesc(t("card_layout_desc")).addDropdown((drop) => {
      drop.addOption("", t("default"));
      drop.addOption("horizontal", t("horizontal_card"));
      drop.addOption("vertical", t("vertical_card"));
      drop.setValue(this.settings.cardLayout);
      drop.onChange(async (value) => {
        this.settings.cardLayout = value;
      });
    });
    new import_obsidian5.Setting(contentEl).setName(t("foldernote_pinned")).setDesc(t("foldernote_pinned_desc")).addToggle((toggle) => {
      toggle.setValue(this.settings.isPinned).onChange((value) => {
        this.settings.isPinned = value;
      });
    });
    const buttonSetting = new import_obsidian5.Setting(contentEl);
    buttonSetting.addButton((button) => {
      button.setButtonText(t("confirm")).setCta().onClick(() => {
        this.saveFolderNote();
        this.close();
      });
    });
  }
  // 讀取現有筆記的設定
  async loadExistingSettings() {
    var _a;
    if (!this.existingFile)
      return;
    try {
      const fileCache = this.app.metadataCache.getFileCache(this.existingFile);
      if (fileCache && fileCache.frontmatter) {
        if ("sort" in fileCache.frontmatter) {
          this.settings.sort = fileCache.frontmatter.sort || "";
        }
        if ("color" in fileCache.frontmatter) {
          this.settings.color = fileCache.frontmatter.color || "";
        }
        if ("icon" in fileCache.frontmatter) {
          this.settings.icon = fileCache.frontmatter.icon || "\u{1F4C1}";
        }
        if ("cardLayout" in fileCache.frontmatter) {
          this.settings.cardLayout = fileCache.frontmatter.cardLayout || "default";
        }
        if (((_a = fileCache.frontmatter) == null ? void 0 : _a.pinned) && Array.isArray(fileCache.frontmatter.pinned)) {
          this.settings.isPinned = fileCache.frontmatter.pinned.some((item) => {
            if (!item)
              return false;
            const pinnedName = item.toString();
            const pinnedNameWithoutExt = pinnedName.replace(/\.\w+$/, "");
            return pinnedNameWithoutExt === this.folder.name;
          });
        }
      }
    } catch (error) {
      console.error("\u7121\u6CD5\u8B80\u53D6\u8CC7\u6599\u593E\u7B46\u8A18\u8A2D\u5B9A", error);
    }
  }
  // 儲存或更新資料夾筆記
  async saveFolderNote() {
    const notePath = `${this.folder.path}/${this.folder.name}.md`;
    try {
      let file;
      if (this.existingFile) {
        file = this.existingFile;
      } else {
        file = await this.app.vault.create(notePath, "");
        await this.app.workspace.getLeaf().openFile(file);
      }
      await this.app.fileManager.processFrontMatter(file, (frontmatter) => {
        if (this.settings.sort) {
          frontmatter["sort"] = this.settings.sort;
        } else {
          delete frontmatter["sort"];
        }
        if (this.settings.color) {
          frontmatter["color"] = this.settings.color;
        } else {
          delete frontmatter["color"];
        }
        if (this.settings.icon && this.settings.icon !== "\u{1F4C1}") {
          frontmatter["icon"] = this.settings.icon;
        } else {
          delete frontmatter["icon"];
        }
        if (this.settings.cardLayout) {
          frontmatter["cardLayout"] = this.settings.cardLayout;
        } else {
          delete frontmatter["cardLayout"];
        }
        const folderName = `${this.folder.name}.md`;
        if (this.settings.isPinned) {
          if (Array.isArray(frontmatter["pinned"])) {
            if (!frontmatter["pinned"].includes(folderName)) {
              frontmatter["pinned"] = [folderName, ...frontmatter["pinned"]];
            }
          } else {
            frontmatter["pinned"] = [folderName];
          }
        } else if (Array.isArray(frontmatter["pinned"])) {
          frontmatter["pinned"] = frontmatter["pinned"].filter(
            (item) => item !== folderName
          );
          if (frontmatter["pinned"].length === 0) {
            delete frontmatter["pinned"];
          }
        }
      });
      this.app.metadataCache.getFileCache(file);
      this.app.workspace.trigger("grid-explorer:folder-note-updated", this.folder.path);
      setTimeout(() => {
        this.app.workspace.getLeavesOfType("grid-view").forEach((leaf) => {
          if (leaf.view instanceof GridView) {
            leaf.view.render();
          }
        });
        this.app.workspace.trigger("grid-explorer:folder-note-updated", this.folder.path);
      }, 200);
    } catch (error) {
      console.error("\u7121\u6CD5\u5132\u5B58\u8CC7\u6599\u593E\u7B46\u8A18", error);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/modal/folderMoveModal.ts
var import_obsidian6 = require("obsidian");
var showFolderMoveModal = class extends import_obsidian6.SuggestModal {
  constructor(plugin, folder, gridView) {
    super(plugin.app);
    this.plugin = plugin;
    this.folder = folder;
    this.gridView = gridView;
    this.allPaths = this.app.vault.getAllFolders().map((f) => f.path).sort((a, b) => a.localeCompare(b));
    this.setPlaceholder("/");
    this.inputEl.focus();
  }
  getSuggestions(query) {
    const lower = query.toLowerCase();
    const filtered = this.allPaths.filter((p) => p.toLowerCase().includes(lower));
    if ("/".includes(lower) && !filtered.includes("/")) {
      filtered.unshift("/");
    }
    return filtered;
  }
  renderSuggestion(value, el) {
    el.setText(value);
  }
  async onChooseSuggestion(value) {
    try {
      const dest = value === "/" ? "" : value.replace(/\/$/, "");
      const newPath = (0, import_obsidian6.normalizePath)(dest ? `${dest}/${this.folder.name}` : this.folder.name);
      if (newPath === this.folder.path)
        return;
      await this.app.fileManager.renameFile(this.folder, newPath);
      setTimeout(() => {
        if (this.plugin.settings.folderDisplayStyle !== "show") {
          this.gridView.setSource("folder", newPath || "/");
        } else {
          this.gridView.render();
        }
      }, 100);
    } catch (err) {
      new import_obsidian6.Notice("Failed to move folder");
      console.error("Failed to move folder", err);
    }
  }
};

// src/modal/mediaModal.ts
var import_obsidian7 = require("obsidian");
var MediaModal = class extends import_obsidian7.Modal {
  // 最大滑動時間（毫秒）
  constructor(app, file, mediaFiles, gridView) {
    super(app);
    this.currentMediaElement = null;
    this.isZoomed = false;
    this.handleWheel = null;
    // 儲存 GridView 實例的引用
    // 觸控拖曳相關屬性
    this.touchStartX = 0;
    this.touchStartY = 0;
    this.touchStartTime = 0;
    this.isDragging = false;
    this.minSwipeDistance = 50;
    // 最小滑動距離
    this.maxSwipeTime = 300;
    this.file = file;
    this.mediaFiles = mediaFiles;
    this.currentIndex = this.mediaFiles.findIndex((f) => f.path === file.path);
    this.gridView = gridView;
    this.modalEl.addClass("ge-media-modal");
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.style.width = "100%";
    contentEl.style.height = "100%";
    contentEl.addClass("ge-media-modal-content");
    const mediaView = contentEl.createDiv("ge-media-view");
    const closeButton = contentEl.createDiv("ge-media-close-button");
    (0, import_obsidian7.setIcon)(closeButton, "x");
    closeButton.addEventListener("click", (e) => {
      e.stopPropagation();
      this.close();
    });
    const prevArea = contentEl.createDiv("ge-media-prev-area");
    const nextArea = contentEl.createDiv("ge-media-next-area");
    const mediaContainer = mediaView.createDiv("ge-media-container");
    mediaContainer.addEventListener("click", (e) => {
      if (e.target === mediaContainer) {
        this.close();
      }
    });
    prevArea.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showPrevMedia();
    });
    nextArea.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showNextMedia();
    });
    contentEl.addEventListener("wheel", (e) => {
      if (!this.isZoomed) {
        e.preventDefault();
        if (e.deltaY > 0) {
          this.showNextMedia();
        } else {
          this.showPrevMedia();
        }
      }
    });
    this.scope.register(null, "ArrowLeft", () => {
      this.showPrevMedia();
      return false;
    });
    this.scope.register(null, "ArrowRight", () => {
      this.showNextMedia();
      return false;
    });
    this.registerTouchEvents(mediaContainer);
    this.showMediaAtIndex(this.currentIndex);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.handleWheel) {
      const mediaView = contentEl.querySelector(".ge-media-view");
      if (mediaView) {
        mediaView.removeEventListener("wheel", this.handleWheel);
      }
      this.handleWheel = null;
    }
    if (this.gridView) {
      const currentFile = this.mediaFiles[this.currentIndex];
      const gridItemIndex = this.gridView.gridItems.findIndex(
        (item) => item.dataset.filePath === currentFile.path
      );
      if (gridItemIndex >= 0) {
        this.gridView.hasKeyboardFocus = true;
        this.gridView.selectItem(gridItemIndex);
      }
    }
  }
  // 顯示指定索引的媒體檔案
  showMediaAtIndex(index) {
    if (index < 0 || index >= this.mediaFiles.length)
      return;
    const { contentEl } = this;
    const mediaContainer = contentEl.querySelector(".ge-media-container");
    if (!mediaContainer)
      return;
    this.currentIndex = index;
    if (this.handleWheel) {
      const mediaView = contentEl.querySelector(".ge-media-view");
      if (mediaView) {
        mediaView.removeEventListener("wheel", this.handleWheel);
      }
      this.handleWheel = null;
    }
    this.isZoomed = false;
    const mediaFile = this.mediaFiles[index];
    if (isImageFile(mediaFile)) {
      const img = document.createElement("img");
      img.className = "ge-fullscreen-image";
      img.style.display = "none";
      img.src = this.app.vault.getResourcePath(mediaFile);
      img.onload = () => {
        if (this.currentMediaElement) {
          this.currentMediaElement.remove();
        }
        this.currentMediaElement = img;
        this.resetImageStyles(img);
        img.style.display = "";
      };
      mediaContainer.appendChild(img);
      img.addEventListener("click", (event) => {
        event.stopPropagation();
        this.toggleImageZoom(img, event);
      });
    } else if (isVideoFile(mediaFile) || isAudioFile(mediaFile)) {
      if (this.currentMediaElement) {
        this.currentMediaElement.remove();
      }
      const video = document.createElement("video");
      video.className = "ge-fullscreen-video";
      video.controls = true;
      video.autoplay = true;
      video.src = this.app.vault.getResourcePath(mediaFile);
      mediaContainer.appendChild(video);
      this.currentMediaElement = video;
    }
    const oldFileNameElement = mediaContainer.querySelector(".ge-fullscreen-file-name");
    if (oldFileNameElement) {
      oldFileNameElement.remove();
    }
    if (isAudioFile(mediaFile)) {
      const fileName = mediaFile.name;
      const fileNameElement = document.createElement("div");
      fileNameElement.className = "ge-fullscreen-file-name";
      fileNameElement.textContent = fileName;
      mediaContainer.appendChild(fileNameElement);
    }
  }
  // 顯示下一個媒體檔案
  showNextMedia() {
    const nextIndex = (this.currentIndex + 1) % this.mediaFiles.length;
    this.showMediaAtIndex(nextIndex);
  }
  // 顯示上一個媒體檔案
  showPrevMedia() {
    const prevIndex = (this.currentIndex - 1 + this.mediaFiles.length) % this.mediaFiles.length;
    this.showMediaAtIndex(prevIndex);
  }
  // 重設圖片樣式
  resetImageStyles(img) {
    const mediaView = this.contentEl.querySelector(".ge-media-view");
    if (!mediaView)
      return;
    img.style.width = "auto";
    img.style.height = "auto";
    img.style.maxWidth = "100vw";
    img.style.maxHeight = "100vh";
    img.style.position = "absolute";
    img.style.left = "50%";
    img.style.top = "50%";
    img.style.transform = "translate(-50%, -50%)";
    img.style.cursor = "zoom-in";
    mediaView.style.overflowX = "hidden";
    mediaView.style.overflowY = "hidden";
    img.onload = () => {
      if (mediaView.clientWidth > mediaView.clientHeight) {
        if (img.naturalHeight < mediaView.clientHeight) {
          img.style.height = "100%";
        }
      } else {
        if (img.naturalWidth < mediaView.clientWidth) {
          img.style.width = "100%";
        }
      }
    };
    if (img.complete) {
      if (mediaView.clientWidth > mediaView.clientHeight) {
        if (img.naturalHeight < mediaView.clientHeight) {
          img.style.height = "100%";
        }
      } else {
        if (img.naturalWidth < mediaView.clientWidth) {
          img.style.width = "100%";
        }
      }
    }
  }
  // 切換圖片縮放
  toggleImageZoom(img, event) {
    const mediaView = this.contentEl.querySelector(".ge-media-view");
    if (!mediaView)
      return;
    if (!this.isZoomed) {
      let clickX = 0.5;
      let clickY = 0.5;
      if (event) {
        const rect = img.getBoundingClientRect();
        clickX = (event.clientX - rect.left) / rect.width;
        clickY = (event.clientY - rect.top) / rect.height;
      }
      if (mediaView.clientWidth > mediaView.clientHeight) {
        if (img.naturalHeight < mediaView.clientHeight) {
          img.style.maxWidth = "none";
        }
      } else {
        if (img.naturalWidth < mediaView.clientWidth) {
          img.style.maxHeight = "none";
        }
      }
      if (img.offsetWidth < mediaView.clientWidth) {
        img.style.width = "100vw";
        img.style.height = "auto";
        mediaView.style.overflowX = "hidden";
        mediaView.style.overflowY = "scroll";
        requestAnimationFrame(() => {
          const newHeight = img.offsetHeight;
          const scrollY = Math.max(0, newHeight * clickY - mediaView.clientHeight / 2);
          mediaView.scrollTop = scrollY;
        });
      } else {
        img.style.width = "auto";
        img.style.height = "100vh";
        mediaView.style.overflowX = "scroll";
        mediaView.style.overflowY = "hidden";
        requestAnimationFrame(() => {
          const newWidth = img.offsetWidth;
          const scrollX = Math.max(0, newWidth * clickX - mediaView.clientWidth / 2);
          mediaView.scrollLeft = scrollX;
        });
        this.handleWheel = (wheelEvent) => {
          wheelEvent.preventDefault();
          mediaView.scrollLeft += wheelEvent.deltaY;
        };
        mediaView.addEventListener("wheel", this.handleWheel);
      }
      img.style.maxWidth = "none";
      img.style.maxHeight = "none";
      img.style.position = "relative";
      img.style.left = "0";
      img.style.top = "0";
      img.style.margin = "auto";
      img.style.transform = "none";
      img.style.cursor = "zoom-out";
      this.isZoomed = true;
    } else {
      if (this.handleWheel) {
        mediaView.removeEventListener("wheel", this.handleWheel);
        this.handleWheel = null;
      }
      this.resetImageStyles(img);
      this.isZoomed = false;
    }
  }
  // 註冊觸控事件處理器（行動裝置拖曳翻頁）
  registerTouchEvents(element) {
    element.addEventListener("touchstart", (e) => {
      if (this.isZoomed)
        return;
      const touch = e.touches[0];
      this.touchStartX = touch.clientX;
      this.touchStartY = touch.clientY;
      this.touchStartTime = Date.now();
      this.isDragging = false;
    }, { passive: true });
    element.addEventListener("touchmove", (e) => {
      if (this.isZoomed)
        return;
      const touch = e.touches[0];
      const deltaX = Math.abs(touch.clientX - this.touchStartX);
      const deltaY = Math.abs(touch.clientY - this.touchStartY);
      if (deltaX > deltaY && deltaX > 10) {
        this.isDragging = true;
        e.preventDefault();
      }
    }, { passive: false });
    element.addEventListener("touchend", (e) => {
      if (this.isZoomed)
        return;
      if (!this.isDragging)
        return;
      const touch = e.changedTouches[0];
      const deltaX = touch.clientX - this.touchStartX;
      const deltaY = touch.clientY - this.touchStartY;
      const deltaTime = Date.now() - this.touchStartTime;
      const isHorizontalSwipe = Math.abs(deltaX) > Math.abs(deltaY);
      const isValidDistance = Math.abs(deltaX) >= this.minSwipeDistance;
      const isValidTime = deltaTime <= this.maxSwipeTime;
      if (isHorizontalSwipe && isValidDistance && isValidTime) {
        if (deltaX > 0) {
          this.showPrevMedia();
        } else {
          this.showNextMedia();
        }
      }
      this.isDragging = false;
    }, { passive: true });
  }
};

// src/modal/shortcutSelectionModal.ts
var import_obsidian9 = require("obsidian");

// src/modal/inputModal.ts
var import_obsidian8 = require("obsidian");
var InputModal = class extends import_obsidian8.Modal {
  constructor(app, options) {
    super(app);
    this.options = options;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: this.options.title });
    const inputContainer = contentEl.createDiv("ge-input-field-container");
    const input = inputContainer.createEl("input", {
      type: this.options.inputType || "text",
      value: this.options.defaultValue || "",
      placeholder: this.options.placeholder,
      cls: "ge-input-field"
    });
    let searchOptions = {
      searchCurrentLocationOnly: false,
      searchFilesNameOnly: false,
      searchMediaFiles: false
    };
    if (this.options.showSearchOptions || this.options.title === t("search_text")) {
      const searchOptionsContainer = contentEl.createDiv("ge-search-options");
      const searchScopeContainer = searchOptionsContainer.createDiv("ge-search-option");
      const searchScopeCheckbox = searchScopeContainer.createEl("input", {
        type: "checkbox",
        attr: {
          id: "searchCurrentLocationOnly"
        }
      });
      if (searchOptions.searchCurrentLocationOnly) {
        searchScopeCheckbox.checked = true;
      }
      const searchScopeLabel = searchScopeContainer.createEl("label", { text: t("search_current_location_only") });
      searchScopeLabel.setAttribute("for", "searchCurrentLocationOnly");
      const searchNameContainer = searchOptionsContainer.createDiv("ge-search-option");
      const searchNameCheckbox = searchNameContainer.createEl("input", {
        type: "checkbox",
        attr: {
          id: "searchFilesNameOnly"
        }
      });
      if (searchOptions.searchFilesNameOnly) {
        searchNameCheckbox.checked = true;
      }
      const searchNameLabel = searchNameContainer.createEl("label", { text: t("search_files_name_only") });
      searchNameLabel.setAttribute("for", "searchFilesNameOnly");
      const searchMediaFilesContainer = searchOptionsContainer.createDiv("ge-search-option");
      const searchMediaFilesCheckbox = searchMediaFilesContainer.createEl("input", {
        type: "checkbox",
        attr: {
          id: "searchMediaFiles"
        }
      });
      if (searchOptions.searchMediaFiles) {
        searchMediaFilesCheckbox.checked = true;
      }
      const searchMediaFilesLabel = searchMediaFilesContainer.createEl("label", { text: t("search_media_files") });
      searchMediaFilesLabel.setAttribute("for", "searchMediaFiles");
      const updateSearchOptions = () => {
        searchOptions = {
          searchCurrentLocationOnly: searchScopeCheckbox.checked,
          searchFilesNameOnly: searchNameCheckbox.checked,
          searchMediaFiles: searchMediaFilesCheckbox.checked
        };
      };
      searchScopeCheckbox.addEventListener("change", updateSearchOptions);
      searchNameCheckbox.addEventListener("change", updateSearchOptions);
      searchMediaFilesCheckbox.addEventListener("change", updateSearchOptions);
    }
    const buttonContainer = contentEl.createDiv("ge-button-container");
    const submitButton = buttonContainer.createEl("button", {
      text: t("confirm"),
      cls: "mod-cta"
    });
    const cancelButton = buttonContainer.createEl("button", {
      text: t("cancel")
    });
    const performSubmit = () => {
      const value = input.value.trim();
      if (value) {
        if (this.options.showSearchOptions || this.options.title === t("search_text")) {
          this.options.onSubmit(value, searchOptions);
        } else {
          this.options.onSubmit(value);
        }
        this.close();
      }
    };
    submitButton.addEventListener("click", performSubmit);
    input.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        performSubmit();
      }
    });
    cancelButton.addEventListener("click", () => {
      this.close();
    });
    input.focus();
    input.select();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
function showSearchInputModal(app, onSubmit) {
  new InputModal(app, {
    title: t("search_text"),
    placeholder: t("enter_search_text"),
    onSubmit,
    showSearchOptions: true
  }).open();
}
function showUriInputModal(app, onSubmit) {
  new InputModal(app, {
    title: t("enter_uri"),
    placeholder: t("enter_uri_placeholder"),
    inputType: "url",
    onSubmit
  }).open();
}

// src/modal/shortcutSelectionModal.ts
var ShortcutSelectionModal = class extends import_obsidian9.Modal {
  constructor(app, plugin, onSubmit) {
    super(app);
    this.plugin = plugin;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: t("create_shortcut") });
    const folderButton = contentEl.createDiv("shortcut-option-button");
    folderButton.createSpan({ text: `\u{1F4C2} ${t("select_folder")}` });
    folderButton.addEventListener("click", () => {
      new FolderSuggestionModal(this.app, (folder) => {
        this.onSubmit({
          type: "folder",
          value: folder.path,
          display: `\u{1F4C2} ${folder.name}`
        });
        this.close();
      }).open();
    });
    const fileButton = contentEl.createDiv("shortcut-option-button");
    fileButton.createSpan({ text: `\u{1F4C4} ${t("select_file")}` });
    fileButton.addEventListener("click", () => {
      new FileSuggestionModal(this.app, (file) => {
        this.onSubmit({
          type: "file",
          value: file.path,
          display: `\u{1F4C4} ${file.basename}`
        });
        this.close();
      }).open();
    });
    const searchButton = contentEl.createDiv("shortcut-option-button");
    searchButton.createSpan({ text: `\u{1F50E} ${t("search_text")}` });
    searchButton.addEventListener("click", () => {
      showSearchInputModal(this.app, (searchText, searchOptions) => {
        this.onSubmit({
          type: "search",
          value: searchText,
          display: `\u{1F50E} ${searchText}`,
          searchOptions
        });
        this.close();
      });
    });
    const uriButton = contentEl.createDiv("shortcut-option-button");
    uriButton.createSpan({ text: `\u{1F310} ${t("enter_uri")}` });
    uriButton.addEventListener("click", () => {
      showUriInputModal(this.app, (uri) => {
        let displayName;
        try {
          if (uri.startsWith("obsidian://")) {
            const vaultMatch = uri.match(/[?&]vault=([^&]+)/);
            if (vaultMatch) {
              const vaultName = decodeURIComponent(vaultMatch[1]);
              displayName = `\u{1F310} Obsidian Link (${vaultName})`;
            } else {
              displayName = "\u{1F310} Obsidian Link";
            }
          } else if (uri.startsWith("http://") || uri.startsWith("https://")) {
            const url = new URL(uri);
            let domain = url.hostname;
            if (domain.startsWith("www.")) {
              domain = domain.substring(4);
            }
            displayName = `\u{1F310} ${domain}`;
          } else if (uri.startsWith("file://")) {
            displayName = "\u{1F310} Local File";
          } else {
            const protocolMatch = uri.match(/^([^:]+):/);
            if (protocolMatch) {
              displayName = `\u{1F310} ${protocolMatch[1].toUpperCase()} Link`;
            } else {
              displayName = `\u{1F310} ${uri.substring(0, 20)}${uri.length > 20 ? "..." : ""}`;
            }
          }
        } catch (error) {
          displayName = `\u{1F310} ${uri.substring(0, 20)}${uri.length > 20 ? "..." : ""}`;
        }
        this.onSubmit({
          type: "uri",
          value: uri,
          display: displayName
        });
        this.close();
      });
    });
    contentEl.createEl("p");
    const modeOptions = [];
    this.plugin.settings.customModes.forEach((mode) => {
      modeOptions.push({
        type: "mode",
        value: mode.internalName,
        display: `${mode.icon} ${mode.displayName}`
      });
    });
    modeOptions.push(
      { type: "mode", value: "bookmarks", display: `\u{1F4D1} ${t("bookmarks_mode")}` },
      { type: "mode", value: "search", display: `\u{1F50D} ${t("search_results")}` },
      { type: "mode", value: "backlinks", display: `\u{1F517} ${t("backlinks_mode")}` },
      { type: "mode", value: "outgoinglinks", display: `\u{1F517} ${t("outgoinglinks_mode")}` },
      { type: "mode", value: "all-files", display: `\u{1F4D4} ${t("all_files_mode")}` },
      { type: "mode", value: "recent-files", display: `\u{1F4C5} ${t("recent_files_mode")}` },
      { type: "mode", value: "random-note", display: `\u{1F3B2} ${t("random_note_mode")}` },
      { type: "mode", value: "tasks", display: `\u2611\uFE0F ${t("tasks_mode")}` }
    );
    if (modeOptions.length > 0) {
      const section = contentEl.createDiv("shortcut-section");
      modeOptions.forEach((option) => {
        const button = section.createDiv("shortcut-option-button");
        button.createSpan({ text: option.display });
        button.addEventListener("click", () => {
          this.onSubmit(option);
          this.close();
        });
      });
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FolderSuggestionModal = class extends import_obsidian9.FuzzySuggestModal {
  constructor(app, onChoose) {
    super(app);
    this.onSubmit = onChoose;
  }
  // 獲取所有可選的資料夾
  getItems() {
    return this.app.vault.getAllLoadedFiles().filter((file) => file instanceof import_obsidian9.TFolder);
  }
  // 獲取資料夾的顯示文本
  getItemText(folder) {
    return folder.path;
  }
  // 當選擇資料夾時調用
  onChooseItem(folder, evt) {
    this.onSubmit(folder);
  }
};
var FileSuggestionModal = class extends import_obsidian9.FuzzySuggestModal {
  constructor(app, onChoose) {
    super(app);
    this.onSubmit = onChoose;
  }
  // 獲取所有可選的檔案（僅文件檔）
  getItems() {
    return this.app.vault.getFiles().filter((file) => isDocumentFile(file));
  }
  // 獲取檔案的顯示文本
  getItemText(file) {
    return file.path;
  }
  // 當選擇檔案時調用
  onChooseItem(file, evt) {
    this.onSubmit(file);
  }
};

// src/floatingAudioPlayer.ts
var import_obsidian10 = require("obsidian");
var _FloatingAudioPlayer = class {
  constructor(app, file) {
    this.isDragging = false;
    this.offsetX = 0;
    this.offsetY = 0;
    this.isTouchEvent = false;
    this.app = app;
    this.currentFile = file;
    this.boundHandleDragStartMouse = this.handleDragStartMouse.bind(this);
    this.boundHandleDragStartTouch = this.handleDragStartTouch.bind(this);
    this.boundHandleDragMoveMouse = this.handleDragMoveMouse.bind(this);
    this.boundHandleDragMoveTouch = this.handleDragMoveTouch.bind(this);
    this.boundHandleDragEndMouse = this.handleDragEndMouse.bind(this);
    this.boundHandleDragEndTouch = this.handleDragEndTouch.bind(this);
    this.boundClose = this.close.bind(this);
    this.buildUI();
    this.setupDragEvents();
  }
  // --- 靜態方法：開啟或取得播放器 ---
  static open(app, file) {
    if (_FloatingAudioPlayer.players.has(file.path)) {
      const existingPlayer = _FloatingAudioPlayer.players.get(file.path);
      existingPlayer.focus();
      return existingPlayer;
    }
    if (_FloatingAudioPlayer.players.size > 0) {
      const firstPlayer = _FloatingAudioPlayer.players.values().next().value;
      firstPlayer.updatePlayer(file);
      firstPlayer.focus();
      return firstPlayer;
    }
    const newPlayer = new _FloatingAudioPlayer(app, file);
    _FloatingAudioPlayer.players.set(file.path, newPlayer);
    newPlayer.show();
    return newPlayer;
  }
  // --- Private UI 和事件設定方法 ---
  buildUI() {
    this.containerEl = document.createElement("div");
    this.containerEl.className = "ge-floating-audio-player";
    this.containerEl.setAttribute("data-file", this.currentFile.path);
    this.audioEl = document.createElement("audio");
    this.audioEl.controls = true;
    this.audioEl.src = this.app.vault.getResourcePath(this.currentFile);
    this.titleEl = document.createElement("div");
    this.titleEl.className = "ge-audio-title";
    this.titleEl.textContent = this.currentFile.basename;
    this.closeButtonEl = document.createElement("div");
    this.closeButtonEl.className = "ge-audio-close-button";
    (0, import_obsidian10.setIcon)(this.closeButtonEl, "x");
    this.closeButtonEl.addEventListener("click", this.boundClose);
    this.handleEl = document.createElement("div");
    this.handleEl.className = "ge-audio-handle";
    this.containerEl.appendChild(this.handleEl);
    this.containerEl.appendChild(this.titleEl);
    this.containerEl.appendChild(this.audioEl);
    this.containerEl.appendChild(this.closeButtonEl);
  }
  setupDragEvents() {
    this.handleEl.addEventListener("mousedown", this.boundHandleDragStartMouse);
    this.handleEl.addEventListener("touchstart", this.boundHandleDragStartTouch, { passive: true });
    document.addEventListener("mousemove", this.boundHandleDragMoveMouse);
    document.addEventListener("touchmove", this.boundHandleDragMoveTouch, { passive: false });
    document.addEventListener("mouseup", this.boundHandleDragEndMouse);
    document.addEventListener("touchend", this.boundHandleDragEndTouch);
  }
  removeDragEvents() {
    this.handleEl.removeEventListener("mousedown", this.boundHandleDragStartMouse);
    this.handleEl.removeEventListener("touchstart", this.boundHandleDragStartTouch);
    document.removeEventListener("mousemove", this.boundHandleDragMoveMouse);
    document.removeEventListener("touchmove", this.boundHandleDragMoveTouch);
    document.removeEventListener("mouseup", this.boundHandleDragEndMouse);
    document.removeEventListener("touchend", this.boundHandleDragEndTouch);
  }
  // --- Private 事件處理器 ---
  handleDragStartMouse(e) {
    if (this.isTouchEvent)
      return;
    this.isDragging = true;
    this.offsetX = e.clientX - this.containerEl.getBoundingClientRect().left;
    this.offsetY = e.clientY - this.containerEl.getBoundingClientRect().top;
    this.containerEl.classList.add("ge-audio-dragging");
  }
  handleDragStartTouch(e) {
    this.isTouchEvent = true;
    this.isDragging = true;
    const touch = e.touches[0];
    this.offsetX = touch.clientX - this.containerEl.getBoundingClientRect().left;
    this.offsetY = touch.clientY - this.containerEl.getBoundingClientRect().top;
    this.containerEl.classList.add("ge-audio-dragging");
  }
  handleDragMoveMouse(e) {
    if (!this.isDragging || this.isTouchEvent)
      return;
    this.movePlayer(e.clientX, e.clientY);
  }
  handleDragMoveTouch(e) {
    if (!this.isDragging)
      return;
    const touch = e.touches[0];
    this.movePlayer(touch.clientX, touch.clientY);
    e.preventDefault();
  }
  handleDragEndMouse() {
    if (this.isTouchEvent)
      return;
    this.isDragging = false;
    this.containerEl.classList.remove("ge-audio-dragging");
  }
  handleDragEndTouch() {
    this.isDragging = false;
    this.isTouchEvent = false;
    this.containerEl.classList.remove("ge-audio-dragging");
  }
  movePlayer(clientX, clientY) {
    const x = clientX - this.offsetX;
    const y = clientY - this.offsetY;
    this.containerEl.style.left = `${x}px`;
    this.containerEl.style.top = `${y}px`;
  }
  // --- Public 方法 ---
  show() {
    document.body.appendChild(this.containerEl);
    const rect = this.containerEl.getBoundingClientRect();
    this.containerEl.style.left = `${window.innerWidth - rect.width - 20}px`;
    this.containerEl.style.top = `${window.innerHeight - rect.height - 20}px`;
    this.audioEl.play();
  }
  close() {
    this.removeDragEvents();
    this.containerEl.remove();
    _FloatingAudioPlayer.players.delete(this.currentFile.path);
  }
  focus() {
    this.containerEl.scrollIntoView({ behavior: "smooth", block: "center" });
    this.containerEl.style.transition = "box-shadow 0.1s ease-in-out";
    this.containerEl.style.boxShadow = "0 0 10px 2px var(--interactive-accent)";
    setTimeout(() => {
      this.containerEl.style.boxShadow = "";
    }, 300);
  }
  // 更新播放器以播放新檔案
  updatePlayer(newFile) {
    _FloatingAudioPlayer.players.delete(this.currentFile.path);
    this.currentFile = newFile;
    _FloatingAudioPlayer.players.set(this.currentFile.path, this);
    this.containerEl.setAttribute("data-file", this.currentFile.path);
    this.audioEl.src = this.app.vault.getResourcePath(this.currentFile);
    this.titleEl.textContent = this.currentFile.basename;
    this.audioEl.play();
  }
};
var FloatingAudioPlayer = _FloatingAudioPlayer;
// 使用靜態 Map 來追蹤已開啟的播放器實例 (以檔案路徑為 key)
FloatingAudioPlayer.players = /* @__PURE__ */ new Map();

// src/ExplorerView.ts
var EXPLORER_VIEW_TYPE = "explorer-view";
var ExplorerView = class extends import_obsidian11.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    // 事件監聽器的引用陣列，用於在視圖關閉時清理
    this.eventRefs = [];
    // 延遲渲染的計時器，避免頻繁重繪造成效能問題
    this.renderTimer = null;
    // 記錄展開的資料夾路徑，維持更新後的展開狀態
    // 使用 Set 來快速查詢和去重
    this.expandedPaths = /* @__PURE__ */ new Set();
    // 緩存最後一次已知的 GridView 位置（當焦點不在 GridView 時仍可維持標註）
    // 這樣即使切換到其他視圖，樹狀圖仍能正確顯示當前位置
    this.lastMode = null;
    this.lastPath = null;
    // 篩選輸入字串（依 NAV-SEARCH-STYLES.md）
    this.searchQuery = "";
    // 在輸入時保持焦點用的旗標
    this.keepSearchFocus = false;
    // 追蹤輸入法組字狀態，避免組字中重繪打斷輸入
    this.isComposing = false;
    this.searchInputEl = null;
    this.searchContainerEl = null;
    // Stash functionality
    this.stashFilePaths = [];
    // Built-in mode icons
    this.BUILTIN_MODE_EMOJIS = {
      "bookmarks": "\u{1F4D1}",
      "search": "\u{1F50D}",
      "backlinks": "\u{1F517}",
      "outgoinglinks": "\u{1F517}",
      "recent-files": "\u{1F4C5}",
      "all-files": "\u{1F4D4}",
      "random-note": "\u{1F3B2}",
      "tasks": "\u2611\uFE0F"
    };
    this.plugin = plugin;
    this.containerEl.addClass("ge-explorer-view-container");
  }
  // 延遲渲染，避免頻繁更新
  scheduleRender() {
    if (this.renderTimer !== null) {
      window.clearTimeout(this.renderTimer);
    }
    this.renderTimer = window.setTimeout(() => {
      var _a;
      this.renderTimer = null;
      if ((_a = this.containerEl) == null ? void 0 : _a.isConnected) {
        this.render();
      }
    }, 100);
  }
  // 獲取視圖類型
  getViewType() {
    return EXPLORER_VIEW_TYPE;
  }
  // 獲取顯示名稱
  getDisplayText() {
    return t("explorer") || "Explorer";
  }
  // 獲取圖示
  getIcon() {
    return "folder-tree";
  }
  // 保存視圖狀態
  getState() {
    return {
      ...super.getState(),
      expandedPaths: Array.from(this.expandedPaths),
      searchQuery: this.searchQuery,
      stashFilePaths: Array.from(this.stashFilePaths)
    };
  }
  // 恢復視圖狀態
  async setState(state, result) {
    await super.setState(state, result);
    this.restoreExpandedPaths(state);
    this.restoreSearchQuery(state);
    this.restoreStashFiles(state);
    this.loadStashFromSettingsIfNeeded();
    this.syncSearchInput();
    this.scheduleRender();
  }
  // 恢復展開路徑狀態
  restoreExpandedPaths(state) {
    if ((state == null ? void 0 : state.expandedPaths) && Array.isArray(state.expandedPaths)) {
      this.expandedPaths = new Set(
        state.expandedPaths.filter((p) => typeof p === "string")
      );
    } else {
      this.expandedPaths.clear();
    }
  }
  // 恢復搜尋查詢
  restoreSearchQuery(state) {
    this.searchQuery = (state == null ? void 0 : state.searchQuery) && typeof state.searchQuery === "string" ? state.searchQuery : "";
  }
  // 恢復暫存檔案列表
  restoreStashFiles(state) {
    if ((state == null ? void 0 : state.stashFilePaths) && Array.isArray(state.stashFilePaths)) {
      const validPaths = state.stashFilePaths.filter((p) => typeof p === "string" && p && this.app.vault.getAbstractFileByPath(p) instanceof import_obsidian11.TFile);
      this.stashFilePaths = Array.from(new Set(validPaths));
      this.persistStashToSettings();
    }
  }
  // 若當前暫存區為空，嘗試從設定載入（處理新建 ExplorerView 未觸發 setState 的情況）
  loadStashFromSettingsIfNeeded() {
    var _a;
    try {
      if (this.stashFilePaths.length > 0)
        return;
      const paths = (_a = this.plugin.settings) == null ? void 0 : _a.explorerStashPaths;
      if (!Array.isArray(paths))
        return;
      const validPaths = paths.filter((p) => typeof p === "string" && p && this.app.vault.getAbstractFileByPath(p) instanceof import_obsidian11.TFile);
      this.stashFilePaths = Array.from(new Set(validPaths));
    } catch (e) {
    }
  }
  // 將目前的暫存清單寫回設定（去重）
  persistStashToSettings() {
    try {
      const unique = Array.from(new Set(this.stashFilePaths));
      this.plugin.settings.explorerStashPaths = unique;
      this.plugin.saveSettings(false);
    } catch (e) {
    }
  }
  // 同步搜尋輸入框狀態
  syncSearchInput() {
    var _a;
    if (this.searchInputEl) {
      this.searchInputEl.value = this.searchQuery;
      const clearBtn = (_a = this.searchContainerEl) == null ? void 0 : _a.querySelector(".ge-explorer-search-clear");
      clearBtn == null ? void 0 : clearBtn.toggleClass("show", !!this.searchQuery.trim());
    }
  }
  // 視圖開啟時初始化
  async onOpen() {
    this.loadStashFromSettingsIfNeeded();
    this.render();
    this.registerEventListeners();
  }
  // 註冊事件監聽器
  registerEventListeners() {
    const { vault } = this.app;
    const schedule = () => this.scheduleRender();
    this.eventRefs.push(
      vault.on("create", schedule),
      vault.on("delete", (file) => this.handleFileDelete(file, schedule)),
      vault.on("rename", (file, oldPath) => this.handleFileRename(file, oldPath, schedule))
    );
    this.registerCustomEvent("ge-grid-source-changed", (payload) => {
      var _a, _b;
      const newMode = (_a = payload == null ? void 0 : payload.mode) != null ? _a : this.lastMode;
      const newPath = (_b = payload == null ? void 0 : payload.path) != null ? _b : this.lastPath;
      if (newMode !== this.lastMode || newPath !== this.lastPath) {
        this.lastMode = newMode;
        this.lastPath = newPath;
        if (this.searchQuery.trim()) {
          this.searchQuery = "";
          if (this.searchInputEl) {
            this.searchInputEl.value = "";
          }
          this.syncSearchInput();
        }
        schedule();
      }
    });
    this.registerCustomEvent("grid-explorer:folder-note-updated", schedule);
  }
  // 處理檔案刪除事件
  handleFileDelete(file, schedule) {
    const path = file == null ? void 0 : file.path;
    if (path) {
      this.removeExpandedPrefix(path);
      if (file instanceof import_obsidian11.TFile) {
        this.stashFilePaths = this.stashFilePaths.filter((p) => p !== path);
        this.app.workspace.requestSaveLayout();
        this.persistStashToSettings();
      }
    }
    schedule();
  }
  // 處理檔案重新命名事件
  handleFileRename(file, oldPath, schedule) {
    const newPath = (file == null ? void 0 : file.path) || "";
    if (oldPath && newPath) {
      this.renameExpandedPrefix(oldPath, newPath);
      if (file instanceof import_obsidian11.TFile) {
        this.stashFilePaths = this.stashFilePaths.map((p) => p === oldPath ? newPath : p);
        this.app.workspace.requestSaveLayout();
        this.persistStashToSettings();
      }
    }
    schedule();
  }
  // 註冊自定義事件
  registerCustomEvent(eventName, callback) {
    var _a, _b;
    try {
      const ref = (_b = (_a = this.app.workspace).on) == null ? void 0 : _b.call(_a, eventName, callback);
      if (ref)
        this.eventRefs.push(ref);
    } catch (error) {
      console.warn(`Failed to register event ${eventName}:`, error);
    }
  }
  // 視圖關閉時清理資源
  async onClose() {
    this.cleanupEventListeners();
    this.cleanupTimer();
    this.cleanupSearchElements();
  }
  // 清理事件監聽器
  cleanupEventListeners() {
    const { vault, workspace } = this.app;
    for (const ref of this.eventRefs) {
      try {
        vault.offref(ref);
      } catch (e) {
      }
      try {
        workspace.offref(ref);
      } catch (e) {
      }
    }
    this.eventRefs = [];
  }
  // 清理計時器
  cleanupTimer() {
    if (this.renderTimer !== null) {
      window.clearTimeout(this.renderTimer);
      this.renderTimer = null;
    }
  }
  // 清理搜尋元素引用
  cleanupSearchElements() {
    this.searchInputEl = null;
    this.searchContainerEl = null;
  }
  // 刷新視圖
  refresh() {
    this.scheduleRender();
  }
  // 在新視圖中開啟資料夾
  openFolderInNewView(folderPath) {
    const { workspace } = this.app;
    let leaf = null;
    switch (this.plugin.settings.defaultOpenLocation) {
      case "left":
        leaf = workspace.getLeftLeaf(false);
        break;
      case "right":
        leaf = workspace.getRightLeaf(false);
        break;
      case "tab":
      default:
        leaf = workspace.getLeaf("tab");
        break;
    }
    if (!leaf)
      leaf = workspace.getLeaf("tab");
    leaf.setViewState({ type: "grid-view", active: true });
    if (leaf.view instanceof GridView) {
      leaf.view.setSource("folder", folderPath);
    }
    workspace.revealLeaf(leaf);
  }
  // 在新視圖中開啟模式
  openModeInNewView(mode) {
    const { workspace } = this.app;
    let leaf = null;
    switch (this.plugin.settings.defaultOpenLocation) {
      case "left":
        leaf = workspace.getLeftLeaf(false);
        break;
      case "right":
        leaf = workspace.getRightLeaf(false);
        break;
      case "tab":
      default:
        leaf = workspace.getLeaf("tab");
        break;
    }
    if (!leaf)
      leaf = workspace.getLeaf("tab");
    leaf.setViewState({ type: "grid-view", active: true });
    if (leaf.view instanceof GridView) {
      leaf.view.setSource(mode);
    }
    workspace.revealLeaf(leaf);
  }
  // 主要渲染方法
  render() {
    const { contentEl } = this;
    const prevScrollTop = contentEl.scrollTop;
    this.ensureSearchContainer(contentEl);
    this.clearContentExceptSearch(contentEl);
    const { currentMode, currentPath, showIgnoredFolders } = this.getCurrentGridState();
    this.renderSearchOption(contentEl);
    this.renderStashGroup(contentEl);
    this.renderModeGroups(contentEl, currentMode);
    this.renderFoldersGroup(contentEl, currentMode, currentPath, showIgnoredFolders);
    this.handleSearchFocus();
    this.restoreScrollPosition(contentEl, prevScrollTop);
  }
  // 確保搜尋容器存在
  ensureSearchContainer(contentEl) {
    if (!this.searchContainerEl || !this.searchContainerEl.isConnected) {
      this.createSearchContainer(contentEl);
    }
  }
  // 清除除搜尋容器外的所有內容
  clearContentExceptSearch(contentEl) {
    Array.from(contentEl.children).forEach((child) => {
      if (child !== this.searchContainerEl) {
        child.remove();
      }
    });
  }
  // 處理搜尋框焦點
  handleSearchFocus() {
    if (this.keepSearchFocus && this.searchInputEl) {
      setTimeout(() => {
        if (this.searchInputEl) {
          this.searchInputEl.focus();
          try {
            const len = this.searchInputEl.value.length;
            this.searchInputEl.setSelectionRange(len, len);
          } catch (e) {
          }
        }
      }, 0);
      this.keepSearchFocus = false;
    }
  }
  // 創建搜尋容器
  createSearchContainer(contentEl) {
    var _a;
    this.searchContainerEl = contentEl.createDiv({ cls: "ge-explorer-search-container" });
    this.searchInputEl = this.searchContainerEl.createEl("input", { type: "text" });
    this.searchInputEl.addClass("ge-explorer-search-input");
    this.searchInputEl.placeholder = ((_a = t) == null ? void 0 : _a("search")) || "Search";
    this.searchInputEl.value = this.searchQuery;
    const clearBtn = this.searchContainerEl.createEl("button", { cls: "ge-explorer-search-clear clickable-icon" });
    (0, import_obsidian11.setIcon)(clearBtn, "x");
    if (this.searchQuery.trim())
      clearBtn.addClass("show");
    this.setupSearchEventListeners(clearBtn, contentEl);
  }
  // 設置搜尋事件監聽器
  setupSearchEventListeners(clearBtn, contentEl) {
    if (!this.searchInputEl)
      return;
    this.searchInputEl.addEventListener("compositionstart", () => {
      this.isComposing = true;
    });
    this.searchInputEl.addEventListener("compositionend", () => {
      this.isComposing = false;
      this.updateSearchQuery(clearBtn);
    });
    this.searchInputEl.addEventListener("input", () => {
      this.updateSearchQuery(clearBtn);
    });
    this.searchInputEl.addEventListener("keydown", (evt) => {
      this.handleSearchKeydown(evt, clearBtn, contentEl);
    });
    clearBtn.addEventListener("click", () => {
      this.clearSearch(clearBtn);
    });
  }
  // 更新搜尋查詢
  updateSearchQuery(clearBtn) {
    if (!this.searchInputEl)
      return;
    this.searchQuery = this.searchInputEl.value;
    clearBtn.toggleClass("show", !!this.searchQuery.trim());
    if (!this.isComposing) {
      this.keepSearchFocus = true;
      this.scheduleRender();
      this.app.workspace.requestSaveLayout();
    }
  }
  // 處理搜尋框按鍵事件
  handleSearchKeydown(evt, clearBtn, contentEl) {
    if (this.isComposing)
      return;
    if (evt.key === "ArrowDown") {
      const searchOptionEl = contentEl.querySelector(".ge-explorer-search-option");
      if (searchOptionEl) {
        evt.preventDefault();
        searchOptionEl.focus();
      }
    } else if (evt.key === "Escape") {
      this.clearSearch(clearBtn);
    }
  }
  // 清除搜尋
  clearSearch(clearBtn) {
    this.searchQuery = "";
    if (this.searchInputEl)
      this.searchInputEl.value = "";
    clearBtn.removeClass("show");
    this.scheduleRender();
    this.app.workspace.requestSaveLayout();
    setTimeout(() => {
      var _a;
      return (_a = this.searchInputEl) == null ? void 0 : _a.focus();
    }, 0);
  }
  /**
   * 渲染搜尋選項（如果有搜尋字串）
   */
  renderSearchOption(contentEl) {
    const trimmed = this.searchQuery.trim();
    if (trimmed.length > 0) {
      const searchItem = contentEl.createDiv({
        cls: "ge-explorer-folder-header ge-explorer-mode-item ge-explorer-search-option"
      });
      searchItem.setAttr("tabindex", "0");
      searchItem.setAttr("role", "button");
      const searchIcon = searchItem.createSpan({ cls: "ge-explorer-folder-icon" });
      (0, import_obsidian11.setIcon)(searchIcon, "search");
      const searchName = searchItem.createSpan({ cls: "ge-explorer-folder-name" });
      searchName.textContent = `${t ? t("search_for") : "Search for"} "${trimmed}"`;
      searchItem.addEventListener("click", async (evt) => {
        evt.stopPropagation();
        await this.openFolderSearch(trimmed);
      });
      searchItem.addEventListener("keydown", async (evt) => {
        var _a, _b;
        if (evt.key === "Enter") {
          evt.preventDefault();
          await this.openFolderSearch(trimmed);
        } else if (evt.key === "ArrowUp") {
          evt.preventDefault();
          (_a = this.searchInputEl) == null ? void 0 : _a.focus();
        } else if (evt.key === "Escape") {
          evt.preventDefault();
          this.searchQuery = "";
          if (this.searchInputEl)
            this.searchInputEl.value = "";
          const clearBtn = (_b = this.searchContainerEl) == null ? void 0 : _b.querySelector(".ge-explorer-search-clear");
          clearBtn == null ? void 0 : clearBtn.removeClass("show");
          this.scheduleRender();
          this.app.workspace.requestSaveLayout();
          setTimeout(() => {
            var _a2;
            return (_a2 = this.searchInputEl) == null ? void 0 : _a2.focus();
          }, 0);
        }
      });
    }
  }
  /**
   * 獲取當前 GridView 的狀態資訊
   * 如果沒有活躍的 GridView，則使用快取的最後已知狀態
   * @returns 包含模式、路徑和顯示設定的狀態物件
   */
  getCurrentGridState() {
    var _a, _b, _c, _d, _e;
    const activeGrid = this.app.workspace.getActiveViewOfType(GridView);
    if (activeGrid) {
      const currentMode = activeGrid.sourceMode;
      const currentPath = activeGrid.sourcePath;
      if (currentMode !== this.lastMode || currentPath !== this.lastPath) {
        this.lastMode = currentMode;
        this.lastPath = currentPath;
      }
    }
    return {
      currentMode: (_b = (_a = activeGrid == null ? void 0 : activeGrid.sourceMode) != null ? _a : this.lastMode) != null ? _b : "",
      currentPath: (_d = (_c = activeGrid == null ? void 0 : activeGrid.sourcePath) != null ? _c : this.lastPath) != null ? _d : "",
      showIgnoredFolders: (_e = activeGrid == null ? void 0 : activeGrid.showIgnoredFolders) != null ? _e : false
    };
  }
  // 檢查是否正在過濾
  isFiltering() {
    var _a;
    return !!((_a = this.searchQuery) == null ? void 0 : _a.trim());
  }
  // 檢查文字是否符合查詢
  matchesQuery(text) {
    var _a;
    const query = (_a = this.searchQuery) == null ? void 0 : _a.trim().toLowerCase();
    if (!query)
      return true;
    return (text || "").toLowerCase().includes(query);
  }
  // 檢查資料夾是否應該顯示
  shouldShowFolder(folder) {
    var _a;
    if (!this.isFiltering())
      return true;
    if (this.matchesQuery(folder.name))
      return true;
    const settings = this.plugin.settings;
    const activeGrid = this.app.workspace.getActiveViewOfType(GridView);
    const showIgnoredFolders = (_a = activeGrid == null ? void 0 : activeGrid.showIgnoredFolders) != null ? _a : false;
    const childFolders = folder.children.filter((f) => f instanceof import_obsidian11.TFolder).filter((f) => !isFolderIgnored(f, settings.ignoredFolders, settings.ignoredFolderPatterns, showIgnoredFolders));
    return childFolders.some((child) => this.shouldShowFolder(child));
  }
  // 檢查是否有可見的頂層資料夾
  hasVisibleTopLevelFolders(showIgnoredFolders) {
    const root = this.app.vault.getRoot();
    const settings = this.plugin.settings;
    const topLevelFolders = root.children.filter((f) => f instanceof import_obsidian11.TFolder).filter((f) => !isFolderIgnored(f, settings.ignoredFolders, settings.ignoredFolderPatterns, showIgnoredFolders));
    return topLevelFolders.some((f) => this.shouldShowFolder(f));
  }
  // 檢查資料夾是否有符合搜尋條件的子項目
  hasMatchingChildren(folder) {
    var _a;
    if (!this.isFiltering())
      return false;
    if (this.matchesQuery(folder.name))
      return true;
    const settings = this.plugin.settings;
    const activeGrid = this.app.workspace.getActiveViewOfType(GridView);
    const showIgnoredFolders = (_a = activeGrid == null ? void 0 : activeGrid.showIgnoredFolders) != null ? _a : false;
    const childFolders = folder.children.filter((f) => f instanceof import_obsidian11.TFolder).filter((f) => !isFolderIgnored(f, settings.ignoredFolders, settings.ignoredFolderPatterns, showIgnoredFolders));
    return childFolders.some((child) => this.hasMatchingChildren(child));
  }
  // 渲染模式群組
  renderModeGroups(contentEl, currentMode) {
    var _a, _b;
    const settings = this.plugin.settings;
    const customItems = this.getCustomModeItems(settings);
    this.renderModesGroup(contentEl, "__modes__custom", ((_a = t) == null ? void 0 : _a("custom_modes")) || "Custom Modes", "puzzle", customItems);
    const builtinItems = this.getBuiltinModeItems(settings);
    this.renderModesGroup(contentEl, "__modes__builtin", ((_b = t) == null ? void 0 : _b("modes")) || "Modes", "shapes", builtinItems);
  }
  // 獲取自定義模式項目
  getCustomModeItems(settings) {
    var _a;
    const customModes = ((_a = settings == null ? void 0 : settings.customModes) != null ? _a : []).filter((cm) => (cm == null ? void 0 : cm.enabled) !== false);
    return customModes.filter((cm) => {
      if (!this.isFiltering())
        return true;
      const baseLabel = cm.displayName || cm.internalName || "Custom";
      return this.matchesQuery(baseLabel);
    }).map((cm) => {
      const baseLabel = cm.displayName || cm.internalName || "Custom";
      const internalName = cm.internalName || `custom-${baseLabel}`;
      const textIcon = cm.icon ? `${cm.icon} ` : "";
      return {
        key: internalName,
        label: `${textIcon}${baseLabel}`,
        icon: "",
        onClick: () => this.openMode(internalName)
      };
    });
  }
  // 獲取內建模式項目
  getBuiltinModeItems(settings) {
    const builtInModes = this.getEnabledBuiltInModes(settings);
    return builtInModes.filter((m) => !this.isFiltering() || this.matchesQuery(m.label) || this.matchesQuery(m.key)).map((m) => {
      const emoji = this.BUILTIN_MODE_EMOJIS[m.key] || "";
      const label = emoji ? `${emoji} ${m.label}` : m.label;
      return { key: m.key, label, icon: "", onClick: () => this.openMode(m.key) };
    });
  }
  // 獲取已啟用的內建模式
  getEnabledBuiltInModes(settings) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    const builtInCandidates = [
      { key: "bookmarks", label: ((_a = t) == null ? void 0 : _a("bookmarks_mode")) || "Bookmarks", icon: "bookmark", enabled: !!(settings == null ? void 0 : settings.showBookmarksMode) },
      { key: "search", label: ((_b = t) == null ? void 0 : _b("search_results")) || "Search", icon: "search", enabled: !!(settings == null ? void 0 : settings.showSearchMode) },
      { key: "backlinks", label: ((_c = t) == null ? void 0 : _c("backlinks_mode")) || "Backlinks", icon: "links-coming-in", enabled: !!(settings == null ? void 0 : settings.showBacklinksMode) },
      { key: "outgoinglinks", label: ((_d = t) == null ? void 0 : _d("outgoinglinks_mode")) || "Outgoing Links", icon: "links-going-out", enabled: !!(settings == null ? void 0 : settings.showOutgoinglinksMode) },
      { key: "all-files", label: ((_e = t) == null ? void 0 : _e("all_files_mode")) || "All Files", icon: "book-text", enabled: !!(settings == null ? void 0 : settings.showAllFilesMode) },
      { key: "recent-files", label: ((_f = t) == null ? void 0 : _f("recent_files_mode")) || "Recent Files", icon: "calendar-days", enabled: !!(settings == null ? void 0 : settings.showRecentFilesMode) },
      { key: "random-note", label: ((_g = t) == null ? void 0 : _g("random_note_mode")) || "Random Note", icon: "dice", enabled: !!(settings == null ? void 0 : settings.showRandomNoteMode) },
      { key: "tasks", label: ((_h = t) == null ? void 0 : _h("tasks_mode")) || "Tasks", icon: "square-check-big", enabled: !!(settings == null ? void 0 : settings.showTasksMode) }
    ];
    return builtInCandidates.filter((m) => m.enabled).map(({ key, label, icon }) => ({ key, label, icon }));
  }
  // 開啟指定模式
  async openMode(mode) {
    const view = await this.plugin.activateView();
    if (view instanceof GridView)
      await view.setSource(mode);
  }
  // 恢復滾動位置
  restoreScrollPosition(contentEl, prevScrollTop) {
    contentEl.scrollTop = prevScrollTop;
    requestAnimationFrame(() => {
      contentEl.scrollTop = prevScrollTop;
    });
  }
  // 渲染模式群組
  renderModesGroup(contentEl, groupKey, title, iconName, items) {
    if (items.length === 0)
      return;
    const nodeEl = contentEl.createDiv({ cls: "ge-explorer-folder-node" });
    const header = nodeEl.createDiv({ cls: "ge-explorer-folder-header" });
    const toggle = header.createSpan({ cls: "ge-explorer-folder-toggle" });
    let expanded = this.isExpanded(groupKey);
    if (this.isFiltering() && items.length > 0) {
      expanded = true;
      this.setExpanded(groupKey, expanded);
    }
    (0, import_obsidian11.setIcon)(toggle, expanded ? "chevron-down" : "chevron-right");
    const icon = header.createSpan({ cls: "ge-explorer-folder-icon" });
    (0, import_obsidian11.setIcon)(icon, iconName);
    const name = header.createSpan({ cls: "ge-explorer-folder-name" });
    name.textContent = title;
    const children = nodeEl.createDiv({ cls: "ge-explorer-folder-children" });
    if (!expanded)
      children.addClass("is-collapsed");
    header.addEventListener("click", () => {
      const newExpanded = !this.isExpanded(groupKey);
      this.setExpanded(groupKey, newExpanded);
      (0, import_obsidian11.setIcon)(toggle, newExpanded ? "chevron-down" : "chevron-right");
      children.toggleClass("is-collapsed", !newExpanded);
    });
    this.renderModeItems(children, items, groupKey);
  }
  // 渲染模式項目
  renderModeItems(children, items, groupKey) {
    const { currentMode } = this.getCurrentGridState();
    items.forEach(({ key, label, icon, onClick }) => {
      const itemEl = children.createDiv({ cls: "ge-explorer-folder-header ge-explorer-mode-item" });
      this.setupModeItemIcon(itemEl, icon, groupKey);
      this.setupModeItemLabel(itemEl, label);
      this.highlightActiveModeItem(itemEl, key, currentMode);
      this.setupModeItemClick(itemEl, key, currentMode, onClick);
      if (groupKey === "__modes__custom" && key) {
        this.setupCustomModeContextMenu(itemEl, key);
      }
    });
  }
  // 設置模式項目圖示
  setupModeItemIcon(itemEl, icon, groupKey) {
    const itemIcon = itemEl.createSpan({ cls: "ge-explorer-folder-icon" });
    if (groupKey !== "__modes__custom" && icon) {
      (0, import_obsidian11.setIcon)(itemIcon, icon);
    }
  }
  // 設置模式項目標籤
  setupModeItemLabel(itemEl, label) {
    const itemName = itemEl.createSpan({ cls: "ge-explorer-folder-name" });
    itemName.textContent = label;
  }
  // 高亮活躍的模式項目
  highlightActiveModeItem(itemEl, key, currentMode) {
    if (key && currentMode === key && currentMode !== "folder") {
      itemEl.addClass("is-active");
    }
  }
  // 設置模式項目點擊事件
  setupModeItemClick(itemEl, key, currentMode, onClick) {
    itemEl.addEventListener("click", (evt) => {
      evt.stopPropagation();
      if ((evt.ctrlKey || evt.metaKey) && key) {
        this.openModeInNewView(key);
        return;
      }
      if (key && currentMode === key && currentMode !== "folder") {
        return;
      }
      onClick();
    });
  }
  // 設置自定義模式右鍵選單
  setupCustomModeContextMenu(itemEl, key) {
    itemEl.addEventListener("contextmenu", (evt) => {
      evt.preventDefault();
      evt.stopPropagation();
      const menu = new import_obsidian11.Menu();
      menu.addItem((item) => {
        var _a;
        item.setTitle(((_a = t) == null ? void 0 : _a("edit_custom_mode")) || "Edit Custom Mode").setIcon("settings").onClick(() => {
          const modeIndex = this.plugin.settings.customModes.findIndex((m) => m.internalName === key);
          if (modeIndex === -1)
            return;
          new CustomModeModal(this.app, this.plugin, this.plugin.settings.customModes[modeIndex], (result) => {
            this.plugin.settings.customModes[modeIndex] = result;
            this.plugin.saveSettings();
            this.scheduleRender();
          }).open();
        });
      });
      menu.showAtMouseEvent(evt);
    });
  }
  // 渲染資料夾群組
  renderFoldersGroup(contentEl, currentMode, currentPath, showIgnoredFolders) {
    if (this.isFiltering()) {
      const hasVisibleFolders = this.hasVisibleTopLevelFolders(showIgnoredFolders);
      if (!hasVisibleFolders) {
        return;
      }
    }
    const foldersGroupKey = "__folders__root";
    const foldersNode = contentEl.createDiv({ cls: "ge-explorer-folder-node" });
    const { foldersChildren } = this.createFoldersGroupHeader(foldersNode, foldersGroupKey, currentMode, currentPath, showIgnoredFolders);
    this.expandCurrentFolderPath(currentMode, currentPath);
    this.renderTopLevelFolders(foldersChildren, showIgnoredFolders);
  }
  // 開啟資料夾搜尋
  async openFolderSearch(searchTerm) {
    const activeView = this.app.workspace.getActiveViewOfType(GridView);
    if (activeView) {
      await activeView.setSource("folder", "/", true, searchTerm);
      return;
    }
    const view = await this.plugin.activateView();
    if (view instanceof GridView) {
      await view.clearSelection();
      await view.setSource("", "", true, searchTerm);
    }
  }
  // 創建資料夾群組標頭
  createFoldersGroupHeader(foldersNode, foldersGroupKey, currentMode, currentPath, showIgnoredFolders) {
    var _a;
    const foldersHeader = foldersNode.createDiv({ cls: "ge-explorer-folder-header" });
    const foldersToggle = foldersHeader.createSpan({ cls: "ge-explorer-folder-toggle" });
    let foldersExpanded = this.isExpanded(foldersGroupKey);
    if (!this.expandedPaths.has(foldersGroupKey)) {
      if (this.isFiltering() && this.hasVisibleTopLevelFolders(showIgnoredFolders)) {
        foldersExpanded = true;
      } else {
        const hasAnyExpandedPaths = this.expandedPaths.size > 0;
        foldersExpanded = !hasAnyExpandedPaths;
      }
      this.setExpanded(foldersGroupKey, foldersExpanded);
    } else if (this.isFiltering() && this.hasVisibleTopLevelFolders(showIgnoredFolders)) {
      foldersExpanded = true;
      this.setExpanded(foldersGroupKey, foldersExpanded);
    }
    (0, import_obsidian11.setIcon)(foldersToggle, foldersExpanded ? "chevron-down" : "chevron-right");
    const foldersIcon = foldersHeader.createSpan({ cls: "ge-explorer-folder-icon" });
    (0, import_obsidian11.setIcon)(foldersIcon, "folder");
    const foldersName = foldersHeader.createSpan({ cls: "ge-explorer-folder-name" });
    foldersName.textContent = t ? t("root") : "Root";
    const vaultRoot = this.app.vault.getRoot();
    const rootPath = (_a = vaultRoot.path) != null ? _a : "/";
    if (currentMode === "folder" && (currentPath === rootPath || currentPath === "" || currentPath === "/")) {
      foldersHeader.addClass("is-active");
    }
    this.attachDropTarget(foldersHeader, rootPath);
    const foldersChildren = foldersNode.createDiv({ cls: "ge-explorer-folder-children" });
    if (!foldersExpanded)
      foldersChildren.addClass("is-collapsed");
    foldersHeader.addEventListener("click", async (evt) => {
      var _a2;
      if (evt.target.closest(".ge-explorer-folder-toggle")) {
        const newExpanded = !this.isExpanded(foldersGroupKey);
        this.setExpanded(foldersGroupKey, newExpanded);
        (0, import_obsidian11.setIcon)(foldersToggle, newExpanded ? "chevron-down" : "chevron-right");
        foldersChildren.toggleClass("is-collapsed", !newExpanded);
      } else if (evt.target.closest(".ge-explorer-folder-name")) {
        if (evt.ctrlKey || evt.metaKey) {
          this.openFolderInNewView(rootPath);
          return;
        }
        const isActive = foldersHeader.hasClass("is-active");
        if (isActive) {
          const currentExpanded = this.isExpanded(foldersGroupKey);
          const newExpanded = !currentExpanded;
          (0, import_obsidian11.setIcon)(foldersToggle, newExpanded ? "chevron-down" : "chevron-right");
          foldersChildren.toggleClass("is-collapsed", !newExpanded);
          this.setExpanded(foldersGroupKey, newExpanded);
          return;
        }
        const root = this.app.vault.getRoot();
        const view = await this.plugin.activateView();
        if (view instanceof GridView)
          await view.setSource("folder", (_a2 = root.path) != null ? _a2 : "/");
      } else {
        const newExpanded = !this.isExpanded(foldersGroupKey);
        this.setExpanded(foldersGroupKey, newExpanded);
        (0, import_obsidian11.setIcon)(foldersToggle, newExpanded ? "chevron-down" : "chevron-right");
        foldersChildren.toggleClass("is-collapsed", !newExpanded);
      }
    });
    return { foldersHeader, foldersChildren };
  }
  // 展開當前資料夾路徑
  expandCurrentFolderPath(currentMode, currentPath) {
    if (currentMode === "folder" && currentPath) {
      const parts = currentPath.split("/").filter(Boolean);
      let acc = "";
      for (let i = 0; i < parts.length - 1; i++) {
        const part = parts[i];
        acc = acc ? `${acc}/${part}` : part;
        this.setExpanded(acc, true);
      }
    }
  }
  // 渲染頂層資料夾
  renderTopLevelFolders(foldersChildren, showIgnoredFolders) {
    const root = this.app.vault.getRoot();
    const settings = this.plugin.settings;
    let topLevelFolders = root.children.filter((f) => f instanceof import_obsidian11.TFolder).filter((f) => !isFolderIgnored(f, settings.ignoredFolders, settings.ignoredFolderPatterns, showIgnoredFolders));
    if (this.isFiltering()) {
      topLevelFolders = topLevelFolders.filter((f) => this.shouldShowFolder(f));
    }
    topLevelFolders.sort((a, b) => a.name.localeCompare(b.name));
    for (const child of topLevelFolders) {
      let expanded = this.isExpanded(child.path);
      if (this.isFiltering()) {
        const hasMatchingChildren = this.hasMatchingChildren(child);
        expanded = hasMatchingChildren || expanded;
      }
      this.renderFolderNode(child, foldersChildren, expanded, 2);
    }
  }
  /**
   * 渲染單一資料夾節點（遞迴方法）
   * @param folder 要渲染的資料夾物件
   * @param parentEl 父容器元素
   * @param expanded 是否展開狀態
   * @param depth 縮排深度，用於視覺層級顯示
   */
  renderFolderNode(folder, parentEl, expanded = false, depth = 0) {
    const nodeEl = parentEl.createDiv({ cls: "ge-explorer-folder-node" });
    const header = this.createFolderHeader(nodeEl, folder, expanded, depth);
    const childrenContainer = this.createFolderChildren(nodeEl, expanded);
    this.setupFolderInteractions(header, folder, expanded, childrenContainer);
    this.renderChildFolders(folder, childrenContainer, depth);
  }
  // 創建資料夾標頭
  createFolderHeader(nodeEl, folder, expanded, depth) {
    const header = nodeEl.createDiv({ cls: "ge-explorer-folder-header" });
    header.style.paddingLeft = `${Math.max(0, depth) * 14}px`;
    const toggle = header.createSpan({ cls: "ge-explorer-folder-toggle" });
    const icon = header.createSpan({ cls: "ge-explorer-folder-icon" });
    const name = header.createSpan({ cls: "ge-explorer-folder-name" });
    name.textContent = folder.name || "/";
    this.setupFolderIcon(folder, name, toggle, expanded);
    this.highlightActiveFolder(folder, header);
    this.attachDropTarget(header, folder.path);
    if (!this.hasVisibleChildren(folder)) {
      header.addClass("ge-no-children");
    }
    return header;
  }
  // 設置資料夾圖示
  setupFolderIcon(folder, name, toggle, expanded) {
    var _a, _b;
    const iconFromFrontmatter = this.getFolderIconFromFrontmatter(folder, name);
    if (!iconFromFrontmatter) {
      const customFolderIcon = (_b = (_a = this.plugin.settings) == null ? void 0 : _a.customFolderIcon) != null ? _b : "";
      if (customFolderIcon && name) {
        name.textContent = `${customFolderIcon} ${folder.name || "/"}`.trim();
      }
    }
    this.setupToggleIcon(folder, toggle, expanded);
  }
  // 從 frontmatter 獲取資料夾圖示
  getFolderIconFromFrontmatter(folder, name) {
    var _a, _b;
    try {
      const notePath = `${folder.path}/${folder.name}.md`;
      const noteFile = this.app.vault.getAbstractFileByPath(notePath);
      if (noteFile instanceof import_obsidian11.TFile) {
        const metadata = (_a = this.app.metadataCache.getFileCache(noteFile)) == null ? void 0 : _a.frontmatter;
        const colorValue = metadata == null ? void 0 : metadata.color;
        if (colorValue) {
          (_b = name.parentElement) == null ? void 0 : _b.addClass(`ge-folder-color-${colorValue}`);
        }
        const iconValue = metadata == null ? void 0 : metadata.icon;
        if (iconValue && name) {
          name.textContent = `${iconValue} ${folder.name || "/"}`;
          return true;
        }
      }
    } catch (error) {
      console.warn("\u7372\u53D6\u8CC7\u6599\u593E frontmatter \u5716\u793A\u6642\u767C\u751F\u932F\u8AA4:", error);
    }
    return false;
  }
  // 設置切換圖示
  setupToggleIcon(folder, toggle, expanded) {
    var _a;
    const settings = this.plugin.settings;
    const activeGrid = this.app.workspace.getActiveViewOfType(GridView);
    const showIgnoredFolders = (_a = activeGrid == null ? void 0 : activeGrid.showIgnoredFolders) != null ? _a : false;
    const hasVisibleChildren = folder.children.filter((f) => f instanceof import_obsidian11.TFolder).some((f) => !isFolderIgnored(f, settings.ignoredFolders, settings.ignoredFolderPatterns, showIgnoredFolders));
    if (!hasVisibleChildren) {
      toggle.innerHTML = "";
      toggle.addClass("ge-explorer-toggle-empty");
    } else {
      toggle.removeClass("ge-explorer-toggle-empty");
      (0, import_obsidian11.setIcon)(toggle, expanded ? "chevron-down" : "chevron-right");
    }
  }
  // 高亮活躍資料夾
  highlightActiveFolder(folder, header) {
    const activeGrid = this.app.workspace.getActiveViewOfType(GridView);
    if ((activeGrid == null ? void 0 : activeGrid.sourceMode) === "folder" && (activeGrid == null ? void 0 : activeGrid.sourcePath) === folder.path) {
      header.addClass("is-active");
    }
  }
  // 創建資料夾子容器
  createFolderChildren(nodeEl, expanded) {
    const childrenContainer = nodeEl.createDiv({ cls: "ge-explorer-folder-children" });
    if (!expanded)
      childrenContainer.addClass("is-collapsed");
    return childrenContainer;
  }
  // 設置資料夾互動事件
  setupFolderInteractions(header, folder, expanded, childrenContainer) {
    header.addEventListener("click", (evt) => this.handleFolderClick(evt, folder, header, childrenContainer));
    header.addEventListener("contextmenu", (evt) => this.handleFolderContextMenu(evt, folder));
  }
  /**
   * 處理資料夾的點擊事件
   * 區分點擊切換箭頭、資料夾名稱和空白區域的不同行為
   * @param evt 點擊事件
   * @param folder 被點擊的資料夾
   * @param header 資料夾標頭元素
   * @param childrenContainer 子資料夾容器元素
   */
  handleFolderClick(evt, folder, header, childrenContainer) {
    const toggle = header.querySelector(".ge-explorer-folder-toggle");
    if (evt.target.closest(".ge-explorer-folder-toggle")) {
      this.handleToggleClick(folder, toggle, childrenContainer);
    } else if (evt.target.closest(".ge-explorer-folder-name")) {
      this.handleFolderNameClick(evt, folder, header, toggle, childrenContainer);
    } else {
      const isActive = header.hasClass("is-active");
      if (!this.hasVisibleChildren(folder)) {
        if (!isActive) {
          this.openFolderInGrid(folder.path);
        }
      } else {
        this.handleToggleClick(folder, toggle, childrenContainer);
      }
    }
  }
  /**
   * 處理切換箭頭的點擊事件
   * 純粹的展開/收合功能，不會開啟 GridView
   * @param folder 被點擊的資料夾
   * @param toggle 切換箭頭元素
   * @param childrenContainer 子資料夾容器元素
   */
  // 處理切換箭頭點擊
  handleToggleClick(folder, toggle, childrenContainer) {
    if (!this.hasVisibleChildren(folder)) {
      toggle.innerHTML = "";
      toggle.addClass("ge-explorer-toggle-empty");
      return;
    }
    const currentExpanded = this.isExpanded(folder.path);
    const newExpanded = !currentExpanded;
    toggle.removeClass("ge-explorer-toggle-empty");
    (0, import_obsidian11.setIcon)(toggle, newExpanded ? "chevron-down" : "chevron-right");
    childrenContainer.toggleClass("is-collapsed", !newExpanded);
    this.setExpanded(folder.path, newExpanded);
  }
  /**
   * 處理資料夾名稱的點擊事件
   * 簡化邏輯：只有已選取狀態下再次點擊才展開/收合，否則直接進入資料夾
   * @param evt 滑鼠點擊事件
   * @param folder 被點擊的資料夾
   * @param header 資料夾標頭元素
   * @param toggle 切換箭頭元素
   * @param childrenContainer 子資料夾容器元素
   */
  // 處理資料夾名稱點擊
  handleFolderNameClick(evt, folder, header, toggle, childrenContainer) {
    if (evt.ctrlKey || evt.metaKey) {
      this.openFolderInNewView(folder.path);
      return;
    }
    const hasChildren = this.hasVisibleChildren(folder);
    const isActive = header.hasClass("is-active");
    if (isActive && hasChildren) {
      const currentExpanded = this.isExpanded(folder.path);
      const newExpanded = !currentExpanded;
      (0, import_obsidian11.setIcon)(toggle, newExpanded ? "chevron-down" : "chevron-right");
      childrenContainer.toggleClass("is-collapsed", !newExpanded);
      this.setExpanded(folder.path, newExpanded);
      return;
    }
    if (isActive && !hasChildren) {
      return;
    }
    this.openFolderInGrid(folder.path);
  }
  // 渲染暫存區群組
  renderStashGroup(contentEl) {
    if (this.isFiltering()) {
      const visibleFiles = this.getVisibleStashFiles();
      if (visibleFiles.length === 0) {
        return;
      }
    }
    const groupKey = "__stash__";
    const { nodeEl, header, children } = this.createStashGroupStructure(contentEl, groupKey);
    this.setupStashGroupInteractions(header, nodeEl, groupKey, children);
    this.cleanupStashFiles();
    this.renderStashItems(children);
  }
  // 創建暫存區群組結構
  createStashGroupStructure(contentEl, groupKey) {
    const nodeEl = contentEl.createDiv({ cls: "ge-explorer-folder-node ge-explorer-stash-node" });
    const header = nodeEl.createDiv({ cls: "ge-explorer-folder-header" });
    const toggle = header.createSpan({ cls: "ge-explorer-folder-toggle" });
    let expanded = this.isExpanded(groupKey);
    if (this.isFiltering()) {
      const visibleFiles = this.getVisibleStashFiles();
      if (visibleFiles.length > 0) {
        expanded = true;
        this.setExpanded(groupKey, expanded);
      }
    }
    (0, import_obsidian11.setIcon)(toggle, expanded ? "chevron-down" : "chevron-right");
    const icon = header.createSpan({ cls: "ge-explorer-folder-icon" });
    (0, import_obsidian11.setIcon)(icon, "inbox");
    const name = header.createSpan({ cls: "ge-explorer-folder-name" });
    name.textContent = t("stash");
    const children = nodeEl.createDiv({ cls: "ge-explorer-folder-children" });
    if (!expanded)
      children.addClass("is-collapsed");
    return { nodeEl, header, children, toggle };
  }
  // 設置暫存區群組互動
  setupStashGroupInteractions(header, nodeEl, groupKey, children) {
    const toggle = header.querySelector(".ge-explorer-folder-toggle");
    header.addEventListener("click", () => {
      const newExpanded = !this.isExpanded(groupKey);
      this.setExpanded(groupKey, newExpanded);
      (0, import_obsidian11.setIcon)(toggle, newExpanded ? "chevron-down" : "chevron-right");
      children.toggleClass("is-collapsed", !newExpanded);
    });
    header.addEventListener("contextmenu", (evt) => {
      evt.preventDefault();
      const menu = new import_obsidian11.Menu();
      menu.addItem((item) => {
        item.setTitle(t("clear")).setIcon("trash").onClick(() => this.clearStash());
      });
      menu.addItem((item) => {
        item.setTitle(t("save_stash_as_markdown")).setIcon("file-plus").onClick(() => this.saveStashAsMarkdown());
      });
      menu.showAtMouseEvent(evt);
    });
    this.setupStashDropTarget(nodeEl);
  }
  // 設置暫存區拖放目標
  setupStashDropTarget(nodeEl) {
    if (!import_obsidian11.Platform.isDesktop)
      return;
    let currentDropTarget = null;
    let insertPosition = "end";
    let targetIndex = -1;
    nodeEl.addEventListener("dragover", (e) => {
      var _a, _b;
      if ((_b = (_a = e.dataTransfer) == null ? void 0 : _a.types) == null ? void 0 : _b.includes("application/obsidian-ge-stash"))
        return;
      e.preventDefault();
      if (e.dataTransfer)
        e.dataTransfer.dropEffect = "copy";
      this.clearStashInsertIndicators(nodeEl);
      const stashItems = nodeEl.querySelectorAll(".ge-explorer-stash-item");
      const mouseY = e.clientY;
      let closestItem = null;
      let closestDistance = Infinity;
      let insertBefore = false;
      stashItems.forEach((item, index) => {
        const rect = item.getBoundingClientRect();
        const itemCenterY = rect.top + rect.height / 2;
        const distance = Math.abs(mouseY - itemCenterY);
        if (distance < closestDistance) {
          closestDistance = distance;
          closestItem = item;
          insertBefore = mouseY < itemCenterY;
          targetIndex = insertBefore ? index : index + 1;
        }
      });
      if (closestItem && closestDistance < 50) {
        currentDropTarget = closestItem;
        insertPosition = insertBefore ? "before" : "after";
        if (insertBefore) {
          closestItem.addClass("ge-stash-insert-before");
        } else {
          closestItem.addClass("ge-stash-insert-after");
        }
      } else {
        currentDropTarget = null;
        insertPosition = "end";
        targetIndex = stashItems.length;
        nodeEl.addClass("ge-dragover");
      }
    });
    nodeEl.addEventListener("dragleave", (e) => {
      const rect = nodeEl.getBoundingClientRect();
      const x = e.clientX;
      const y = e.clientY;
      if (x < rect.left || x > rect.right || y < rect.top || y > rect.bottom) {
        this.clearStashInsertIndicators(nodeEl);
        nodeEl.removeClass("ge-dragover");
        currentDropTarget = null;
      }
    });
    nodeEl.addEventListener("drop", async (e) => {
      var _a, _b;
      if ((_b = (_a = e.dataTransfer) == null ? void 0 : _a.types) == null ? void 0 : _b.includes("application/obsidian-ge-stash"))
        return;
      e.preventDefault();
      this.clearStashInsertIndicators(nodeEl);
      nodeEl.removeClass("ge-dragover");
      await this.handleStashDrop(e, targetIndex);
      currentDropTarget = null;
      insertPosition = "end";
      targetIndex = -1;
    });
  }
  // 清除暫存區插入指示器
  clearStashInsertIndicators(nodeEl) {
    const items = nodeEl.querySelectorAll(".ge-explorer-stash-item");
    items.forEach((item) => {
      item.removeClass("ge-stash-insert-before");
      item.removeClass("ge-stash-insert-after");
    });
  }
  // 清理無效的暫存檔案
  cleanupStashFiles() {
    const before = this.stashFilePaths.length;
    this.stashFilePaths = this.stashFilePaths.filter(
      (p) => this.app.vault.getAbstractFileByPath(p) instanceof import_obsidian11.TFile
    );
    if (this.stashFilePaths.length !== before) {
      this.persistStashToSettings();
    }
  }
  // 渲染暫存項目
  renderStashItems(children) {
    this.renderStashDropzone(children);
    const visibleFiles = this.getVisibleStashFiles();
    visibleFiles.forEach((file) => this.renderStashItem(children, file, visibleFiles));
  }
  // 渲染暫存拖放區
  renderStashDropzone(children) {
    var _a;
    const dropzone = children.createDiv({ cls: "ge-explorer-folder-header ge-explorer-mode-item ge-explorer-stash-dropzone" });
    const dzIcon = dropzone.createSpan({ cls: "ge-explorer-folder-icon" });
    (0, import_obsidian11.setIcon)(dzIcon, "plus");
    const dzName = dropzone.createSpan({ cls: "ge-explorer-folder-name" });
    dzName.textContent = ((_a = t) == null ? void 0 : _a("drop_files_here")) || "Drop files here to stash";
    dropzone.style.pointerEvents = "auto";
    dropzone.style.cursor = "pointer";
    dropzone.setAttr("role", "button");
    dropzone.setAttr("tabindex", "0");
    dropzone.addEventListener("click", (evt) => {
      evt.stopPropagation();
      this.openFileSuggestionForStash();
    });
  }
  // 打開檔案模糊搜尋並加入暫存區
  openFileSuggestionForStash() {
    const self = this;
    class FileSuggest extends import_obsidian11.FuzzySuggestModal {
      getItems() {
        return self.app.vault.getMarkdownFiles();
      }
      getItemText(file) {
        return file.path;
      }
      onChooseItem(file) {
        self.addToStash([file.path]);
      }
    }
    new FileSuggest(this.app).open();
  }
  // 將目前暫存區的檔案連結存成新的 Markdown 檔並開啟
  async saveStashAsMarkdown() {
    const files = this.stashFilePaths.map((p) => this.app.vault.getAbstractFileByPath(p)).filter((f) => f instanceof import_obsidian11.TFile);
    if (files.length === 0) {
      return;
    }
    const d = new Date();
    const pad = (n) => n.toString().padStart(2, "0");
    const fileName = `Stash ${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())} ${pad(d.getHours())}${pad(d.getMinutes())}.md`;
    let baseName = fileName.replace(/\.md$/i, "");
    let candidate = `${baseName}.md`;
    let idx = 2;
    while (this.app.vault.getAbstractFileByPath(candidate)) {
      candidate = `${baseName} (${idx}).md`;
      idx++;
    }
    const sourcePath = candidate;
    const lines = files.map((f) => this.app.fileManager.generateMarkdownLink(f, sourcePath));
    const content = lines.join("\n") + "\n";
    const file = await this.app.vault.create(candidate, content);
    await this.app.workspace.getLeaf().openFile(file);
  }
  // 獲取可見的暫存檔案
  getVisibleStashFiles() {
    const allFiles = this.stashFilePaths.map((p) => this.app.vault.getAbstractFileByPath(p)).filter((f) => f instanceof import_obsidian11.TFile);
    return this.isFiltering() ? allFiles.filter((f) => this.matchesQuery(f.basename)) : allFiles;
  }
  // 渲染暫存項目
  renderStashItem(children, file, visibleFiles) {
    const itemEl = children.createDiv({ cls: "ge-explorer-folder-header ge-explorer-mode-item ge-explorer-stash-item" });
    this.setupStashItemIcon(itemEl, file);
    this.setupStashItemLabel(itemEl, file);
    this.setupStashItemClick(itemEl, file, visibleFiles);
    this.setupStashItemContextMenu(itemEl, file);
    this.setupStashItemDrag(itemEl, file);
    this.setupStashItemDrop(itemEl, file);
  }
  // 設置暫存項目圖示
  setupStashItemIcon(itemEl, file) {
    const itemIcon = itemEl.createSpan({ cls: "ge-explorer-folder-icon" });
    const ext = file.extension.toLowerCase();
    if (isImageFile(file)) {
      (0, import_obsidian11.setIcon)(itemIcon, "image");
      itemIcon.addClass("ge-img");
    } else if (isVideoFile(file)) {
      (0, import_obsidian11.setIcon)(itemIcon, "play-circle");
      itemIcon.addClass("ge-video");
    } else if (isAudioFile(file)) {
      (0, import_obsidian11.setIcon)(itemIcon, "music");
      itemIcon.addClass("ge-audio");
    } else if (ext === "pdf") {
      (0, import_obsidian11.setIcon)(itemIcon, "paperclip");
      itemIcon.addClass("ge-pdf");
    } else if (ext === "canvas") {
      (0, import_obsidian11.setIcon)(itemIcon, "layout-dashboard");
      itemIcon.addClass("ge-canvas");
    } else if (ext === "base") {
      (0, import_obsidian11.setIcon)(itemIcon, "layout-list");
      itemIcon.addClass("ge-base");
    } else if (ext === "md" || ext === "txt") {
      (0, import_obsidian11.setIcon)(itemIcon, "file-text");
    } else {
      (0, import_obsidian11.setIcon)(itemIcon, "file");
    }
  }
  // 設置暫存項目標籤
  setupStashItemLabel(itemEl, file) {
    const itemName = itemEl.createSpan({ cls: "ge-explorer-folder-name" });
    itemName.textContent = file.basename;
  }
  // 設置暫存項目點擊事件
  setupStashItemClick(itemEl, file, visibleFiles) {
    itemEl.addEventListener("click", async (evt) => {
      evt.stopPropagation();
      if (isAudioFile(file)) {
        FloatingAudioPlayer.open(this.app, file);
        return;
      }
      if (isImageFile(file) || isVideoFile(file)) {
        const mediaFiles = visibleFiles.filter((f) => isImageFile(f) || isVideoFile(f));
        new MediaModal(this.app, file, mediaFiles).open();
        return;
      }
      const fileCache = this.app.metadataCache.getFileCache(file);
      const fm = fileCache == null ? void 0 : fileCache.frontmatter;
      const isShortcut = !!(fm && fm.type && typeof fm.redirect === "string" && fm.redirect.trim() !== "");
      if (!isShortcut) {
        if (evt.ctrlKey || evt.metaKey) {
          this.app.workspace.getLeaf(true).openFile(file);
        } else {
          this.app.workspace.getLeaf().openFile(file);
        }
        return;
      }
      const view = await this.plugin.activateView();
      if (view instanceof GridView) {
        if (!view.openShortcutFile || !view.openShortcutFile(file)) {
          this.app.workspace.getLeaf().openFile(file);
        }
      } else {
        this.app.workspace.getLeaf().openFile(file);
      }
    });
  }
  // 設置暫存項目右鍵選單
  setupStashItemContextMenu(itemEl, file) {
    itemEl.addEventListener("contextmenu", (evt) => {
      evt.preventDefault();
      evt.stopPropagation();
      const menu = new import_obsidian11.Menu();
      this.app.workspace.trigger("file-menu", menu, file);
      menu.addSeparator();
      menu.addItem((mi) => {
        var _a;
        mi.setTitle(((_a = t) == null ? void 0 : _a("remove")) || "Remove").setIcon("x").onClick(() => this.removeFromStash(file.path));
      });
      menu.showAtMouseEvent(evt);
    });
  }
  // 設置暫存項目拖拽
  setupStashItemDrag(itemEl, file) {
    if (!import_obsidian11.Platform.isDesktop)
      return;
    itemEl.setAttr("draggable", "true");
    itemEl.addEventListener("dragstart", (event) => {
      var _a;
      if (!event.dataTransfer)
        return;
      const mdLink = this.app.fileManager.generateMarkdownLink(file, "");
      event.dataTransfer.setData("text/plain", mdLink);
      (_a = event.dataTransfer) == null ? void 0 : _a.setData("application/obsidian-grid-explorer-files", JSON.stringify([file.path]));
      event.dataTransfer.setData("application/obsidian-ge-stash", file.path);
      event.dataTransfer.effectAllowed = "all";
      this.createDragPreview(event, file.basename);
    });
  }
  // 創建拖拽預覽
  createDragPreview(event, basename) {
    var _a;
    const dragImage = document.createElement("div");
    dragImage.className = "ge-custom-drag-preview";
    dragImage.textContent = basename;
    document.body.appendChild(dragImage);
    (_a = event.dataTransfer) == null ? void 0 : _a.setDragImage(dragImage, 20, 20);
    setTimeout(() => document.body.removeChild(dragImage), 0);
  }
  // 設置暫存項目拖放
  setupStashItemDrop(itemEl, file) {
    if (!import_obsidian11.Platform.isDesktop)
      return;
    itemEl.addEventListener("dragover", (event) => {
      var _a;
      const types = ((_a = event.dataTransfer) == null ? void 0 : _a.types) || [];
      if (Array.from(types).includes("application/obsidian-ge-stash")) {
        event.preventDefault();
        const rect = itemEl.getBoundingClientRect();
        const before = event.clientY - rect.top < rect.height / 2;
        itemEl.toggleClass("ge-stash-insert-before", before);
        itemEl.toggleClass("ge-stash-insert-after", !before);
      }
    });
    itemEl.addEventListener("dragleave", () => {
      itemEl.removeClass("ge-stash-insert-before");
      itemEl.removeClass("ge-stash-insert-after");
    });
    itemEl.addEventListener("drop", (event) => {
      var _a;
      const sourcePath = (_a = event.dataTransfer) == null ? void 0 : _a.getData("application/obsidian-ge-stash");
      if (!sourcePath || sourcePath === file.path)
        return;
      event.preventDefault();
      itemEl.removeClass("ge-stash-insert-before");
      itemEl.removeClass("ge-stash-insert-after");
      this.reorderStashItem(sourcePath, file.path, event, itemEl);
    });
  }
  // 重新排序暫存項目
  reorderStashItem(sourcePath, targetPath, event, itemEl) {
    const srcIndex = this.stashFilePaths.indexOf(sourcePath);
    const destIndex = this.stashFilePaths.indexOf(targetPath);
    if (srcIndex === -1 || destIndex === -1)
      return;
    const rect = itemEl.getBoundingClientRect();
    const before = event.clientY - rect.top < rect.height / 2;
    let insertIndex = before ? destIndex : destIndex + 1;
    const newList = [...this.stashFilePaths];
    newList.splice(srcIndex, 1);
    if (srcIndex < insertIndex)
      insertIndex -= 1;
    insertIndex = Math.max(0, Math.min(insertIndex, newList.length));
    newList.splice(insertIndex, 0, sourcePath);
    this.stashFilePaths = newList;
    this.app.workspace.requestSaveLayout();
    this.persistStashToSettings();
    this.scheduleRender();
  }
  // 處理暫存區拖放
  async handleStashDrop(event, insertIndex) {
    var _a, _b, _c, _d, _e, _f;
    try {
      const dt = event.dataTransfer;
      if (!dt)
        return;
      const obsidianPaths = await extractObsidianPathsFromDT(dt);
      if (obsidianPaths.length > 0) {
        const { currentPath } = this.getCurrentGridState();
        const srcPath = currentPath || "/";
        const resolved = [];
        for (let p of obsidianPaths) {
          try {
            if (!p)
              continue;
            let file = this.app.vault.getAbstractFileByPath(p);
            if (!(file instanceof import_obsidian11.TFile)) {
              const alt = (_b = (_a = this.app.metadataCache).getFirstLinkpathDest) == null ? void 0 : _b.call(_a, p, srcPath);
              if (alt instanceof import_obsidian11.TFile)
                file = alt;
            }
            if (file instanceof import_obsidian11.TFile)
              resolved.push(file.path);
          } catch (e) {
            console.warn("\u89E3\u6790 obsidian:// \u8DEF\u5F91\u5931\u6557\uFF0C\u5DF2\u7565\u904E", p, e);
          }
        }
        if (resolved.length > 0)
          this.addToStash(resolved, insertIndex);
        return;
      }
      const text = dt.getData("text/plain");
      if (text) {
        const { currentPath } = this.getCurrentGridState();
        const srcPath = currentPath || "/";
        const lines = text.split(/\r?\n/).map((s) => s.trim()).filter((v) => v.length > 0);
        const resolvedPaths = [];
        for (let line of lines) {
          try {
            if (line.startsWith("!"))
              line = line.substring(1);
            let resolved = null;
            if (line.startsWith("[[") && line.endsWith("]]")) {
              const inner = line.slice(2, -2);
              const parsed = (0, import_obsidian11.parseLinktext)(inner);
              const dest = (_d = (_c = this.app.metadataCache).getFirstLinkpathDest) == null ? void 0 : _d.call(_c, parsed.path, srcPath);
              if (dest instanceof import_obsidian11.TFile)
                resolved = dest;
            } else {
              const direct = this.app.vault.getAbstractFileByPath(line);
              if (direct instanceof import_obsidian11.TFile) {
                resolved = direct;
              } else {
                const dest = (_f = (_e = this.app.metadataCache).getFirstLinkpathDest) == null ? void 0 : _f.call(_e, line, srcPath);
                if (dest instanceof import_obsidian11.TFile)
                  resolved = dest;
              }
            }
            if (resolved instanceof import_obsidian11.TFile) {
              resolvedPaths.push(resolved.path);
            } else {
              resolvedPaths.push(line);
            }
          } catch (err) {
            console.error("\u89E3\u6790\u62D6\u653E\u6587\u5B57\u70BA\u6A94\u6848\u8DEF\u5F91\u6642\u767C\u751F\u932F\u8AA4:", err);
          }
        }
        if (resolvedPaths.length > 0) {
          this.addToStash(resolvedPaths, insertIndex);
        }
      }
    } catch (error) {
      console.error("\u8655\u7406\u66AB\u5B58\u5340\u62D6\u653E\u6642\u767C\u751F\u932F\u8AA4:", error);
    }
  }
  // 添加到暫存區
  addToStash(paths, insertIndex) {
    const validPaths = [];
    for (const raw of paths) {
      const p = typeof raw === "string" ? raw : "";
      if (!p)
        continue;
      const file = this.app.vault.getAbstractFileByPath(p);
      if (file instanceof import_obsidian11.TFile && !this.stashFilePaths.includes(p)) {
        validPaths.push(p);
      }
    }
    if (validPaths.length === 0)
      return;
    if (insertIndex !== void 0 && insertIndex >= 0) {
      const newList = [...this.stashFilePaths];
      const actualIndex = Math.min(insertIndex, newList.length);
      newList.splice(actualIndex, 0, ...validPaths);
      this.stashFilePaths = newList;
    } else {
      this.stashFilePaths = [...this.stashFilePaths, ...validPaths];
    }
    this.app.workspace.requestSaveLayout();
    this.persistStashToSettings();
    this.scheduleRender();
  }
  // 從暫存區移除
  removeFromStash(path) {
    this.stashFilePaths = this.stashFilePaths.filter((p) => p !== path);
    this.app.workspace.requestSaveLayout();
    this.persistStashToSettings();
    this.scheduleRender();
  }
  // 清空暫存區
  clearStash() {
    this.stashFilePaths = [];
    this.app.workspace.requestSaveLayout();
    this.persistStashToSettings();
    this.scheduleRender();
  }
  // 檢查資料夾是否有可見子項目
  hasVisibleChildren(folder) {
    var _a;
    const settings = this.plugin.settings;
    const activeGrid = this.app.workspace.getActiveViewOfType(GridView);
    const showIgnoredFolders = (_a = activeGrid == null ? void 0 : activeGrid.showIgnoredFolders) != null ? _a : false;
    return folder.children.filter((f) => f instanceof import_obsidian11.TFolder).some((f) => !isFolderIgnored(f, settings.ignoredFolders, settings.ignoredFolderPatterns, showIgnoredFolders));
  }
  // 在網格視圖中開啟資料夾
  async openFolderInGrid(folderPath) {
    const view = await this.plugin.activateView();
    if (view instanceof GridView) {
      await view.setSource("folder", folderPath);
    }
  }
  /**
   * 處理資料夾的右鍵點擊事件
   * @param evt 點擊事件
   * @param folder 被點擊的資料夾
   */
  handleFolderContextMenu(evt, folder) {
    evt.preventDefault();
    const menu = new import_obsidian11.Menu();
    this.addContextMenuItems(menu, folder);
    menu.showAtMouseEvent(evt);
  }
  /**
   * 添加資料夾的右鍵選單項目
   * @param menu 右鍵選單
   * @param folder 資料夾
   */
  // 添加右鍵選單項目
  addContextMenuItems(menu, folder) {
    menu.addItem((item) => {
      item.setTitle(t("open_in_new_grid_view")).setIcon("grid").onClick(() => this.openFolderInNewView(folder.path));
    });
    menu.addSeparator();
    this.addNewItemMenuItems(menu, folder);
    menu.addSeparator();
    this.addFolderNoteMenuItems(menu, folder);
    menu.addSeparator();
    this.addFolderManagementMenuItems(menu, folder);
  }
  /**
   * 添加新增項目的右鍵選單項目
   * @param menu 右鍵選單
   * @param folder 資料夾
   */
  addNewItemMenuItems(menu, folder) {
    menu.addItem((item) => {
      item.setTitle(t("new_note")).setIcon("square-pen").onClick(async () => {
        await createNewNote(this.app, folder.path);
      });
    });
    menu.addItem((item) => {
      item.setTitle(t("new_folder")).setIcon("folder").onClick(async () => {
        await createNewFolder(this.app, folder.path, () => {
          this.scheduleRender();
        });
      });
    });
    menu.addItem((item) => {
      item.setTitle(t("new_canvas")).setIcon("layout-dashboard").onClick(async () => {
        await createNewCanvas(this.app, folder.path);
      });
    });
    menu.addItem((item) => {
      item.setTitle(t("new_base")).setIcon("layout-dashboard").onClick(async () => {
        await createNewBase(this.app, folder.path);
      });
    });
    menu.addItem((item) => {
      item.setTitle(t("new_shortcut")).setIcon("shuffle").onClick(async () => {
        const modal = new ShortcutSelectionModal(this.app, this.plugin, async (option) => {
          await createShortcut(this.app, folder.path, option);
        });
        modal.open();
      });
    });
  }
  /**
   * 添加資料夾筆記的右鍵選單項目
   * @param menu 右鍵選單
   * @param folder 資料夾
   */
  // 添加資料夾筆記選單項目
  addFolderNoteMenuItems(menu, folder) {
    const notePath = `${folder.path}/${folder.name}.md`;
    const noteFile = this.app.vault.getAbstractFileByPath(notePath);
    if (noteFile instanceof import_obsidian11.TFile) {
      this.addExistingFolderNoteItems(menu, folder, noteFile);
    } else {
      this.addCreateFolderNoteItem(menu, folder);
    }
  }
  /**
   * 添加已存在的資料夾筆記的右鍵選單項目
   * @param menu 右鍵選單
   * @param folder 資料夾
   * @param noteFile 資料夾筆記文件
   */
  // 添加已存在資料夾筆記的選單項目
  addExistingFolderNoteItems(menu, folder, noteFile) {
    menu.addItem((item) => {
      item.setTitle(t("open_folder_note")).setIcon("panel-left-open").onClick(async () => {
        const view = await this.plugin.activateView();
        if (view instanceof GridView) {
          if (!view.openShortcutFile(noteFile)) {
            this.app.workspace.getLeaf().openFile(noteFile);
          }
        } else {
          this.app.workspace.getLeaf().openFile(noteFile);
        }
      });
    });
    menu.addItem((item) => {
      item.setTitle(t("edit_folder_note_settings")).setIcon("settings-2").onClick(async () => {
        const view = await this.plugin.activateView();
        if (view instanceof GridView) {
          showFolderNoteSettingsModal(this.app, this.plugin, folder, view);
        }
      });
    });
    menu.addItem((item) => {
      item.setTitle(t("delete_folder_note")).setIcon("folder-x").onClick(() => {
        this.app.fileManager.trashFile(noteFile);
      });
    });
  }
  /**
   * 添加創建資料夾筆記的右鍵選單項目
   * @param menu 右鍵選單
   * @param folder 資料夾
   */
  // 添加創建資料夾筆記的選單項目
  addCreateFolderNoteItem(menu, folder) {
    menu.addItem((item) => {
      item.setTitle(t("create_folder_note")).setIcon("file-cog").onClick(async () => {
        const view = await this.plugin.activateView();
        if (view instanceof GridView) {
          showFolderNoteSettingsModal(this.app, this.plugin, folder, view);
        }
      });
    });
  }
  /**
   * 添加資料夾管理的右鍵選單項目
   * @param menu 右鍵選單
   * @param folder 資料夾
   */
  // 添加資料夾管理選單項目
  addFolderManagementMenuItems(menu, folder) {
    const isIgnored = this.plugin.settings.ignoredFolders.includes(folder.path);
    menu.addItem((item) => {
      item.setTitle(isIgnored ? t("unignore_folder") : t("ignore_folder")).setIcon(isIgnored ? "folder-up" : "folder-x").onClick(async () => {
        if (isIgnored) {
          this.plugin.settings.ignoredFolders = this.plugin.settings.ignoredFolders.filter((p) => p !== folder.path);
        } else {
          this.plugin.settings.ignoredFolders.push(folder.path);
        }
        await this.plugin.saveSettings();
      });
    });
    menu.addItem((item) => {
      item.setTitle(t("move_folder")).setIcon("folder-cog").onClick(async () => {
        const view = await this.plugin.activateView();
        if (view instanceof GridView) {
          new showFolderMoveModal(this.plugin, folder, view).open();
        }
      });
    });
    menu.addItem((item) => {
      item.setTitle(t("rename_folder")).setIcon("file-cog").onClick(async () => {
        const view = await this.plugin.activateView();
        if (view instanceof GridView) {
          showFolderRenameModal(this.app, this.plugin, folder, view);
        }
      });
    });
    menu.addItem((item) => {
      item.setWarning(true);
      item.setTitle(t("delete_folder")).setIcon("trash").onClick(async () => {
        await this.app.fileManager.trashFile(folder);
      });
    });
  }
  /**
   * 渲染子資料夾
   * @param folder 父資料夾
   * @param childrenContainer 子資料夾容器
   * @param depth 递归深度
   */
  // 渲染子資料夾
  renderChildFolders(folder, childrenContainer, depth) {
    var _a;
    const settings = this.plugin.settings;
    const activeGrid = this.app.workspace.getActiveViewOfType(GridView);
    const showIgnoredFolders = (_a = activeGrid == null ? void 0 : activeGrid.showIgnoredFolders) != null ? _a : false;
    let childFolders = folder.children.filter((f) => f instanceof import_obsidian11.TFolder).filter((f) => !isFolderIgnored(f, settings.ignoredFolders, settings.ignoredFolderPatterns, showIgnoredFolders));
    if (this.isFiltering()) {
      childFolders = childFolders.filter((f) => this.shouldShowFolder(f));
    }
    childFolders.sort((a, b) => a.name.localeCompare(b.name));
    for (const child of childFolders) {
      const expanded = this.isFiltering() ? true : this.isExpanded(child.path);
      this.renderFolderNode(child, childrenContainer, expanded, depth + 1);
    }
  }
  /**
   * 判斷指定路徑的資料夾是否處於展開狀態
   * @param path 資料夾路徑
   * @returns 是否展開
   */
  // 檢查路徑是否已展開
  isExpanded(path) {
    return this.expandedPaths.has(path);
  }
  /**
   * 設定資料夾的展開狀態
   * 當狀態發生變化時，會觸發版面配置的保存
   * @param path 資料夾路徑
   * @param value 是否展開
   */
  // 設置路徑展開狀態
  setExpanded(path, value) {
    const before = this.expandedPaths.has(path);
    if (value) {
      this.expandedPaths.add(path);
    } else {
      this.expandedPaths.delete(path);
    }
    const after = this.expandedPaths.has(path);
    if (before !== after) {
      this.app.workspace.requestSaveLayout();
    }
  }
  // 設置拖放目標
  attachDropTarget(headerEl, folderPath) {
    if (!import_obsidian11.Platform.isDesktop)
      return;
    headerEl.dataset.folderPath = folderPath;
    headerEl.addEventListener("dragover", this.handleDragOver.bind(this));
    headerEl.addEventListener("dragleave", this.handleDragLeave.bind(this));
    headerEl.addEventListener("drop", this.handleDrop.bind(this, folderPath));
  }
  // 處理拖拽懸停
  handleDragOver(event) {
    event.preventDefault();
    event.dataTransfer.dropEffect = "move";
    const header = event.currentTarget;
    if (header)
      header.addClass("ge-dragover");
  }
  // 處理拖拽離開
  handleDragLeave(event) {
    const header = event.currentTarget;
    if (header)
      header.removeClass("ge-dragover");
  }
  // 處理拖放事件
  async handleDrop(folderPath, evt) {
    const event = evt;
    if (typeof event.preventDefault === "function") {
      event.preventDefault();
    }
    const header = event.currentTarget;
    if (header && typeof header.removeClass === "function") {
      header.removeClass("ge-dragover");
    }
    if (!event.dataTransfer)
      return;
    if (await this.handleMultiFileDrop(event, folderPath))
      return;
  }
  // 處理多檔案拖放
  async handleMultiFileDrop(event, folderPath) {
    var _a, _b, _c, _d;
    if (!event.dataTransfer)
      return false;
    const filePath = event.dataTransfer.getData("text/plain");
    if (!filePath)
      return false;
    const srcPath = folderPath || "/";
    const lines = filePath.split(/\r?\n/).map((s) => s.trim()).filter((v) => v.length > 0);
    let handled = false;
    for (const line of lines) {
      try {
        let text = line;
        if (text.startsWith("!"))
          text = text.substring(1);
        let resolvedFile = null;
        if (text.startsWith("[[") && text.endsWith("]]")) {
          const inner = text.slice(2, -2);
          const parsed = (0, import_obsidian11.parseLinktext)(inner);
          const dest = (_b = (_a = this.app.metadataCache).getFirstLinkpathDest) == null ? void 0 : _b.call(_a, parsed.path, srcPath);
          if (dest instanceof import_obsidian11.TFile)
            resolvedFile = dest;
        } else {
          const direct = this.app.vault.getAbstractFileByPath(text);
          if (direct instanceof import_obsidian11.TFile) {
            resolvedFile = direct;
          } else {
            const dest = (_d = (_c = this.app.metadataCache).getFirstLinkpathDest) == null ? void 0 : _d.call(_c, text, srcPath);
            if (dest instanceof import_obsidian11.TFile)
              resolvedFile = dest;
          }
        }
        if (resolvedFile instanceof import_obsidian11.TFile) {
          const newPath = (0, import_obsidian11.normalizePath)(`${folderPath}/${resolvedFile.name}`);
          if (resolvedFile.path !== newPath) {
            await this.app.fileManager.renameFile(resolvedFile, newPath);
          }
          handled = true;
        }
      } catch (error) {
        console.error("An error occurred while moving one of the files (ExplorerView):", error);
      }
    }
    return handled;
  }
  /**
   * 刪除被移除節點及其子孫的展開記錄
   * 當資料夾被刪除時，清理相關的展開狀態，避免記憶體洩漏
   * @param prefix 被刪除的資料夾路徑前綴
   */
  removeExpandedPrefix(prefix) {
    const pathsToDelete = Array.from(this.expandedPaths).filter(
      (path) => path === prefix || path.startsWith(prefix + "/")
    );
    pathsToDelete.forEach((path) => this.expandedPaths.delete(path));
  }
  /**
   * 重新命名時，更新展開記錄的路徑前綴
   * 當資料夾重新命名時，更新所有相關的展開狀態路徑
   * @param oldPrefix 舊的資料夾路徑前綴
   * @param newPrefix 新的資料夾路徑前綴
   */
  renameExpandedPrefix(oldPrefix, newPrefix) {
    if (oldPrefix === newPrefix)
      return;
    const pathsToUpdate = Array.from(this.expandedPaths).filter((path) => path === oldPrefix || path.startsWith(oldPrefix + "/")).map((path) => ({
      oldPath: path,
      // 如果是完全匹配，直接使用新前綴；否則替換前綴部分
      newPath: path === oldPrefix ? newPrefix : newPrefix + path.slice(oldPrefix.length)
    }));
    pathsToUpdate.forEach(({ oldPath, newPath }) => {
      this.expandedPaths.delete(oldPath);
      this.expandedPaths.add(newPath);
    });
  }
};

// src/modal/folderSelectionModal.ts
var import_obsidian12 = require("obsidian");
function showFolderSelectionModal(app, plugin, activeView, buttonElement) {
  new FolderSelectionModal(app, plugin, activeView, buttonElement).open();
}
var FolderSelectionModal = class extends import_obsidian12.Modal {
  // 搜尋選項元素
  constructor(app, plugin, activeView, buttonElement) {
    super(app);
    this.folderOptions = [];
    this.selectedIndex = -1;
    this.searchOption = null;
    this.plugin = plugin;
    this.activeView = activeView;
    this.buttonElement = buttonElement;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.buttonElement) {
      this.modalEl.addClass("ge-popup-modal");
      this.positionAsPopup();
    }
    const searchContainer = contentEl.createEl("div", {
      cls: "ge-folder-search-container"
    });
    this.searchInput = searchContainer.createEl("input", {
      cls: "ge-folder-search-input",
      attr: {
        type: "text",
        placeholder: t("filter_folders"),
        ...import_obsidian12.Platform.isMobile && { tabindex: "1" }
      }
    });
    this.folderOptionsContainer = contentEl.createEl("div", {
      cls: "ge-folder-options-container",
      attr: import_obsidian12.Platform.isMobile ? { tabindex: "0" } : {}
    });
    this.searchInput.addEventListener("input", () => {
      const searchTerm = this.searchInput.value.toLowerCase();
      this.filterFolderOptions(searchTerm);
      this.updateSearchOption(this.searchInput.value.trim());
    });
    this.searchInput.addEventListener("keydown", this.handleKeyDown.bind(this));
    const enabledCustomModes = this.plugin.settings.customModes.filter((m) => {
      var _a;
      return (_a = m.enabled) != null ? _a : true;
    });
    if (enabledCustomModes.length > 0) {
      enabledCustomModes.forEach((mode) => {
        const customOption = this.folderOptionsContainer.createEl("div", {
          cls: "ge-grid-view-folder-option",
          text: `${mode.icon} ${mode.displayName}`
        });
        customOption.addEventListener("click", async () => {
          if (this.activeView) {
            await this.activeView.setSource(mode.internalName);
          } else {
            const view = await this.plugin.activateView();
            if (view instanceof GridView) {
              await view.setSource(mode.internalName);
            }
          }
          this.close();
        });
        this.folderOptions.push(customOption);
      });
    }
    if (this.plugin.settings.showBookmarksMode) {
      const bookmarksPlugin = this.app.internalPlugins.plugins.bookmarks;
      if (bookmarksPlugin == null ? void 0 : bookmarksPlugin.enabled) {
        const bookmarkOption = this.folderOptionsContainer.createEl("div", {
          cls: "ge-grid-view-folder-option",
          text: `\u{1F4D1} ${t("bookmarks_mode")}`
        });
        bookmarkOption.addEventListener("click", async () => {
          if (this.activeView) {
            await this.activeView.setSource("bookmarks");
          } else {
            const view = await this.plugin.activateView();
            if (view instanceof GridView) {
              await view.setSource("bookmarks");
            }
          }
          this.close();
        });
        this.folderOptions.push(bookmarkOption);
      }
    }
    if (this.plugin.settings.showSearchMode) {
      const searchLeaf = this.app.workspace.getLeavesOfType("search")[0];
      if (searchLeaf) {
        const searchView = searchLeaf.view;
        const searchInputEl = searchView.searchComponent ? searchView.searchComponent.inputEl : null;
        if (searchInputEl) {
          if (searchInputEl.value.trim().length > 0) {
            const searchOption = this.folderOptionsContainer.createEl("div", {
              cls: "ge-grid-view-folder-option",
              text: `\u{1F50D} ${t("search_results")}: ${searchInputEl.value}`
            });
            searchOption.addEventListener("click", async () => {
              if (this.activeView) {
                await this.activeView.setSource("search");
              } else {
                const view = await this.plugin.activateView();
                if (view instanceof GridView) {
                  await view.setSource("search");
                }
              }
              this.close();
            });
            this.folderOptions.push(searchOption);
          }
        }
      }
    }
    if (this.plugin.settings.showBacklinksMode) {
      const activeFile = this.app.workspace.getActiveFile();
      if (activeFile) {
        const activeFileName = activeFile ? `: ${activeFile.basename}` : "";
        const backlinksOption = this.folderOptionsContainer.createEl("div", {
          cls: "ge-grid-view-folder-option",
          text: `\u{1F517} ${t("backlinks_mode")}${activeFileName}`
        });
        backlinksOption.addEventListener("click", async () => {
          if (this.activeView) {
            await this.activeView.setSource("backlinks");
          } else {
            const view = await this.plugin.activateView();
            if (view instanceof GridView) {
              await view.setSource("backlinks");
            }
          }
          this.close();
        });
        this.folderOptions.push(backlinksOption);
      }
    }
    if (this.plugin.settings.showOutgoinglinksMode) {
      const activeFile = this.app.workspace.getActiveFile();
      if (activeFile) {
        const activeFileName = activeFile ? `: ${activeFile.basename}` : "";
        const outgoinglinksOption = this.folderOptionsContainer.createEl("div", {
          cls: "ge-grid-view-folder-option",
          text: `\u{1F517} ${t("outgoinglinks_mode")}${activeFileName}`
        });
        outgoinglinksOption.addEventListener("click", async () => {
          if (this.activeView) {
            await this.activeView.setSource("outgoinglinks");
          } else {
            const view = await this.plugin.activateView();
            if (view instanceof GridView) {
              await view.setSource("outgoinglinks");
            }
          }
          this.close();
        });
        this.folderOptions.push(outgoinglinksOption);
      }
    }
    if (this.plugin.settings.showRecentFilesMode) {
      const recentFilesOption = this.folderOptionsContainer.createEl("div", {
        cls: "ge-grid-view-folder-option",
        text: `\u{1F4C5} ${t("recent_files_mode")}`
      });
      recentFilesOption.addEventListener("click", async () => {
        if (this.activeView) {
          await this.activeView.setSource("recent-files");
        } else {
          const view = await this.plugin.activateView();
          if (view instanceof GridView) {
            await view.setSource("recent-files");
          }
        }
        this.close();
      });
      this.folderOptions.push(recentFilesOption);
    }
    if (this.plugin.settings.showAllFilesMode) {
      const allFilesOption = this.folderOptionsContainer.createEl("div", {
        cls: "ge-grid-view-folder-option",
        text: `\u{1F4D4} ${t("all_files_mode")}`
      });
      allFilesOption.addEventListener("click", async () => {
        if (this.activeView) {
          await this.activeView.setSource("all-files");
        } else {
          const view = await this.plugin.activateView();
          if (view instanceof GridView) {
            await view.setSource("all-files");
          }
        }
        this.close();
      });
      this.folderOptions.push(allFilesOption);
    }
    if (this.plugin.settings.showRandomNoteMode) {
      const randomNoteOption = this.folderOptionsContainer.createEl("div", {
        cls: "ge-grid-view-folder-option",
        text: `\u{1F3B2} ${t("random_note_mode")}`
      });
      randomNoteOption.addEventListener("click", async () => {
        if (this.activeView) {
          await this.activeView.setSource("random-note");
        } else {
          const view = await this.plugin.activateView();
          if (view instanceof GridView) {
            await view.setSource("random-note");
          }
        }
        this.close();
      });
      this.folderOptions.push(randomNoteOption);
    }
    if (this.plugin.settings.showTasksMode) {
      const tasksOption = this.folderOptionsContainer.createEl("div", {
        cls: "ge-grid-view-folder-option",
        text: `\u2611\uFE0F ${t("tasks_mode")}`
      });
      tasksOption.addEventListener("click", async () => {
        if (this.activeView) {
          await this.activeView.setSource("tasks");
        } else {
          const view = await this.plugin.activateView();
          if (view instanceof GridView) {
            await view.setSource("tasks");
          }
        }
        this.close();
      });
      this.folderOptions.push(tasksOption);
    }
    const customFolderIcon = this.plugin.settings.customFolderIcon;
    const rootFolderOption = this.folderOptionsContainer.createEl("div", {
      cls: "ge-grid-view-folder-option",
      text: `${customFolderIcon} /`
    });
    rootFolderOption.addEventListener("click", async () => {
      if (this.activeView) {
        await this.activeView.setSource("folder", "/");
      } else {
        const view = await this.plugin.activateView();
        if (view instanceof GridView) {
          await view.setSource("folder", "/");
        }
      }
      this.close();
    });
    this.folderOptions.push(rootFolderOption);
    const folders = this.app.vault.getAllFolders().filter((folder) => {
      return !isFolderIgnored(
        folder,
        this.plugin.settings.ignoredFolders,
        this.plugin.settings.ignoredFolderPatterns,
        false
        // 在選擇資料夾時不考慮 showIgnoredFolders 設置
      );
    }).sort((a, b) => a.path.localeCompare(b.path));
    folders.forEach((folder) => {
      const depth = (folder.path.match(/\//g) || []).length;
      const displayName = folder.path.split("/").pop() || "/";
      const folderOption = this.folderOptionsContainer.createEl("div", {
        cls: "ge-grid-view-folder-option",
        attr: {
          "data-depth": depth.toString(),
          "data-path": folder.path
        }
      });
      const prefixSpan = document.createElement("span");
      prefixSpan.className = "ge-folder-tree-prefix";
      prefixSpan.textContent = depth > 0 ? "   ".repeat(depth - 1) + "\u2514 " : "";
      folderOption.appendChild(prefixSpan);
      const icon = document.createElement("span");
      icon.textContent = `${customFolderIcon} `;
      folderOption.appendChild(icon);
      const nameSpan = document.createElement("span");
      nameSpan.textContent = displayName;
      folderOption.appendChild(nameSpan);
      folderOption.addEventListener("click", async () => {
        if (this.activeView) {
          await this.activeView.setSource("folder", folder.path);
        } else {
          const view = await this.plugin.activateView();
          if (view instanceof GridView) {
            await view.setSource("folder", folder.path);
          }
        }
        this.close();
      });
      this.folderOptions.push(folderOption);
    });
    this.folderOptions.forEach((option, index) => {
      option.addEventListener("mouseenter", () => {
        this.updateSelection(index);
      });
    });
  }
  // 更新搜尋選項
  updateSearchOption(searchTerm) {
    if (this.searchOption) {
      this.searchOption.remove();
      const index = this.folderOptions.indexOf(this.searchOption);
      if (index > -1) {
        this.folderOptions.splice(index, 1);
      }
      this.searchOption = null;
    }
    if (searchTerm.length > 0) {
      this.searchOption = this.folderOptionsContainer.createEl("div", {
        cls: "ge-grid-view-folder-option ge-search-option",
        text: `\u{1F50D} ${t("search_for")} "${searchTerm}"`
      });
      this.searchOption.addEventListener("click", async () => {
        if (this.activeView) {
          await this.activeView.setSource("folder", "/", true, searchTerm);
        } else {
          const view = await this.plugin.activateView();
          if (view instanceof GridView) {
            await view.setSource("folder", "/", true, searchTerm);
          }
        }
        this.close();
      });
      this.searchOption.addEventListener("mouseenter", () => {
        const index = this.folderOptions.length;
        this.updateSelection(index);
      });
      this.folderOptions.push(this.searchOption);
    }
  }
  // 處理鍵盤事件
  handleKeyDown(event) {
    const visibleOptions = this.getVisibleOptions();
    if (visibleOptions.length === 0)
      return;
    switch (event.key) {
      case "ArrowDown":
        event.preventDefault();
        this.moveSelection(1, visibleOptions);
        break;
      case "ArrowUp":
        event.preventDefault();
        this.moveSelection(-1, visibleOptions);
        break;
      case "Enter":
        event.preventDefault();
        if (this.selectedIndex >= 0) {
          const selectedOption = this.folderOptions[this.selectedIndex];
          if (selectedOption && selectedOption.style.display !== "none") {
            requestAnimationFrame(() => {
              selectedOption.click();
            });
          }
        }
        break;
      case "Escape":
        this.close();
        break;
    }
  }
  // 移動選擇
  moveSelection(direction, visibleOptions) {
    let currentVisibleIndex = -1;
    if (this.selectedIndex >= 0) {
      const selectedOption = this.folderOptions[this.selectedIndex];
      currentVisibleIndex = visibleOptions.indexOf(selectedOption);
    }
    let newVisibleIndex = currentVisibleIndex + direction;
    if (newVisibleIndex < 0) {
      newVisibleIndex = visibleOptions.length - 1;
    } else if (newVisibleIndex >= visibleOptions.length) {
      newVisibleIndex = 0;
    }
    if (newVisibleIndex >= 0 && newVisibleIndex < visibleOptions.length) {
      const newSelectedOption = visibleOptions[newVisibleIndex];
      const newIndex = this.folderOptions.indexOf(newSelectedOption);
      this.updateSelection(newIndex);
      newSelectedOption.scrollIntoView({ block: "nearest" });
    }
  }
  // 更新選擇
  updateSelection(index) {
    if (this.selectedIndex >= 0 && this.selectedIndex < this.folderOptions.length) {
      this.folderOptions[this.selectedIndex].removeClass("ge-selected-option");
    }
    this.selectedIndex = index;
    if (this.selectedIndex >= 0 && this.selectedIndex < this.folderOptions.length) {
      this.folderOptions[this.selectedIndex].addClass("ge-selected-option");
    }
  }
  // 獲取當前可見的選項
  getVisibleOptions() {
    return this.folderOptions.filter(
      (option) => option.style.display !== "none"
    );
  }
  // 篩選資料夾選項
  filterFolderOptions(searchTerm) {
    let hasVisibleOptions = false;
    this.folderOptions.forEach((option) => {
      var _a, _b;
      if (option === this.searchOption) {
        return;
      }
      const dataPath = option.getAttribute("data-path");
      if (dataPath) {
        const nameSpan = option.querySelector("span:last-child");
        if (nameSpan) {
          if (searchTerm !== "") {
            nameSpan.textContent = dataPath;
          } else {
            nameSpan.textContent = dataPath.split("/").pop() || "/";
          }
        }
        const prefixSpan = option.querySelector(".ge-folder-tree-prefix");
        if (prefixSpan) {
          if (searchTerm !== "") {
            prefixSpan.textContent = "";
          } else {
            const depthAttr = option.getAttribute("data-depth");
            const depth = depthAttr ? parseInt(depthAttr, 10) : 0;
            prefixSpan.textContent = depth > 0 ? "   ".repeat(depth - 1) + "\u2514 " : "";
          }
        }
      }
      const text = ((_a = option.textContent) == null ? void 0 : _a.toLowerCase()) || "";
      const fullPath = ((_b = option.getAttribute("data-path")) == null ? void 0 : _b.toLowerCase()) || "";
      if (searchTerm === "" || text.includes(searchTerm) || fullPath.includes(searchTerm)) {
        option.style.display = "block";
        hasVisibleOptions = true;
      } else {
        option.style.display = "none";
      }
    });
    this.updateSelection(-1);
    if (hasVisibleOptions) {
      const visibleOptions = this.getVisibleOptions();
      if (visibleOptions.length > 0) {
        const firstVisibleIndex = this.folderOptions.indexOf(visibleOptions[0]);
        this.updateSelection(firstVisibleIndex);
      }
    }
  }
  // 將 modal 定位到按鈕下方，類似 Chrome popup 樣式
  positionAsPopup() {
    if (!this.buttonElement)
      return;
    const buttonRect = this.buttonElement.getBoundingClientRect();
    const modalEl = this.modalEl;
    const contentEl = this.contentEl;
    modalEl.addClass("ge-popup-modal-reset");
    contentEl.addClass("ge-popup-content");
    const viewportWidth = window.innerWidth;
    const viewportHeight = window.innerHeight;
    let left = buttonRect.left + buttonRect.width / 2 - 150;
    let top = buttonRect.bottom + 8;
    if (left + 300 > viewportWidth) {
      left = viewportWidth - 300 - 16;
    }
    if (left < 16) {
      left = 16;
    }
    if (top + 400 > viewportHeight && buttonRect.top - 400 > 0) {
      top = buttonRect.top - 8;
    }
    modalEl.style.left = `${left}px`;
    modalEl.style.top = `${top}px`;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/modal/searchModal.ts
var import_obsidian13 = require("obsidian");
var SearchModal = class extends import_obsidian13.Modal {
  constructor(app, gridView, defaultQuery, buttonElement) {
    super(app);
    this.gridView = gridView;
    this.defaultQuery = defaultQuery;
    this.buttonElement = buttonElement;
  }
  onOpen() {
    var _a, _b;
    const { contentEl } = this;
    contentEl.empty();
    if (this.buttonElement) {
      this.modalEl.addClass("ge-popup-modal");
      this.positionAsPopup();
    }
    const searchContainer = contentEl.createDiv("ge-search-container");
    const searchInputWrapper = searchContainer.createDiv("ge-search-input-wrapper");
    const tagDisplayArea = searchInputWrapper.createDiv("ge-search-tag-display-area");
    const searchInput = searchInputWrapper.createEl("input", {
      type: "text",
      value: this.defaultQuery,
      placeholder: t("search_placeholder"),
      cls: "ge-search-input"
    });
    const inputContainer = searchInputWrapper.createDiv("ge-input-container");
    inputContainer.appendChild(searchInput);
    const clearButton = inputContainer.createDiv("ge-search-clear-button");
    clearButton.style.display = this.defaultQuery ? "flex" : "none";
    (0, import_obsidian13.setIcon)(clearButton, "x");
    const tagSuggestionContainer = contentEl.createDiv("ge-search-tag-suggestions");
    tagSuggestionContainer.style.display = "none";
    const allTagsArr = Object.keys(((_b = (_a = this.app.metadataCache).getTags) == null ? void 0 : _b.call(_a)) || {}).map((t2) => t2.substring(1));
    let tagSuggestions = [];
    let selectedSuggestionIndex = -1;
    const updateTagSuggestions = () => {
      const match = searchInput.value.substring(0, searchInput.selectionStart || 0).match(/#([^#\s]*)$/);
      if (!match) {
        tagSuggestionContainer.style.display = "none";
        tagSuggestionContainer.empty();
        selectedSuggestionIndex = -1;
        return;
      }
      const query = match[1].toLowerCase();
      tagSuggestions = allTagsArr.filter((t2) => t2.toLowerCase().startsWith(query)).slice(0, 10);
      if (tagSuggestions.length === 0) {
        tagSuggestionContainer.style.display = "none";
        selectedSuggestionIndex = -1;
        return;
      }
      tagSuggestionContainer.empty();
      tagSuggestions.forEach((tag, idx) => {
        const item = tagSuggestionContainer.createDiv("ge-search-tag-suggestion-item");
        item.textContent = `#${tag}`;
        if (idx === selectedSuggestionIndex)
          item.addClass("is-selected");
        item.addEventListener("mousedown", (e) => {
          e.preventDefault();
          applySuggestion(idx);
        });
      });
      tagSuggestionContainer.style.display = "block";
    };
    const applySuggestion = (index) => {
      if (index < 0 || index >= tagSuggestions.length)
        return;
      const value = searchInput.value.trim();
      const cursor = searchInput.selectionStart || 0;
      const beforeMatch = value.substring(0, cursor).replace(/#([^#\\s]*)$/, `#${tagSuggestions[index]} `);
      const afterCursor = value.substring(cursor);
      searchInput.value = beforeMatch + afterCursor;
      searchInput.value = searchInput.value.trim();
      const newCursorPos = beforeMatch.length;
      searchInput.setSelectionRange(newCursorPos, newCursorPos);
      tagSuggestionContainer.style.display = "none";
      tagSuggestionContainer.empty();
      selectedSuggestionIndex = -1;
      clearButton.style.display = searchInput.value ? "flex" : "none";
      renderTagButtons();
    };
    searchInput.addEventListener("input", () => {
      clearButton.style.display = searchInput.value ? "flex" : "none";
      updateTagSuggestions();
      renderTagButtons();
    });
    searchInput.addEventListener("keydown", (e) => {
      if (tagSuggestionContainer.style.display === "none")
        return;
      if (e.key === "ArrowDown") {
        e.preventDefault();
        selectedSuggestionIndex = (selectedSuggestionIndex + 1) % tagSuggestions.length;
        updateTagSuggestions();
      } else if (e.key === "ArrowUp") {
        e.preventDefault();
        selectedSuggestionIndex = (selectedSuggestionIndex - 1 + tagSuggestions.length) % tagSuggestions.length;
        updateTagSuggestions();
      } else if (e.key === "Enter") {
        if (selectedSuggestionIndex >= 0) {
          e.preventDefault();
          applySuggestion(selectedSuggestionIndex);
        }
      }
    });
    clearButton.addEventListener("click", () => {
      searchInput.value = "";
      clearButton.style.display = "none";
      tagDisplayArea.empty();
      tagDisplayArea.style.display = "none";
      searchInput.focus();
    });
    const searchOptionsContainer = contentEl.createDiv("ge-search-options-container");
    const searchScopeContainer = searchOptionsContainer.createDiv("ge-search-scope-container");
    const searchScopeCheckbox = searchScopeContainer.createEl("input", {
      type: "checkbox",
      cls: "ge-search-scope-checkbox"
    });
    searchScopeCheckbox.checked = this.gridView.searchCurrentLocationOnly;
    searchScopeContainer.createEl("span", {
      text: t("search_current_location_only"),
      cls: "ge-search-scope-label"
    });
    if (this.gridView.sourceMode === "random-note") {
      searchScopeContainer.style.display = "none";
      searchScopeCheckbox.checked = false;
    }
    const searchNameContainer = searchOptionsContainer.createDiv("ge-search-name-container");
    const searchNameCheckbox = searchNameContainer.createEl("input", {
      type: "checkbox",
      cls: "ge-search-name-checkbox"
    });
    searchNameCheckbox.checked = this.gridView.searchFilesNameOnly;
    searchNameContainer.createEl("span", {
      text: t("search_files_name_only"),
      cls: "ge-search-name-label"
    });
    const searchMediaFilesContainer = searchOptionsContainer.createDiv("ge-search-media-files-container");
    const searchMediaFilesCheckbox = searchMediaFilesContainer.createEl("input", {
      type: "checkbox",
      cls: "ge-search-media-files-checkbox"
    });
    searchMediaFilesCheckbox.checked = this.gridView.searchMediaFiles;
    searchMediaFilesContainer.createEl("span", {
      text: t("search_media_files"),
      cls: "ge-search-media-files-label"
    });
    if (!this.gridView.plugin.settings.showMediaFiles || this.gridView.sourceMode === "backlinks") {
      searchMediaFilesContainer.style.display = "none";
      searchMediaFilesCheckbox.checked = false;
      this.gridView.searchMediaFiles = false;
    }
    searchScopeContainer.addEventListener("click", (e) => {
      if (e.target !== searchScopeCheckbox) {
        searchScopeCheckbox.checked = !searchScopeCheckbox.checked;
        this.gridView.searchCurrentLocationOnly = !searchScopeCheckbox.checked;
      }
    });
    searchNameContainer.addEventListener("click", (e) => {
      if (e.target !== searchNameCheckbox) {
        searchNameCheckbox.checked = !searchNameCheckbox.checked;
        this.gridView.searchFilesNameOnly = !searchNameCheckbox.checked;
      }
    });
    searchMediaFilesContainer.addEventListener("click", (e) => {
      if (e.target !== searchMediaFilesCheckbox) {
        searchMediaFilesCheckbox.checked = !searchMediaFilesCheckbox.checked;
        this.gridView.searchMediaFiles = !searchMediaFilesCheckbox.checked;
      }
    });
    searchScopeCheckbox.addEventListener("change", () => {
      this.gridView.searchCurrentLocationOnly = !searchScopeCheckbox.checked;
    });
    searchMediaFilesCheckbox.addEventListener("change", () => {
      this.gridView.searchMediaFiles = !searchMediaFilesCheckbox.checked;
    });
    const buttonContainer = contentEl.createDiv("ge-button-container");
    const searchButton = buttonContainer.createEl("button", {
      text: t("search")
    });
    const cancelButton = buttonContainer.createEl("button", {
      text: t("cancel")
    });
    const renderTagButtons = () => {
      tagDisplayArea.empty();
      const inputValue = searchInput.value.trim();
      if (!inputValue) {
        tagDisplayArea.style.display = "none";
        return;
      }
      const terms = inputValue.split(/\s+/);
      if (terms.length === 0) {
        tagDisplayArea.style.display = "none";
        return;
      }
      tagDisplayArea.style.display = "flex";
      let currentIndex = 0;
      const termPositions = [];
      terms.forEach((term) => {
        if (!term)
          return;
        const startIndex = inputValue.indexOf(term, currentIndex);
        if (startIndex === -1)
          return;
        const endIndex = startIndex + term.length;
        termPositions.push({
          term,
          startIndex,
          endIndex
        });
        currentIndex = endIndex;
      });
      termPositions.forEach((termInfo) => {
        const tagButton = tagDisplayArea.createDiv("ge-search-tag-button");
        tagButton.textContent = termInfo.term;
        if (termInfo.term.startsWith("#")) {
          tagButton.addClass("is-tag");
        }
        const deleteButton = tagButton.createDiv("ge-search-tag-delete-button");
        (0, import_obsidian13.setIcon)(deleteButton, "x");
        deleteButton.addEventListener("click", (e) => {
          e.stopPropagation();
          const newValue = inputValue.substring(0, termInfo.startIndex) + inputValue.substring(termInfo.endIndex);
          searchInput.value = newValue.trim();
          const inputEvent = new Event("input", { bubbles: true });
          searchInput.dispatchEvent(inputEvent);
          searchInput.focus();
        });
      });
    };
    const originalSearchQuery = this.gridView.searchQuery;
    const originalsearchCurrentLocationOnly = this.gridView.searchCurrentLocationOnly;
    const originalSearchFilesNameOnly = this.gridView.searchFilesNameOnly;
    const originalSearchMediaFiles = this.gridView.searchMediaFiles;
    const performSearch = () => {
      this.gridView.pushHistory(
        this.gridView.sourceMode,
        this.gridView.sourcePath,
        originalSearchQuery,
        originalsearchCurrentLocationOnly,
        originalSearchFilesNameOnly,
        originalSearchMediaFiles
      );
      this.gridView.searchQuery = searchInput.value;
      this.gridView.searchCurrentLocationOnly = searchScopeCheckbox.checked;
      this.gridView.searchFilesNameOnly = searchNameCheckbox.checked;
      this.gridView.searchMediaFiles = searchMediaFilesCheckbox.checked;
      this.gridView.clearSelection();
      this.gridView.app.workspace.requestSaveLayout();
      this.gridView.render();
      this.close();
    };
    searchButton.addEventListener("click", performSearch);
    searchInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        performSearch();
      }
    });
    cancelButton.addEventListener("click", () => {
      this.close();
    });
    renderTagButtons();
    searchInput.focus();
    searchInput.setSelectionRange(searchInput.value.length, searchInput.value.length);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
  positionAsPopup() {
    if (!this.buttonElement)
      return;
    const modalEl = this.modalEl;
    const contentEl = this.contentEl;
    modalEl.addClass("ge-popup-modal-reset");
    contentEl.addClass("ge-popup-content");
    const buttonRect = this.buttonElement.getBoundingClientRect();
    const viewportWidth = window.innerWidth;
    const viewportHeight = window.innerHeight;
    let top = buttonRect.bottom + 4;
    let left = buttonRect.left + buttonRect.width / 2 - 150;
    if (left + 300 > viewportWidth) {
      left = viewportWidth - 300 - 10;
    }
    if (left < 10) {
      left = 10;
    }
    const estimatedHeight = 400;
    if (top + estimatedHeight > viewportHeight && buttonRect.top - estimatedHeight > 0) {
      top = buttonRect.top - estimatedHeight - 4;
    }
    modalEl.style.position = "fixed";
    modalEl.style.top = `${top}px`;
    modalEl.style.left = `${left}px`;
    modalEl.style.transform = "none";
  }
};
function showSearchModal(app, gridView, defaultQuery = "", buttonElement) {
  new SearchModal(app, gridView, defaultQuery, buttonElement).open();
}

// src/renderHeaderButton.ts
function renderHeaderButton(gridView) {
  const headerButtonsDiv = gridView.containerEl.createDiv("ge-header-buttons");
  headerButtonsDiv.addEventListener("click", (event) => {
    if (event.target === headerButtonsDiv) {
      event.preventDefault();
      const gridContainer = gridView.containerEl.querySelector(".ge-grid-container");
      if (gridContainer) {
        gridContainer.scrollTo({
          top: 0,
          behavior: "smooth"
        });
      }
    }
  });
  const backButton = headerButtonsDiv.createEl("button", { attr: { "aria-label": t("back") } });
  (0, import_obsidian14.setIcon)(backButton, "arrow-left");
  backButton.addEventListener("click", async (event) => {
    var _a, _b, _c;
    event.preventDefault();
    event.stopPropagation();
    if (gridView.recentSources.length > 0) {
      const currentKey = JSON.stringify({
        mode: gridView.sourceMode,
        path: gridView.sourcePath,
        searchQuery: gridView.searchQuery,
        searchCurrentLocationOnly: gridView.searchCurrentLocationOnly,
        searchFilesNameOnly: gridView.searchFilesNameOnly,
        searchMediaFiles: gridView.searchMediaFiles
      });
      gridView.futureSources.unshift(currentKey);
      if (gridView.futureSources.length > 10) {
        gridView.futureSources.length = 10;
      }
      const lastSource = JSON.parse(gridView.recentSources[0]);
      gridView.recentSources.shift();
      await gridView.setSource(
        lastSource.mode,
        lastSource.path || "",
        false,
        // 不記錄到歷史
        lastSource.searchQuery || "",
        (_a = lastSource.searchCurrentLocationOnly) != null ? _a : false,
        (_b = lastSource.searchFilesNameOnly) != null ? _b : false,
        (_c = lastSource.searchMediaFiles) != null ? _c : false
      );
      updateNavButtons();
    }
  });
  const forwardButton = headerButtonsDiv.createEl("button", { attr: { "aria-label": t("forward") } });
  (0, import_obsidian14.setIcon)(forwardButton, "arrow-right");
  forwardButton.addEventListener("click", async (event) => {
    var _a, _b, _c;
    event.preventDefault();
    event.stopPropagation();
    if (gridView.futureSources.length > 0) {
      const currentKey = JSON.stringify({
        mode: gridView.sourceMode,
        path: gridView.sourcePath,
        searchQuery: gridView.searchQuery,
        searchCurrentLocationOnly: gridView.searchCurrentLocationOnly,
        searchFilesNameOnly: gridView.searchFilesNameOnly,
        searchMediaFiles: gridView.searchMediaFiles
      });
      gridView.recentSources.unshift(currentKey);
      if (gridView.recentSources.length > 10) {
        gridView.recentSources.length = 10;
      }
      const nextSource = JSON.parse(gridView.futureSources[0]);
      gridView.futureSources.shift();
      await gridView.setSource(
        nextSource.mode,
        nextSource.path || "",
        false,
        // 不記錄到歷史
        nextSource.searchQuery || "",
        (_a = nextSource.searchCurrentLocationOnly) != null ? _a : false,
        (_b = nextSource.searchFilesNameOnly) != null ? _b : false,
        (_c = nextSource.searchMediaFiles) != null ? _c : false
      );
      updateNavButtons();
    }
  });
  backButton.addEventListener("contextmenu", (event) => {
    if (gridView.recentSources.length > 0) {
      event.preventDefault();
      const menu2 = new import_obsidian14.Menu();
      gridView.recentSources.forEach((sourceInfoStr, index) => {
        try {
          const sourceInfo = JSON.parse(sourceInfoStr);
          const { mode, path } = sourceInfo;
          let displayText = "";
          let icon = "";
          switch (mode) {
            case "folder":
              displayText = path || "/";
              icon = "folder";
              break;
            case "bookmarks":
              displayText = t("bookmarks_mode");
              icon = "bookmark";
              break;
            case "search":
              displayText = t("search_results");
              icon = "search";
              break;
            case "backlinks":
              displayText = t("backlinks_mode");
              icon = "links-coming-in";
              break;
            case "outgoinglinks":
              displayText = t("outgoinglinks_mode");
              icon = "links-going-out";
              break;
            case "all-files":
              displayText = t("all_files_mode");
              icon = "book-text";
              break;
            case "recent-files":
              displayText = t("recent_files_mode");
              icon = "calendar-days";
              break;
            case "random-note":
              displayText = t("random_note_mode");
              icon = "dice";
              break;
            case "tasks":
              displayText = t("tasks_mode");
              icon = "square-check-big";
              break;
            default:
              if (mode.startsWith("custom-")) {
                const customMode = gridView.plugin.settings.customModes.find((m) => m.internalName === mode);
                displayText = customMode ? customMode.displayName : t("custom_mode");
                icon = "puzzle";
              } else {
                displayText = mode;
                icon = "grid";
              }
          }
          if (sourceInfo.searchQuery) {
            if (!sourceInfo.searchCurrentLocationOnly) {
              displayText = '"' + (sourceInfo.searchQuery || t("search_results")) + '"';
            } else {
              displayText += `: "${sourceInfo.searchQuery}"`;
            }
          }
          menu2.addItem((item) => {
            item.setTitle(`${displayText}`).setIcon(`${icon}`).onClick(async () => {
              var _a, _b, _c;
              const currentKey = JSON.stringify({
                mode: gridView.sourceMode,
                path: gridView.sourcePath,
                searchQuery: gridView.searchQuery,
                searchCurrentLocationOnly: gridView.searchCurrentLocationOnly,
                searchFilesNameOnly: gridView.searchFilesNameOnly,
                searchMediaFiles: gridView.searchMediaFiles
              });
              const clickedIndex = index;
              if (clickedIndex !== -1) {
                const newerHistory = gridView.recentSources.slice(0, clickedIndex);
                const forwardStack = [...newerHistory].reverse();
                gridView.futureSources = [...forwardStack, currentKey, ...gridView.futureSources];
                if (gridView.futureSources.length > 10) {
                  gridView.futureSources.length = 10;
                }
                gridView.recentSources = gridView.recentSources.slice(clickedIndex + 1);
              }
              await gridView.setSource(
                mode,
                path,
                false,
                // 不記錄到歷史
                sourceInfo.searchQuery || "",
                (_a = sourceInfo.searchCurrentLocationOnly) != null ? _a : false,
                (_b = sourceInfo.searchFilesNameOnly) != null ? _b : false,
                (_c = sourceInfo.searchMediaFiles) != null ? _c : false
              );
              updateNavButtons();
            });
          });
        } catch (error) {
          console.error("Failed to parse source info:", error);
        }
      });
      menu2.showAtMouseEvent(event);
    }
  });
  forwardButton.addEventListener("contextmenu", (event) => {
    if (gridView.futureSources.length > 0) {
      event.preventDefault();
      const menu2 = new import_obsidian14.Menu();
      gridView.futureSources.forEach((sourceInfoStr, index) => {
        try {
          const sourceInfo = JSON.parse(sourceInfoStr);
          const { mode, path } = sourceInfo;
          let displayText = "";
          let icon = "";
          switch (mode) {
            case "folder":
              displayText = path || "/";
              icon = "folder";
              break;
            case "bookmarks":
              displayText = t("bookmarks_mode");
              icon = "bookmark";
              break;
            case "search":
              displayText = t("search_results");
              icon = "search";
              break;
            case "backlinks":
              displayText = t("backlinks_mode");
              icon = "links-coming-in";
              break;
            case "outgoinglinks":
              displayText = t("outgoinglinks_mode");
              icon = "links-going-out";
              break;
            case "all-files":
              displayText = t("all_files_mode");
              icon = "book-text";
              break;
            case "recent-files":
              displayText = t("recent_files_mode");
              icon = "calendar-days";
              break;
            case "random-note":
              displayText = t("random_note_mode");
              icon = "dice";
              break;
            case "tasks":
              displayText = t("tasks_mode");
              icon = "square-check-big";
              break;
            default:
              if (mode.startsWith("custom-")) {
                const customMode = gridView.plugin.settings.customModes.find((m) => m.internalName === mode);
                displayText = customMode ? customMode.displayName : t("custom_mode");
                icon = "puzzle";
              } else {
                displayText = mode;
                icon = "grid";
              }
          }
          if (sourceInfo.searchQuery) {
            if (!sourceInfo.searchCurrentLocationOnly) {
              displayText = '"' + (sourceInfo.searchQuery || t("search_results")) + '"';
            } else {
              displayText += `: "${sourceInfo.searchQuery}"`;
            }
          }
          menu2.addItem((item) => {
            item.setTitle(`${displayText}`).setIcon(`${icon}`).onClick(async () => {
              var _a, _b, _c;
              const currentKey = JSON.stringify({
                mode: gridView.sourceMode,
                path: gridView.sourcePath,
                searchQuery: gridView.searchQuery,
                searchCurrentLocationOnly: gridView.searchCurrentLocationOnly,
                searchFilesNameOnly: gridView.searchFilesNameOnly,
                searchMediaFiles: gridView.searchMediaFiles
              });
              const clickedIndex = index;
              let olderFuture = [];
              if (clickedIndex !== -1) {
                olderFuture = gridView.futureSources.slice(0, clickedIndex);
                gridView.futureSources = gridView.futureSources.slice(clickedIndex + 1);
              }
              const backStack = [...olderFuture].reverse();
              gridView.recentSources = [...backStack, currentKey, ...gridView.recentSources];
              if (gridView.recentSources.length > 10) {
                gridView.recentSources.length = 10;
              }
              await gridView.setSource(
                mode,
                path,
                false,
                sourceInfo.searchQuery || "",
                (_a = sourceInfo.searchCurrentLocationOnly) != null ? _a : false,
                (_b = sourceInfo.searchFilesNameOnly) != null ? _b : false,
                (_c = sourceInfo.searchMediaFiles) != null ? _c : false
              );
              updateNavButtons();
            });
          });
        } catch (error) {
          console.error("Failed to parse source info:", error);
        }
      });
      menu2.showAtMouseEvent(event);
    }
  });
  const updateNavButtons = () => {
    backButton.disabled = gridView.recentSources.length === 0;
    forwardButton.disabled = gridView.futureSources.length === 0;
  };
  updateNavButtons();
  const newNoteButton = headerButtonsDiv.createEl("button", { attr: { "aria-label": t("new_note") } });
  (0, import_obsidian14.setIcon)(newNoteButton, "square-pen");
  newNoteButton.addEventListener("click", (event) => {
    event.preventDefault();
    const menu2 = new import_obsidian14.Menu();
    menu2.addItem((item) => {
      item.setTitle(t("new_note")).setIcon("square-pen").onClick(async () => {
        await createNewNote(gridView.app, gridView.sourcePath);
      });
    });
    menu2.addItem((item) => {
      item.setTitle(t("new_folder")).setIcon("folder").onClick(async () => {
        await createNewFolder(gridView.app, gridView.sourcePath, () => {
          requestAnimationFrame(() => {
            gridView.render();
          });
        });
      });
    });
    menu2.addItem((item) => {
      item.setTitle(t("new_canvas")).setIcon("layout-dashboard").onClick(async () => {
        await createNewCanvas(gridView.app, gridView.sourcePath);
      });
    });
    menu2.addItem((item) => {
      item.setTitle(t("new_base")).setIcon("layout-dashboard").onClick(async () => {
        await createNewBase(gridView.app, gridView.sourcePath);
      });
    });
    menu2.addItem((item) => {
      item.setTitle(t("new_shortcut")).setIcon("shuffle").onClick(async () => {
        const modal = new ShortcutSelectionModal(gridView.app, gridView.plugin, async (option) => {
          await createShortcut(gridView.app, gridView.sourcePath, option);
        });
        modal.open();
      });
    });
    menu2.showAtMouseEvent(event);
  });
  const reselectButton = headerButtonsDiv.createEl("button", { attr: { "aria-label": t("reselect") } });
  reselectButton.addEventListener("click", () => {
    showFolderSelectionModal(gridView.app, gridView.plugin, gridView, reselectButton);
  });
  (0, import_obsidian14.setIcon)(reselectButton, "grid");
  const refreshButton = headerButtonsDiv.createEl("button", { attr: { "aria-label": t("refresh") } });
  refreshButton.addEventListener("click", () => {
    if (gridView.sortType === "random") {
      gridView.clearSelection();
    }
    gridView.render();
  });
  (0, import_obsidian14.setIcon)(refreshButton, "refresh-ccw");
  const searchButtonContainer = headerButtonsDiv.createDiv("ge-search-button-container");
  const searchButton = searchButtonContainer.createEl("button", {
    cls: "search-button",
    attr: { "aria-label": t("search") }
  });
  (0, import_obsidian14.setIcon)(searchButton, "search");
  searchButton.addEventListener("click", () => {
    showSearchModal(gridView.app, gridView, gridView.searchQuery, searchButton);
  });
  const menu = new import_obsidian14.Menu();
  menu.addItem((item) => {
    item.setTitle(t("open_new_grid_view")).setIcon("grid").onClick(() => {
      const { workspace } = gridView.app;
      let leaf = null;
      workspace.getLeavesOfType("grid-view");
      switch (gridView.plugin.settings.defaultOpenLocation) {
        case "left":
          leaf = workspace.getLeftLeaf(false);
          break;
        case "right":
          leaf = workspace.getRightLeaf(false);
          break;
        case "tab":
        default:
          leaf = workspace.getLeaf("tab");
          break;
      }
      if (!leaf) {
        leaf = workspace.getLeaf("tab");
      }
      leaf.setViewState({ type: "grid-view", active: true });
      if (leaf.view instanceof GridView) {
        leaf.view.setSource("folder", "/");
      }
      workspace.revealLeaf(leaf);
    });
  });
  menu.addSeparator();
  menu.addItem((item) => {
    item.setTitle(t("vertical_card")).setIcon("layout").setChecked(gridView.baseCardLayout === "vertical").onClick(() => {
      gridView.baseCardLayout = gridView.baseCardLayout === "vertical" ? "horizontal" : "vertical";
      gridView.cardLayout = gridView.baseCardLayout;
      gridView.app.workspace.requestSaveLayout();
      gridView.render();
    });
  });
  menu.addItem((item) => {
    item.setTitle(t("min_mode")).setIcon("minimize-2").setChecked(gridView.minMode).onClick(() => {
      gridView.minMode = !gridView.minMode;
      gridView.app.workspace.requestSaveLayout();
      gridView.render();
    });
  });
  if (gridView.plugin.settings.dateDividerMode !== "none") {
    menu.addItem((item) => {
      item.setTitle(t("show_date_dividers")).setIcon("calendar").setChecked(gridView.showDateDividers).onClick(() => {
        gridView.showDateDividers = !gridView.showDateDividers;
        gridView.app.workspace.requestSaveLayout();
        gridView.render();
      });
    });
  }
  menu.addItem((item) => {
    item.setTitle(t("show_note_tags")).setIcon("tag").setChecked(gridView.showNoteTags).onClick(() => {
      gridView.showNoteTags = !gridView.showNoteTags;
      gridView.app.workspace.requestSaveLayout();
      gridView.render();
    });
  });
  menu.addItem((item) => {
    item.setTitle(t("show_ignored_folders")).setIcon("folder-open-dot").setChecked(gridView.showIgnoredFolders).onClick(() => {
      gridView.showIgnoredFolders = !gridView.showIgnoredFolders;
      gridView.app.workspace.requestSaveLayout();
      gridView.render();
    });
  });
  menu.addSeparator();
  menu.addItem((item) => {
    item.setTitle(t("open_explorer")).setIcon("folder-tree").onClick(() => {
      const existingLeaves = gridView.app.workspace.getLeavesOfType(EXPLORER_VIEW_TYPE);
      if (existingLeaves.length > 0) {
        gridView.app.workspace.revealLeaf(existingLeaves[0]);
        return;
      }
      let leaf = gridView.app.workspace.getLeftLeaf(false);
      if (!leaf)
        leaf = gridView.app.workspace.getLeftLeaf(true);
      if (!leaf)
        leaf = gridView.app.workspace.getLeaf("tab");
      leaf.setViewState({ type: EXPLORER_VIEW_TYPE, active: true });
      gridView.app.workspace.revealLeaf(leaf);
    });
  });
  menu.addItem((item) => {
    item.setTitle(t("open_settings")).setIcon("settings").onClick(() => {
      gridView.app.setting.open();
      gridView.app.setting.openTabById(gridView.plugin.manifest.id);
    });
  });
  const moreOptionsButton = headerButtonsDiv.createEl("button", { attr: { "aria-label": t("more_options") } });
  (0, import_obsidian14.setIcon)(moreOptionsButton, "ellipsis-vertical");
  moreOptionsButton.addEventListener("click", (event) => {
    menu.showAtMouseEvent(event);
  });
  headerButtonsDiv.addEventListener("contextmenu", (event) => {
    if (event.target === headerButtonsDiv) {
      event.preventDefault();
      menu.showAtMouseEvent(event);
    }
  });
}

// src/renderModePath.ts
var import_obsidian15 = require("obsidian");
function renderModePath(gridView) {
  var _a, _b;
  const modeHeaderContainer = gridView.containerEl.createDiv("ge-mode-header-container");
  const modenameContainer = modeHeaderContainer.createDiv("ge-modename-content");
  const rightActions = modeHeaderContainer.createDiv("ge-right-actions");
  if (gridView.sourceMode !== "bookmarks" && gridView.sourceMode !== "recent-files" && gridView.sourceMode !== "random-note") {
    const sortButton = rightActions.createEl("a", {
      cls: "ge-sort-button",
      attr: {
        "aria-label": t("sorting"),
        "href": "#"
      }
    });
    (0, import_obsidian15.setIcon)(sortButton, "arrow-up-narrow-wide");
    sortButton.addEventListener("click", (evt) => {
      evt.preventDefault();
      evt.stopPropagation();
      const menu = new import_obsidian15.Menu();
      const sortOptions = [
        { value: "name-asc", label: t("sort_name_asc"), icon: "a-arrow-up" },
        { value: "name-desc", label: t("sort_name_desc"), icon: "a-arrow-down" },
        { value: "mtime-desc", label: t("sort_mtime_desc"), icon: "clock" },
        { value: "mtime-asc", label: t("sort_mtime_asc"), icon: "clock" },
        { value: "ctime-desc", label: t("sort_ctime_desc"), icon: "calendar" },
        { value: "ctime-asc", label: t("sort_ctime_asc"), icon: "calendar" },
        { value: "random", label: t("sort_random"), icon: "dice" }
      ];
      sortOptions.forEach((option) => {
        menu.addItem((item) => {
          item.setTitle(option.label).setIcon(option.icon).setChecked(gridView.sortType === option.value).onClick(() => {
            gridView.baseSortType = option.value;
            gridView.sortType = option.value;
            gridView.app.workspace.requestSaveLayout();
            gridView.render();
          });
        });
      });
      menu.showAtMouseEvent(evt);
    });
  }
  modenameContainer.addEventListener("click", (event) => {
    if (event.target === modenameContainer) {
      event.preventDefault();
      const gridContainer = gridView.containerEl.querySelector(".ge-grid-container");
      if (gridContainer) {
        gridContainer.scrollTo({
          top: 0,
          behavior: "smooth"
        });
      }
    }
  });
  if (gridView.sourceMode === "folder" && gridView.searchQuery === "") {
    const pathParts = gridView.sourcePath.split("/").filter((part) => part.trim() !== "");
    const paths = [];
    let pathAccumulator = "";
    paths.push({
      name: t("root"),
      path: "/",
      isLast: pathParts.length === 0
    });
    pathParts.forEach((part, index) => {
      pathAccumulator = pathAccumulator ? `${pathAccumulator}/${part}` : part;
      paths.push({
        name: part,
        path: pathAccumulator,
        isLast: index === pathParts.length - 1
      });
    });
    const pathContainer = modenameContainer.createDiv({ cls: "ge-path-container" });
    const customFolderIcon = gridView.plugin.settings.customFolderIcon;
    const pathElements = [];
    paths.forEach((path, index) => {
      const isLast = index === paths.length - 1;
      let pathEl;
      if (isLast) {
        if (path.path === "/") {
          if (gridView.plugin.settings.folderDisplayStyle !== "menu") {
            pathEl = modenameContainer.createEl("span", {
              text: `${customFolderIcon} ${path.name}`.trim(),
              cls: "ge-mode-title"
            });
          } else {
            pathEl = modenameContainer.createEl("a", {
              text: `${customFolderIcon} ${path.name}`.trim(),
              cls: "ge-current-folder"
            });
          }
        } else {
          pathEl = modenameContainer.createEl("a", {
            text: `${customFolderIcon} ${path.name}`.trim(),
            cls: "ge-current-folder"
          });
        }
      } else {
        pathEl = modenameContainer.createEl("a", {
          text: path.name,
          cls: "ge-parent-folder-link"
        });
      }
      (0, import_obsidian15.setTooltip)(pathEl, path.name);
      pathElements.push(pathEl);
    });
    for (let i = 0; i < pathElements.length; i++) {
      const el = pathElements[i];
      pathContainer.appendChild(el);
      if (el.className === "ge-parent-folder-link") {
        const pathIndex = i;
        if (pathIndex < paths.length) {
          const path = paths[pathIndex];
          el.addEventListener("click", async (event) => {
            event.preventDefault();
            event.stopPropagation();
            if (gridView.plugin.settings.folderDisplayStyle === "menu") {
              const menu = new import_obsidian15.Menu();
              menu.addItem((item) => {
                item.setTitle(`${customFolderIcon} ${path.name}`).onClick(() => {
                  gridView.setSource("folder", path.path);
                  gridView.clearSelection();
                });
              });
              const currentFolder = gridView.app.vault.getAbstractFileByPath(path.path);
              if (currentFolder && currentFolder instanceof import_obsidian15.TFolder) {
                const subFolders = currentFolder.children.filter((child) => child instanceof import_obsidian15.TFolder && !isFolderIgnored(
                  child,
                  gridView.plugin.settings.ignoredFolders,
                  gridView.plugin.settings.ignoredFolderPatterns,
                  gridView.showIgnoredFolders
                )).sort((a, b) => a.name.localeCompare(b.name));
                if (subFolders.length > 0) {
                  menu.addSeparator();
                  menu.addItem(
                    (item) => item.setTitle(t("sub_folders")).setIcon("folder-symlink").setDisabled(true)
                  );
                  subFolders.forEach((folder) => {
                    menu.addItem((item) => {
                      item.setTitle(`${customFolderIcon} ${folder.name}`).setIcon("corner-down-right").onClick(() => {
                        gridView.setSource("folder", folder.path);
                        gridView.clearSelection();
                      });
                    });
                  });
                }
              }
              menu.showAtMouseEvent(event);
            } else {
              gridView.setSource("folder", path.path);
              gridView.clearSelection();
            }
          });
          if (!path.isLast && import_obsidian15.Platform.isDesktop) {
            el.addEventListener("dragover", (event) => {
              event.preventDefault();
              event.dataTransfer.dropEffect = "move";
              el.addClass("ge-dragover");
            });
            el.addEventListener("dragleave", () => {
              el.removeClass("ge-dragover");
            });
            el.addEventListener("drop", async (event) => {
              var _a2, _b2, _c, _d, _e, _f, _g;
              event.preventDefault();
              el.removeClass("ge-dragover");
              if (!path.path)
                return;
              const folder = gridView.app.vault.getAbstractFileByPath(path.path);
              if (!(folder instanceof import_obsidian15.TFolder))
                return;
              const obsidianPaths = await extractObsidianPathsFromDT(event.dataTransfer);
              if (obsidianPaths.length > 0) {
                try {
                  for (const filePath2 of obsidianPaths) {
                    let resolved = null;
                    const direct = gridView.app.vault.getAbstractFileByPath(filePath2);
                    if (direct instanceof import_obsidian15.TFile) {
                      resolved = direct;
                    }
                    if (!resolved && !filePath2.includes(".")) {
                      const tryMd = (0, import_obsidian15.normalizePath)(`${filePath2}.md`);
                      const f2 = gridView.app.vault.getAbstractFileByPath(tryMd);
                      if (f2 instanceof import_obsidian15.TFile)
                        resolved = f2;
                    }
                    if (!resolved) {
                      const dest = (_b2 = (_a2 = gridView.app.metadataCache).getFirstLinkpathDest) == null ? void 0 : _b2.call(_a2, filePath2, path.path);
                      if (dest instanceof import_obsidian15.TFile)
                        resolved = dest;
                    }
                    if (resolved instanceof import_obsidian15.TFile) {
                      const newPath = (0, import_obsidian15.normalizePath)(`${path.path}/${resolved.name}`);
                      if (resolved.path !== newPath) {
                        await gridView.app.fileManager.renameFile(resolved, newPath);
                      }
                    }
                  }
                } catch (error) {
                  console.error("An error occurred while moving multiple files to folder:", error);
                }
                return;
              }
              const filePath = (_c = event.dataTransfer) == null ? void 0 : _c.getData("text/plain");
              if (!filePath)
                return;
              const srcPath = path.path || "/";
              const lines = filePath.split(/\r?\n/).map((s) => s.trim()).filter((v) => v.length > 0);
              for (const line of lines) {
                try {
                  let text = line;
                  if (text.startsWith("!"))
                    text = text.substring(1);
                  let resolvedFile = null;
                  if (text.startsWith("[[") && text.endsWith("]]")) {
                    const inner = text.slice(2, -2);
                    const parsed = (0, import_obsidian15.parseLinktext)(inner);
                    const dest = (_e = (_d = gridView.app.metadataCache).getFirstLinkpathDest) == null ? void 0 : _e.call(_d, parsed.path, srcPath);
                    if (dest instanceof import_obsidian15.TFile)
                      resolvedFile = dest;
                  } else {
                    const direct = gridView.app.vault.getAbstractFileByPath(text);
                    if (direct instanceof import_obsidian15.TFile) {
                      resolvedFile = direct;
                    } else {
                      const dest = (_g = (_f = gridView.app.metadataCache).getFirstLinkpathDest) == null ? void 0 : _g.call(_f, text, srcPath);
                      if (dest instanceof import_obsidian15.TFile)
                        resolvedFile = dest;
                    }
                  }
                  if (resolvedFile instanceof import_obsidian15.TFile) {
                    const newPath = (0, import_obsidian15.normalizePath)(`${path.path}/${resolvedFile.name}`);
                    if (resolvedFile.path !== newPath) {
                      await gridView.app.fileManager.renameFile(resolvedFile, newPath);
                    }
                  }
                } catch (error) {
                  console.error("An error occurred while moving one of the files to folder:", error);
                }
              }
            });
          }
        }
      }
      if (el.className === "ge-current-folder") {
        el.addEventListener("click", (event) => {
          event.preventDefault();
          event.stopPropagation();
          const folder = gridView.app.vault.getAbstractFileByPath(gridView.sourcePath);
          const folderName = gridView.sourcePath.split("/").pop() || "";
          const parentFolder = folder == null ? void 0 : folder.parent;
          const menu = new import_obsidian15.Menu();
          let current = null;
          if (gridView.plugin.settings.folderDisplayStyle === "menu") {
            current = folder instanceof import_obsidian15.TFolder ? folder : null;
            if (gridView.sourcePath === "/") {
              current = gridView.app.vault.getRoot();
            }
          } else if (gridView.plugin.settings.folderDisplayStyle === "show") {
            if (gridView.sourcePath === "/") {
              current = gridView.app.vault.getRoot();
            } else {
              current = null;
            }
          }
          if (current) {
            const subFolders = current.children.filter((child) => child instanceof import_obsidian15.TFolder && !isFolderIgnored(
              child,
              gridView.plugin.settings.ignoredFolders,
              gridView.plugin.settings.ignoredFolderPatterns,
              gridView.showIgnoredFolders
            ));
            if (subFolders.length > 0) {
              menu.addSeparator();
              menu.addItem(
                (item) => item.setTitle(t("sub_folders")).setIcon("folder-symlink").setDisabled(true)
              );
              subFolders.sort((a, b) => a.name.localeCompare(b.name)).forEach((sf) => {
                menu.addItem((item) => {
                  item.setTitle(`${customFolderIcon} ${sf.name}`).setIcon("corner-down-right").onClick(() => {
                    gridView.setSource("folder", sf.path);
                    gridView.clearSelection();
                  });
                });
              });
            }
          }
          const notePath = `${gridView.sourcePath}/${folderName}.md`;
          const noteFile = gridView.app.vault.getAbstractFileByPath(notePath);
          menu.addSeparator();
          if (noteFile instanceof import_obsidian15.TFile) {
            menu.addItem((item) => {
              item.setTitle(t("open_folder_note")).setIcon("panel-left-open").onClick(() => {
                gridView.app.workspace.getLeaf().openFile(noteFile);
              });
            });
            menu.addItem((item) => {
              item.setTitle(t("edit_folder_note_settings")).setIcon("settings-2").onClick(() => {
                if (folder instanceof import_obsidian15.TFolder) {
                  showFolderNoteSettingsModal(gridView.app, gridView.plugin, folder, gridView);
                }
              });
            });
            menu.addItem((item) => {
              item.setTitle(t("delete_folder_note")).setIcon("folder-x").onClick(() => {
                gridView.app.fileManager.trashFile(noteFile);
              });
            });
          } else {
            if (gridView.sourcePath !== "/") {
              menu.addItem((item) => {
                item.setTitle(t("create_folder_note")).setIcon("file-cog").onClick(() => {
                  if (folder instanceof import_obsidian15.TFolder) {
                    showFolderNoteSettingsModal(gridView.app, gridView.plugin, folder, gridView);
                  }
                });
              });
            }
          }
          if (gridView.plugin.settings.folderDisplayStyle !== "show" && gridView.sourcePath !== "/") {
            menu.addSeparator();
            if (folder) {
              if (!gridView.plugin.settings.ignoredFolders.includes(folder.path)) {
                menu.addItem((item) => {
                  item.setTitle(t("ignore_folder")).setIcon("folder-x").onClick(() => {
                    gridView.plugin.settings.ignoredFolders.push(folder.path);
                    gridView.plugin.saveSettings();
                    requestAnimationFrame(() => {
                      gridView.setSource("folder", (parentFolder == null ? void 0 : parentFolder.path) || "/");
                    });
                  });
                });
              } else {
                menu.addItem((item) => {
                  item.setTitle(t("unignore_folder")).setIcon("folder-up").onClick(() => {
                    gridView.plugin.settings.ignoredFolders = gridView.plugin.settings.ignoredFolders.filter((path) => path !== folder.path);
                    gridView.plugin.saveSettings();
                    requestAnimationFrame(() => {
                      gridView.setSource("folder", (parentFolder == null ? void 0 : parentFolder.path) || "/");
                    });
                  });
                });
              }
              menu.addItem((item) => {
                item.setTitle(t("move_folder")).setIcon("folder-cog").onClick(() => {
                  if (folder instanceof import_obsidian15.TFolder) {
                    new showFolderMoveModal(gridView.plugin, folder, gridView).open();
                  }
                });
              });
              menu.addItem((item) => {
                item.setTitle(t("rename_folder")).setIcon("file-cog").onClick(() => {
                  if (folder instanceof import_obsidian15.TFolder) {
                    showFolderRenameModal(gridView.app, gridView.plugin, folder, gridView);
                  }
                });
              });
              menu.addItem((item) => {
                item.setWarning(true);
                item.setTitle(t("delete_folder")).setIcon("trash").onClick(async () => {
                  if (folder instanceof import_obsidian15.TFolder) {
                    await gridView.app.fileManager.trashFile(folder);
                    requestAnimationFrame(() => {
                      gridView.setSource("folder", (parentFolder == null ? void 0 : parentFolder.path) || "/");
                    });
                  }
                });
              });
            }
          }
          if (gridView.sourcePath === "/") {
            if (gridView.plugin.settings.folderDisplayStyle === "menu") {
              menu.showAtMouseEvent(event);
            }
          } else {
            menu.showAtMouseEvent(event);
          }
        });
      }
    }
  } else if (!(gridView.searchQuery && !gridView.searchCurrentLocationOnly)) {
    let modeName = "";
    let modeIcon = "";
    switch (gridView.sourceMode) {
      case "bookmarks":
        modeIcon = "\u{1F4D1}";
        modeName = t("bookmarks_mode");
        break;
      case "search":
        modeIcon = "\u{1F50D}";
        modeName = t("search_results");
        const searchLeaf = gridView.app.workspace.getLeavesOfType("search")[0];
        if (searchLeaf) {
          const searchView = searchLeaf.view;
          const searchInputEl = searchView.searchComponent ? searchView.searchComponent.inputEl : null;
          const currentQuery = searchInputEl == null ? void 0 : searchInputEl.value.trim();
          if (currentQuery && currentQuery.length > 0) {
            modeName += `: ${currentQuery}`;
          } else if (gridView.searchQuery) {
            modeName += `: ${gridView.searchQuery}`;
          }
        }
        break;
      case "backlinks":
        modeIcon = "\u{1F517}";
        modeName = t("backlinks_mode");
        const activeFile = gridView.app.workspace.getActiveFile();
        if (activeFile) {
          modeName += `: ${activeFile.basename}`;
        }
        break;
      case "outgoinglinks":
        modeIcon = "\u{1F517}";
        modeName = t("outgoinglinks_mode");
        const currentFile = gridView.app.workspace.getActiveFile();
        if (currentFile) {
          modeName += `: ${currentFile.basename}`;
        }
        break;
      case "recent-files":
        modeIcon = "\u{1F4C5}";
        modeName = t("recent_files_mode");
        break;
      case "all-files":
        modeIcon = "\u{1F4D4}";
        modeName = t("all_files_mode");
        break;
      case "random-note":
        modeIcon = "\u{1F3B2}";
        modeName = t("random_note_mode");
        break;
      case "tasks":
        modeIcon = "\u2611\uFE0F";
        modeName = t("tasks_mode");
        break;
      default:
        if (gridView.sourceMode.startsWith("custom-")) {
          const mode = gridView.plugin.settings.customModes.find((m) => m.internalName === gridView.sourceMode);
          modeIcon = mode ? mode.icon : "\u{1F9E9}";
          modeName = mode ? mode.displayName : t("custom_mode");
        } else {
          modeIcon = "\u{1F4C1}";
          if (gridView.sourcePath && gridView.sourcePath !== "/") {
            modeName = gridView.sourcePath.split("/").pop() || gridView.sourcePath;
          } else {
            modeName = t("root");
          }
        }
    }
    let modeTitleEl;
    if (gridView.sourceMode.startsWith("custom-")) {
      modeTitleEl = modenameContainer.createEl("a", {
        text: `${modeIcon} ${modeName}`.trim(),
        cls: "ge-mode-title"
      });
      modeTitleEl.addEventListener("click", (evt) => {
        const menu = new import_obsidian15.Menu();
        gridView.plugin.settings.customModes.filter((m) => {
          var _a2;
          return (_a2 = m.enabled) != null ? _a2 : true;
        }).forEach((m) => {
          menu.addItem((item) => {
            item.setTitle(`${m.icon || "\u{1F9E9}"} ${m.displayName}`).setChecked(m.internalName === gridView.sourceMode).onClick(() => {
              gridView.setSource(m.internalName);
            });
          });
        });
        menu.showAtMouseEvent(evt);
      });
    } else {
      modeTitleEl = modenameContainer.createEl("span", {
        text: `${modeIcon} ${modeName}`.trim(),
        cls: "ge-mode-title"
      });
    }
    switch (gridView.sourceMode) {
      case "random-note":
      case "recent-files":
      case "all-files":
        if (gridView.plugin.settings.showMediaFiles && gridView.searchQuery === "") {
          const showTypeName = gridView.includeMedia ? t("random_note_include_media_files") : t("random_note_notes_only");
          const showTypeSpan = modenameContainer.createEl("a", { text: showTypeName, cls: "ge-sub-option" });
          showTypeSpan.addEventListener("click", (evt) => {
            const menu = new import_obsidian15.Menu();
            menu.addItem((item) => {
              item.setTitle(t("random_note_notes_only")).setIcon("file-text").setChecked(!gridView.includeMedia).onClick(() => {
                gridView.includeMedia = false;
                gridView.render();
              });
            });
            menu.addItem((item) => {
              item.setTitle(t("random_note_include_media_files")).setIcon("file-image").setChecked(gridView.includeMedia).onClick(() => {
                gridView.includeMedia = true;
                gridView.render();
              });
            });
            menu.showAtMouseEvent(evt);
          });
        }
        break;
      case "tasks":
        const taskFilterSpan = modenameContainer.createEl("a", { text: t(`${gridView.taskFilter}`), cls: "ge-sub-option" });
        taskFilterSpan.addEventListener("click", (evt) => {
          const menu = new import_obsidian15.Menu();
          menu.addItem((item) => {
            item.setTitle(t("uncompleted")).setChecked(gridView.taskFilter === "uncompleted").setIcon("square").onClick(() => {
              gridView.taskFilter = "uncompleted";
              gridView.render();
            });
          });
          menu.addItem((item) => {
            item.setTitle(t("completed")).setChecked(gridView.taskFilter === "completed").setIcon("square-check-big").onClick(() => {
              gridView.taskFilter = "completed";
              gridView.render();
            });
          });
          menu.addItem((item) => {
            item.setTitle(t("all")).setChecked(gridView.taskFilter === "all").setIcon("square-asterisk").onClick(() => {
              gridView.taskFilter = "all";
              gridView.render();
            });
          });
          menu.addSeparator();
          menu.showAtMouseEvent(evt);
        });
        break;
      default:
        if (gridView.sourceMode.startsWith("custom-")) {
          const mode = gridView.plugin.settings.customModes.find((m) => m.internalName === gridView.sourceMode);
          if (mode) {
            const hasOptions = mode.options && mode.options.length > 0;
            if (hasOptions && mode.options) {
              if (gridView.customOptionIndex >= mode.options.length || gridView.customOptionIndex < -1) {
                gridView.customOptionIndex = -1;
              }
              let subName;
              if (gridView.customOptionIndex === -1) {
                subName = ((_a = mode.name) == null ? void 0 : _a.trim()) || t("default");
              } else if (gridView.customOptionIndex >= 0 && gridView.customOptionIndex < mode.options.length) {
                const opt = mode.options[gridView.customOptionIndex];
                subName = ((_b = opt.name) == null ? void 0 : _b.trim()) || `${t("option")} ${gridView.customOptionIndex + 1}`;
              }
              const subSpan = modenameContainer.createEl("a", { text: subName != null ? subName : "-", cls: "ge-sub-option" });
              subSpan.addEventListener("click", (evt) => {
                var _a2;
                const menu = new import_obsidian15.Menu();
                const defaultName = ((_a2 = mode.name) == null ? void 0 : _a2.trim()) || t("default");
                menu.addItem((item) => {
                  item.setTitle(defaultName).setIcon("puzzle").setChecked(gridView.customOptionIndex === -1).onClick(() => {
                    gridView.customOptionIndex = -1;
                    gridView.render();
                  });
                });
                mode.options.forEach((opt, idx) => {
                  menu.addItem((item) => {
                    var _a3;
                    item.setTitle(((_a3 = opt.name) == null ? void 0 : _a3.trim()) || t("option") + " " + (idx + 1)).setIcon("puzzle").setChecked(idx === gridView.customOptionIndex).onClick(() => {
                      gridView.customOptionIndex = idx;
                      gridView.render();
                    });
                  });
                });
                menu.showAtMouseEvent(evt);
              });
            }
            const gearIcon = modenameContainer.createEl("a", { cls: "ge-settings-gear" });
            (0, import_obsidian15.setIcon)(gearIcon, "settings");
            gearIcon.addEventListener("click", () => {
              const modeIndex = gridView.plugin.settings.customModes.findIndex((m) => m.internalName === mode.internalName);
              if (modeIndex === -1)
                return;
              new CustomModeModal(gridView.app, gridView.plugin, gridView.plugin.settings.customModes[modeIndex], (result) => {
                gridView.plugin.settings.customModes[modeIndex] = result;
                gridView.plugin.saveSettings();
                gridView.render();
              }).open();
            });
          }
        }
        break;
    }
  } else if (gridView.searchQuery && !gridView.searchCurrentLocationOnly) {
    modenameContainer.createEl("span", {
      text: `\u{1F50D} ${t("global_search")}`,
      cls: "ge-mode-title"
    });
  }
  if (gridView.searchQuery) {
    const searchTextContainer = modenameContainer.createDiv("ge-search-text-container");
    searchTextContainer.setAttribute("aria-label", gridView.searchQuery);
    const searchText = searchTextContainer.createEl("span", { cls: "ge-search-text", text: gridView.searchQuery });
    searchText.style.cursor = "pointer";
    searchText.addEventListener("click", () => {
      showSearchModal(gridView.app, gridView, gridView.searchQuery, searchText);
    });
    const originalSearchQuery = gridView.searchQuery;
    const originalsearchCurrentLocationOnly = gridView.searchCurrentLocationOnly;
    const originalSearchFilesNameOnly = gridView.searchFilesNameOnly;
    const originalSearchMediaFiles = gridView.searchMediaFiles;
    const clearButton = searchTextContainer.createDiv("ge-clear-button");
    (0, import_obsidian15.setIcon)(clearButton, "x");
    clearButton.addEventListener("click", (e) => {
      e.stopPropagation();
      gridView.pushHistory(
        gridView.sourceMode,
        gridView.sourcePath,
        originalSearchQuery,
        originalsearchCurrentLocationOnly,
        originalSearchFilesNameOnly,
        originalSearchMediaFiles
      );
      gridView.searchQuery = "";
      gridView.clearSelection();
      gridView.app.workspace.requestSaveLayout();
      gridView.render();
    });
  }
}

// src/renderFolder.ts
var import_obsidian16 = require("obsidian");

// src/utils/colorUtils.ts
function isHexColor(color) {
  return /^#([0-9A-Fa-f]{3}){1,2}$/i.test(color);
}
function hexToRgba(hex, alpha) {
  hex = hex.replace("#", "");
  if (hex.length === 3) {
    hex = hex.split("").map((char) => char + char).join("");
  }
  const r = parseInt(hex.substring(0, 2), 16);
  const g = parseInt(hex.substring(2, 4), 16);
  const b = parseInt(hex.substring(4, 6), 16);
  return `rgba(${r}, ${g}, ${b}, ${alpha})`;
}

// src/renderFolder.ts
async function renderFolder(gridView, container) {
  var _a;
  if (gridView.sourceMode === "folder" && gridView.searchQuery === "") {
    const currentFolder = gridView.app.vault.getAbstractFileByPath(gridView.sourcePath || "/");
    if (currentFolder instanceof import_obsidian16.TFolder) {
      if (import_obsidian16.Platform.isDesktop) {
        container.addEventListener("dragover", (event) => {
          if (event.target.closest(".ge-folder-item")) {
            return;
          }
          event.preventDefault();
          event.dataTransfer.dropEffect = "move";
          container.addClass("ge-dragover");
        }, true);
        container.addEventListener("dragleave", (event) => {
          if (container.contains(event.relatedTarget)) {
            return;
          }
          container.removeClass("ge-dragover");
        });
        container.addEventListener("drop", async (event) => {
          var _a2, _b, _c, _d, _e, _f, _g;
          if (event.target.closest(".ge-folder-item")) {
            return;
          }
          event.preventDefault();
          container.removeClass("ge-dragover");
          const dt = event.dataTransfer;
          console.log(dt);
          if (dt) {
            try {
              const obsidianPaths = await extractObsidianPathsFromDT(dt);
              if (obsidianPaths.length) {
                for (const p of obsidianPaths) {
                  let resolved = null;
                  const direct = gridView.app.vault.getAbstractFileByPath(p);
                  if (direct instanceof import_obsidian16.TFile) {
                    resolved = direct;
                  }
                  if (!resolved && !p.includes(".")) {
                    const tryMd = (0, import_obsidian16.normalizePath)(`${p}.md`);
                    const f2 = gridView.app.vault.getAbstractFileByPath(tryMd);
                    if (f2 instanceof import_obsidian16.TFile)
                      resolved = f2;
                  }
                  if (!resolved) {
                    const srcPath2 = currentFolder.path || "/";
                    const dest = (_b = (_a2 = gridView.app.metadataCache).getFirstLinkpathDest) == null ? void 0 : _b.call(_a2, p, srcPath2);
                    if (dest instanceof import_obsidian16.TFile)
                      resolved = dest;
                  }
                  if (resolved instanceof import_obsidian16.TFile) {
                    try {
                      const newPath = (0, import_obsidian16.normalizePath)(`${currentFolder.path}/${resolved.name}`);
                      if (resolved.path !== newPath) {
                        await gridView.app.fileManager.renameFile(resolved, newPath);
                      }
                    } catch (error) {
                      console.error(`An error occurred while moving the file ${p}:`, error);
                    }
                  } else {
                    console.warn("[GridExplorer] Unable to resolve dragged obsidian file (container drop):", p);
                  }
                }
                return;
              }
            } catch (e) {
              console.error("Error handling obsidian:// URIs (container drop):", e);
            }
          }
          const filePath = (_c = event.dataTransfer) == null ? void 0 : _c.getData("text/plain");
          if (!filePath)
            return;
          const srcPath = currentFolder.path || "/";
          const lines = filePath.split(/\r?\n/).map((s) => s.trim()).filter((v) => v.length > 0);
          for (const line of lines) {
            try {
              let text = line;
              if (text.startsWith("!"))
                text = text.substring(1);
              let resolvedFile = null;
              if (text.startsWith("[[") && text.endsWith("]]")) {
                const inner = text.slice(2, -2);
                const parsed = (0, import_obsidian16.parseLinktext)(inner);
                const dest = (_e = (_d = gridView.app.metadataCache).getFirstLinkpathDest) == null ? void 0 : _e.call(_d, parsed.path, srcPath);
                if (dest instanceof import_obsidian16.TFile)
                  resolvedFile = dest;
              } else {
                const direct = gridView.app.vault.getAbstractFileByPath(text);
                if (direct instanceof import_obsidian16.TFile) {
                  resolvedFile = direct;
                } else {
                  const dest = (_g = (_f = gridView.app.metadataCache).getFirstLinkpathDest) == null ? void 0 : _g.call(_f, text, srcPath);
                  if (dest instanceof import_obsidian16.TFile)
                    resolvedFile = dest;
                }
              }
              if (resolvedFile instanceof import_obsidian16.TFile) {
                const newPath = (0, import_obsidian16.normalizePath)(`${currentFolder.path}/${resolvedFile.name}`);
                if (resolvedFile.path !== newPath) {
                  await gridView.app.fileManager.renameFile(resolvedFile, newPath);
                }
              }
            } catch (error) {
              console.error("An error occurred while moving one of the files (container):", error);
            }
          }
        });
      }
      if (gridView.plugin.settings.folderDisplayStyle !== "show")
        return;
      const subfolders = currentFolder.children.filter((child) => {
        if (!(child instanceof import_obsidian16.TFolder))
          return false;
        return !isFolderIgnored(
          child,
          gridView.plugin.settings.ignoredFolders,
          gridView.plugin.settings.ignoredFolderPatterns,
          gridView.showIgnoredFolders
        );
      }).sort((a, b) => a.name.localeCompare(b.name));
      for (const folder of subfolders) {
        const folderEl = container.createDiv("ge-grid-item ge-folder-item");
        gridView.gridItems.push(folderEl);
        folderEl.dataset.folderPath = folder.path;
        const contentArea = folderEl.createDiv("ge-content-area");
        const titleContainer = contentArea.createDiv("ge-title-container");
        const customFolderIcon = gridView.plugin.settings.customFolderIcon;
        titleContainer.createEl("span", { cls: "ge-title", text: `${customFolderIcon} ${folder.name}`.trim() });
        (0, import_obsidian16.setTooltip)(folderEl, folder.name, { placement: gridView.cardLayout === "vertical" ? "bottom" : "right" });
        const notePath = `${folder.path}/${folder.name}.md`;
        const noteFile = gridView.app.vault.getAbstractFileByPath(notePath);
        if (noteFile instanceof import_obsidian16.TFile) {
          const noteIcon = titleContainer.createEl("span", {
            cls: "ge-foldernote-button"
          });
          (0, import_obsidian16.setIcon)(noteIcon, "panel-left-open");
          noteIcon.addEventListener("click", (e) => {
            e.stopPropagation();
            if (!gridView.openShortcutFile(noteFile)) {
              gridView.app.workspace.getLeaf().openFile(noteFile);
            }
          });
          const metadata = (_a = gridView.app.metadataCache.getFileCache(noteFile)) == null ? void 0 : _a.frontmatter;
          const colorValue = metadata == null ? void 0 : metadata.color;
          if (colorValue) {
            if (isHexColor(colorValue)) {
              folderEl.addClass("ge-folder-color-custom");
              folderEl.style.setProperty("--ge-folder-color-bg", hexToRgba(colorValue, 0.2));
              folderEl.style.setProperty("--ge-folder-color-border", hexToRgba(colorValue, 0.5));
            } else {
              folderEl.addClass(`ge-folder-color-${colorValue}`);
            }
          }
          const iconValue = metadata == null ? void 0 : metadata.icon;
          if (iconValue) {
            const title = folderEl.querySelector(".ge-title");
            if (title) {
              title.textContent = `${iconValue} ${folder.name}`;
            }
          }
        }
        folderEl.addEventListener("click", (event) => {
          if (event.ctrlKey || event.metaKey) {
            event.preventDefault();
            event.stopPropagation();
            openFolderInNewView(gridView, folder.path);
          } else {
            gridView.setSource("folder", folder.path);
            gridView.clearSelection();
          }
        });
        folderEl.addEventListener("contextmenu", (event) => {
          event.preventDefault();
          const menu = new import_obsidian16.Menu();
          menu.addItem((item) => {
            item.setTitle(t("open_in_new_grid_view")).setIcon("grid").onClick(() => {
              openFolderInNewView(gridView, folder.path);
            });
          });
          menu.addSeparator();
          menu.addItem((item) => {
            item.setTitle(t("new_note")).setIcon("square-pen").onClick(async () => {
              await createNewNote(gridView.app, folder.path);
            });
          });
          menu.addItem((item) => {
            item.setTitle(t("new_folder")).setIcon("folder-plus").onClick(async () => {
              await createNewFolder(gridView.app, folder.path);
              requestAnimationFrame(() => {
                gridView.render();
              });
            });
          });
          menu.addItem((item) => {
            item.setTitle(t("new_canvas")).setIcon("layout-dashboard").onClick(async () => {
              await createNewCanvas(gridView.app, folder.path);
            });
          });
          menu.addItem((item) => {
            item.setTitle(t("new_base")).setIcon("database").onClick(async () => {
              await createNewBase(gridView.app, folder.path);
            });
          });
          menu.addItem((item) => {
            item.setTitle(t("new_shortcut")).setIcon("link").onClick(async () => {
              new ShortcutSelectionModal(gridView.app, gridView.plugin, async (option) => {
                await createShortcut(gridView.app, folder.path, option);
              }).open();
            });
          });
          menu.addSeparator();
          const notePath2 = `${folder.path}/${folder.name}.md`;
          let noteFile2 = gridView.app.vault.getAbstractFileByPath(notePath2);
          if (noteFile2 instanceof import_obsidian16.TFile) {
            menu.addItem((item) => {
              item.setTitle(t("open_folder_note")).setIcon("panel-left-open").onClick(() => {
                if (noteFile2 instanceof import_obsidian16.TFile) {
                  if (!gridView.openShortcutFile(noteFile2)) {
                    gridView.app.workspace.getLeaf().openFile(noteFile2);
                  }
                }
              });
            });
            menu.addItem((item) => {
              item.setTitle(t("edit_folder_note_settings")).setIcon("settings-2").onClick(() => {
                if (folder instanceof import_obsidian16.TFolder) {
                  showFolderNoteSettingsModal(gridView.app, gridView.plugin, folder, gridView);
                }
              });
            });
            menu.addItem((item) => {
              item.setTitle(t("delete_folder_note")).setIcon("folder-x").onClick(() => {
                gridView.app.fileManager.trashFile(noteFile2);
              });
            });
          } else {
            menu.addItem((item) => {
              item.setTitle(t("create_folder_note")).setIcon("file-cog").onClick(() => {
                if (folder instanceof import_obsidian16.TFolder) {
                  showFolderNoteSettingsModal(gridView.app, gridView.plugin, folder, gridView);
                }
              });
            });
          }
          menu.addSeparator();
          if (!gridView.plugin.settings.ignoredFolders.includes(folder.path)) {
            menu.addItem((item) => {
              item.setTitle(t("ignore_folder")).setIcon("folder-x").onClick(() => {
                gridView.plugin.settings.ignoredFolders.push(folder.path);
                gridView.plugin.saveSettings();
              });
            });
          } else {
            menu.addItem((item) => {
              item.setTitle(t("unignore_folder")).setIcon("folder-up").onClick(() => {
                gridView.plugin.settings.ignoredFolders = gridView.plugin.settings.ignoredFolders.filter((path) => path !== folder.path);
                gridView.plugin.saveSettings();
              });
            });
          }
          menu.addItem((item) => {
            item.setTitle(t("move_folder")).setIcon("folder-cog").onClick(() => {
              if (folder instanceof import_obsidian16.TFolder) {
                new showFolderMoveModal(gridView.plugin, folder, gridView).open();
              }
            });
          });
          menu.addItem((item) => {
            item.setTitle(t("rename_folder")).setIcon("file-cog").onClick(() => {
              if (folder instanceof import_obsidian16.TFolder) {
                showFolderRenameModal(gridView.app, gridView.plugin, folder, gridView);
              }
            });
          });
          menu.addItem((item) => {
            item.setWarning(true);
            item.setTitle(t("delete_folder")).setIcon("trash").onClick(async () => {
              if (folder instanceof import_obsidian16.TFolder) {
                await gridView.app.fileManager.trashFile(folder);
                requestAnimationFrame(() => {
                  gridView.render();
                });
              }
            });
          });
          menu.showAtMouseEvent(event);
        });
      }
      if (subfolders.length > 0) {
        container.createDiv("ge-break");
      }
    }
  }
  if (import_obsidian16.Platform.isDesktop) {
    const folderItems = gridView.containerEl.querySelectorAll(".ge-folder-item");
    folderItems.forEach((folderItem) => {
      folderItem.addEventListener("dragover", (event) => {
        event.preventDefault();
        event.dataTransfer.dropEffect = "move";
        folderItem.addClass("ge-dragover");
      });
      folderItem.addEventListener("dragleave", () => {
        folderItem.removeClass("ge-dragover");
      });
      folderItem.addEventListener("drop", async (event) => {
        var _a2, _b, _c, _d, _e, _f, _g;
        event.preventDefault();
        folderItem.removeClass("ge-dragover");
        const dt = event.dataTransfer;
        if (dt) {
          try {
            const obsidianPaths = await extractObsidianPathsFromDT(dt);
            if (obsidianPaths.length) {
              const folderPath2 = folderItem.dataset.folderPath;
              if (!folderPath2)
                return;
              const folder2 = gridView.app.vault.getAbstractFileByPath(folderPath2);
              if (!(folder2 instanceof import_obsidian16.TFolder))
                return;
              for (const p of obsidianPaths) {
                let resolved = null;
                const direct = gridView.app.vault.getAbstractFileByPath(p);
                if (direct instanceof import_obsidian16.TFile) {
                  resolved = direct;
                }
                if (!resolved && !p.includes(".")) {
                  const tryMd = (0, import_obsidian16.normalizePath)(`${p}.md`);
                  const f2 = gridView.app.vault.getAbstractFileByPath(tryMd);
                  if (f2 instanceof import_obsidian16.TFile)
                    resolved = f2;
                }
                if (!resolved) {
                  const srcPath2 = folderItem.dataset.folderPath || "/";
                  const dest = (_b = (_a2 = gridView.app.metadataCache).getFirstLinkpathDest) == null ? void 0 : _b.call(_a2, p, srcPath2);
                  if (dest instanceof import_obsidian16.TFile)
                    resolved = dest;
                }
                if (resolved instanceof import_obsidian16.TFile) {
                  try {
                    const newPath = (0, import_obsidian16.normalizePath)(`${folderPath2}/${resolved.name}`);
                    if (resolved.path !== newPath) {
                      await gridView.app.fileManager.renameFile(resolved, newPath);
                    }
                  } catch (error) {
                    console.error(`An error occurred while moving the file ${p}:`, error);
                  }
                } else {
                  console.warn("[GridExplorer] Unable to resolve dragged obsidian file:", p);
                }
              }
              return;
            }
          } catch (e) {
            console.error("Error handling obsidian:// URIs:", e);
          }
        }
        const filePath = (_c = event.dataTransfer) == null ? void 0 : _c.getData("text/plain");
        if (!filePath)
          return;
        const folderPath = folderItem.dataset.folderPath;
        if (!folderPath)
          return;
        const folder = gridView.app.vault.getAbstractFileByPath(folderPath);
        if (!(folder instanceof import_obsidian16.TFolder))
          return;
        const srcPath = folderItem.dataset.folderPath || "/";
        const lines = filePath.split(/\r?\n/).map((s) => s.trim()).filter((v) => v.length > 0);
        for (const line of lines) {
          try {
            let text = line;
            if (text.startsWith("!"))
              text = text.substring(1);
            let resolvedFile = null;
            if (text.startsWith("[[") && text.endsWith("]]")) {
              const inner = text.slice(2, -2);
              const parsed = (0, import_obsidian16.parseLinktext)(inner);
              const dest = (_e = (_d = gridView.app.metadataCache).getFirstLinkpathDest) == null ? void 0 : _e.call(_d, parsed.path, srcPath);
              if (dest instanceof import_obsidian16.TFile)
                resolvedFile = dest;
            } else {
              const direct = gridView.app.vault.getAbstractFileByPath(text);
              if (direct instanceof import_obsidian16.TFile) {
                resolvedFile = direct;
              } else {
                const dest = (_g = (_f = gridView.app.metadataCache).getFirstLinkpathDest) == null ? void 0 : _g.call(_f, text, srcPath);
                if (dest instanceof import_obsidian16.TFile)
                  resolvedFile = dest;
              }
            }
            if (resolvedFile instanceof import_obsidian16.TFile) {
              const newPath = (0, import_obsidian16.normalizePath)(`${folderPath}/${resolvedFile.name}`);
              if (resolvedFile.path !== newPath) {
                await gridView.app.fileManager.renameFile(resolvedFile, newPath);
              }
            }
          } catch (error) {
            console.error("An error occurred while moving one of the files:", error);
          }
        }
      });
    });
  }
}
function openFolderInNewView(gridview, folderPath) {
  const { workspace } = gridview.app;
  let leaf = null;
  workspace.getLeavesOfType("grid-view");
  switch (gridview.plugin.settings.defaultOpenLocation) {
    case "left":
      leaf = workspace.getLeftLeaf(false);
      break;
    case "right":
      leaf = workspace.getRightLeaf(false);
      break;
    case "tab":
    default:
      leaf = workspace.getLeaf("tab");
      break;
  }
  if (!leaf) {
    leaf = workspace.getLeaf("tab");
  }
  leaf.setViewState({ type: "grid-view", active: true });
  if (leaf.view instanceof GridView) {
    leaf.view.setSource("folder", folderPath);
  }
  workspace.revealLeaf(leaf);
}

// src/renderFiles.ts
async function renderFiles(gridView, container) {
  let loadingDiv = null;
  if (gridView.searchQuery || gridView.sourceMode === "tasks") {
    loadingDiv = container.createDiv({ text: t("searching"), cls: "ge-loading-indicator" });
  }
  let files = [];
  let fileIndexMap = /* @__PURE__ */ new Map();
  if (gridView.searchQuery) {
    let allFiles = [];
    if (!gridView.searchCurrentLocationOnly) {
      allFiles = gridView.app.vault.getFiles().filter(
        (file) => isDocumentFile(file) || isMediaFile(file) && gridView.searchMediaFiles
      );
    } else {
      allFiles = await getFiles(gridView, gridView.searchMediaFiles);
      if (gridView.sourceMode === "bookmarks") {
        allFiles = allFiles.filter(
          (file) => isDocumentFile(file) || isMediaFile(file) && gridView.searchMediaFiles
        );
        allFiles.forEach((file, index) => {
          fileIndexMap.set(file, index);
        });
      } else if (gridView.sourceMode === "search") {
        allFiles = allFiles.filter(
          (file) => isDocumentFile(file) || isMediaFile(file) && gridView.searchMediaFiles
        );
      } else if (gridView.sourceMode === "recent-files") {
        allFiles = ignoredFiles(allFiles, gridView).slice(0, gridView.plugin.settings.recentFilesCount);
      } else if (gridView.sourceMode.startsWith("custom-")) {
        allFiles.forEach((file, index) => {
          fileIndexMap.set(file, index);
        });
      }
    }
    const searchTerms = gridView.searchQuery.toLowerCase().split(/\s+/).filter((term) => term.trim() !== "");
    const tagTerms = [];
    const linkTerms = [];
    const normalTerms = [];
    for (const term of searchTerms) {
      if (term.startsWith("#")) {
        tagTerms.push(term.substring(1));
      } else if (term.startsWith("[[") && term.endsWith("]]")) {
        linkTerms.push(term.slice(2, -2));
      } else {
        normalTerms.push(term);
      }
    }
    let linkTargetFileSets = [];
    const hasLinkSearch = linkTerms.length > 0;
    if (hasLinkSearch) {
      for (const linkTarget of linkTerms) {
        let targetFile = gridView.app.vault.getAbstractFileByPath(linkTarget + ".md");
        if (!targetFile) {
          targetFile = gridView.app.metadataCache.getFirstLinkpathDest(linkTarget, "");
        }
        if (targetFile && "extension" in targetFile) {
          const backlinks = gridView.app.metadataCache.getBacklinksForFile(targetFile);
          const currentLinkFiles = /* @__PURE__ */ new Set();
          if (backlinks) {
            for (const [filePath, links] of backlinks.data.entries()) {
              currentLinkFiles.add(filePath);
            }
          }
          linkTargetFileSets.push(currentLinkFiles);
        } else {
          linkTargetFileSets.push(/* @__PURE__ */ new Set());
        }
      }
    }
    await Promise.all(
      allFiles.map(async (file) => {
        if (hasLinkSearch) {
          const isInAllLinkTargets = linkTargetFileSets.every((linkSet) => linkSet.has(file.path));
          if (!isInAllLinkTargets) {
            return;
          }
        }
        const fileName = file.name.toLowerCase();
        let matchesNormalTerms = true;
        let matchesTags = true;
        if (normalTerms.length > 0) {
          if (gridView.searchFilesNameOnly) {
            matchesNormalTerms = normalTerms.every((term) => fileName.includes(term));
          } else {
            matchesNormalTerms = true;
            let contentLower = null;
            for (const term of normalTerms) {
              if (fileName.includes(term)) {
                continue;
              }
              if (file.extension === "md") {
                if (contentLower === null) {
                  contentLower = (await gridView.app.vault.cachedRead(file)).toLowerCase();
                }
                if (contentLower.includes(term)) {
                  continue;
                }
              }
              matchesNormalTerms = false;
              break;
            }
          }
        }
        if (tagTerms.length > 0) {
          if (file.extension !== "md") {
            matchesTags = false;
          } else {
            const fileCache = gridView.app.metadataCache.getFileCache(file);
            matchesTags = false;
            if (fileCache) {
              const collectedTags = [];
              if (Array.isArray(fileCache.tags)) {
                for (const t2 of fileCache.tags) {
                  if (t2 && t2.tag) {
                    const clean = t2.tag.toLowerCase().replace(/^#/, "");
                    collectedTags.push(...clean.split(/\s+/).filter((st) => st.trim() !== ""));
                  }
                }
              }
              if (fileCache.frontmatter && fileCache.frontmatter.tags) {
                const fmTags = fileCache.frontmatter.tags;
                if (typeof fmTags === "string") {
                  collectedTags.push(
                    ...fmTags.split(/[,\s]+/).map((t2) => t2.toLowerCase().replace(/^#/, "")).filter((t2) => t2.trim() !== "")
                  );
                } else if (Array.isArray(fmTags)) {
                  for (const t2 of fmTags) {
                    if (typeof t2 === "string") {
                      const clean = t2.toLowerCase().replace(/^#/, "");
                      collectedTags.push(...clean.split(/\s+/).filter((st) => st.trim() !== ""));
                    }
                  }
                }
              }
              matchesTags = tagTerms.every(
                (tag) => collectedTags.some(
                  (collectedTag) => collectedTag === tag || collectedTag.startsWith(`${tag}/`)
                )
              );
            }
          }
        }
        if (matchesNormalTerms && matchesTags) {
          files.push(file);
        }
      })
    );
    if (!gridView.searchCurrentLocationOnly) {
      files = sortFiles(files, gridView);
    } else {
      if (gridView.sourceMode === "bookmarks") {
        files.sort((a, b) => {
          var _a, _b;
          const indexA = (_a = fileIndexMap.get(a)) != null ? _a : Number.MAX_SAFE_INTEGER;
          const indexB = (_b = fileIndexMap.get(b)) != null ? _b : Number.MAX_SAFE_INTEGER;
          return indexA - indexB;
        });
      } else if (gridView.sourceMode === "recent-files") {
        files = sortFiles(files, gridView, "mtime-desc");
      } else if (gridView.sourceMode === "random-note") {
        files = sortFiles(files, gridView, "random");
      } else if (gridView.sourceMode.startsWith("custom-")) {
        files.sort((a, b) => {
          var _a, _b;
          const indexA = (_a = fileIndexMap.get(a)) != null ? _a : Number.MAX_SAFE_INTEGER;
          const indexB = (_b = fileIndexMap.get(b)) != null ? _b : Number.MAX_SAFE_INTEGER;
          return indexA - indexB;
        });
      } else {
        files = sortFiles(files, gridView);
      }
    }
    files = ignoredFiles(files, gridView);
  } else {
    files = await getFiles(gridView, gridView.includeMedia);
    files = ignoredFiles(files, gridView);
    if (gridView.sourceMode === "recent-files") {
      files = files.slice(0, gridView.plugin.settings.recentFilesCount);
    }
    if (gridView.sourceMode === "random-note") {
      files = files.slice(0, gridView.plugin.settings.randomNoteCount);
    }
  }
  if (loadingDiv) {
    loadingDiv.remove();
  }
  return files;
}

// src/handleKeyDown.ts
function handleKeyDown(gridView, event) {
  if (gridView.gridItems.length === 0 || gridView.isShowingNote)
    return;
  if (document.querySelector(".modal-container"))
    return;
  let newIndex = gridView.selectedItemIndex;
  if (gridView.selectedItemIndex === -1 && ["ArrowRight", "ArrowLeft", "ArrowDown", "ArrowUp", "Home", "End"].includes(event.key)) {
    gridView.hasKeyboardFocus = true;
    gridView.selectItem(0);
    event.preventDefault();
    return;
  }
  switch (event.key) {
    case "ArrowRight":
      if (event.altKey) {
        if (gridView.selectedItemIndex >= 0 && gridView.selectedItemIndex < gridView.gridItems.length) {
          gridView.gridItems[gridView.selectedItemIndex].click();
        }
      }
      newIndex = Math.min(gridView.gridItems.length - 1, gridView.selectedItemIndex + 1);
      gridView.hasKeyboardFocus = true;
      event.preventDefault();
      break;
    case "ArrowLeft":
      if (event.altKey) {
        if (gridView.sourceMode === "folder" && gridView.sourcePath && gridView.sourcePath !== "/") {
          const parentPath = gridView.sourcePath.split("/").slice(0, -1).join("/") || "/";
          gridView.setSource("folder", parentPath);
          gridView.clearSelection();
          event.preventDefault();
        }
        break;
      }
      newIndex = Math.max(0, gridView.selectedItemIndex - 1);
      gridView.hasKeyboardFocus = true;
      event.preventDefault();
      break;
    case "ArrowDown":
      if (gridView.selectedItemIndex >= 0) {
        const currentItem = gridView.gridItems[gridView.selectedItemIndex];
        const currentRect = currentItem.getBoundingClientRect();
        const currentCenterX = currentRect.left + currentRect.width / 2;
        const currentBottom = currentRect.bottom;
        let closestItem = -1;
        let minDistance = Number.MAX_VALUE;
        let minVerticalDistance = Number.MAX_VALUE;
        for (let i = 0; i < gridView.gridItems.length; i++) {
          if (i === gridView.selectedItemIndex)
            continue;
          const itemRect = gridView.gridItems[i].getBoundingClientRect();
          const itemCenterX = itemRect.left + itemRect.width / 2;
          const itemTop = itemRect.top;
          if (itemTop <= currentBottom)
            continue;
          const horizontalDistance = Math.abs(itemCenterX - currentCenterX);
          const verticalDistance = itemTop - currentBottom;
          if (verticalDistance < minVerticalDistance || verticalDistance === minVerticalDistance && horizontalDistance < minDistance) {
            minVerticalDistance = verticalDistance;
            minDistance = horizontalDistance;
            closestItem = i;
          }
        }
        if (closestItem !== -1) {
          newIndex = closestItem;
        } else {
          newIndex = gridView.gridItems.length - 1;
        }
      } else {
        newIndex = 0;
      }
      gridView.hasKeyboardFocus = true;
      event.preventDefault();
      break;
    case "ArrowUp":
      if (event.altKey) {
        if (gridView.sourceMode === "folder" && gridView.sourcePath && gridView.sourcePath !== "/") {
          const parentPath = gridView.sourcePath.split("/").slice(0, -1).join("/") || "/";
          gridView.setSource("folder", parentPath);
          gridView.clearSelection();
          event.preventDefault();
        }
        break;
      }
      if (gridView.selectedItemIndex >= 0) {
        const currentItem = gridView.gridItems[gridView.selectedItemIndex];
        const currentRect = currentItem.getBoundingClientRect();
        const currentCenterX = currentRect.left + currentRect.width / 2;
        const currentTop = currentRect.top;
        let closestItem = -1;
        let minDistance = Number.MAX_VALUE;
        let minVerticalDistance = Number.MAX_VALUE;
        for (let i = 0; i < gridView.gridItems.length; i++) {
          if (i === gridView.selectedItemIndex)
            continue;
          const itemRect = gridView.gridItems[i].getBoundingClientRect();
          const itemCenterX = itemRect.left + itemRect.width / 2;
          const itemBottom = itemRect.bottom;
          if (itemBottom >= currentTop)
            continue;
          const horizontalDistance = Math.abs(itemCenterX - currentCenterX);
          const verticalDistance = currentTop - itemBottom;
          if (verticalDistance < minVerticalDistance || verticalDistance === minVerticalDistance && horizontalDistance < minDistance) {
            minVerticalDistance = verticalDistance;
            minDistance = horizontalDistance;
            closestItem = i;
          }
        }
        if (closestItem !== -1) {
          newIndex = closestItem;
        } else {
          newIndex = 0;
        }
      } else {
        newIndex = 0;
      }
      gridView.hasKeyboardFocus = true;
      event.preventDefault();
      break;
    case "Home":
      newIndex = 0;
      gridView.hasKeyboardFocus = true;
      event.preventDefault();
      break;
    case "End":
      newIndex = gridView.gridItems.length - 1;
      gridView.hasKeyboardFocus = true;
      event.preventDefault();
      break;
    case "Enter":
      if (gridView.selectedItemIndex >= 0 && gridView.selectedItemIndex < gridView.gridItems.length) {
        gridView.gridItems[gridView.selectedItemIndex].click();
      }
      gridView.clearSelection();
      event.preventDefault();
      break;
    case "Backspace":
      if (gridView.sourceMode === "folder" && gridView.sourcePath && gridView.sourcePath !== "/") {
        const parentPath = gridView.sourcePath.split("/").slice(0, -1).join("/") || "/";
        gridView.setSource("folder", parentPath);
        gridView.clearSelection();
        event.preventDefault();
      }
      break;
    case "Escape":
      if (gridView.selectedItemIndex >= 0) {
        gridView.hasKeyboardFocus = false;
        gridView.clearSelection();
        event.preventDefault();
      }
      break;
  }
  if (newIndex !== gridView.selectedItemIndex) {
    gridView.selectItem(newIndex);
  }
}

// src/fileWatcher.ts
var import_obsidian17 = require("obsidian");
var FileWatcher = class {
  // 用於去抖動 render()
  constructor(plugin, gridView) {
    this.renderTimer = null;
    // 以 200ms 去抖動的方式排程 render，避免短時間內大量重繪
    this.scheduleRender = (delay = 200) => {
      if (this.gridView.isPinned() && this.gridView.sourceMode === "backlinks" || this.gridView.isShowingNote) {
        return;
      }
      if (this.gridView.sourceMode === "recent-files" && this.gridView.containerEl.offsetParent === null) {
        return;
      }
      if (this.renderTimer !== null) {
        clearTimeout(this.renderTimer);
      }
      this.renderTimer = window.setTimeout(() => {
        this.gridView.render();
        this.renderTimer = null;
      }, delay);
    };
    this.plugin = plugin;
    this.gridView = gridView;
    this.app = plugin.app;
  }
  registerFileWatcher() {
    if (!this.plugin.settings.enableFileWatcher) {
      return;
    }
    this.plugin.registerEvent(
      this.app.vault.on("modify", (file) => {
        if (file instanceof import_obsidian17.TFile) {
          if (this.gridView.sourceMode === "recent-files") {
            if (isDocumentFile(file) || isMediaFile(file) && this.gridView.includeMedia) {
              this.scheduleRender(5e3);
            }
          }
        }
      })
    );
    this.plugin.registerEvent(
      this.app.vault.on("create", (file) => {
        if (file instanceof import_obsidian17.TFile) {
          if (this.gridView.searchQuery && !this.gridView.searchCurrentLocationOnly) {
            this.scheduleRender(2e3);
            return;
          }
          if (this.gridView.sourceMode === "random-note") {
            return;
          } else if (this.gridView.sourceMode === "recent-files") {
            if (isDocumentFile(file) || isMediaFile(file) && this.gridView.includeMedia) {
              this.scheduleRender(2e3);
            }
          } else if (this.gridView.sourceMode === "folder") {
            if (this.gridView.sourcePath) {
              const fileDirPath = file.path.split("/").slice(0, -1).join("/") || "/";
              if (fileDirPath === this.gridView.sourcePath) {
                this.scheduleRender();
              }
            }
          } else if (this.gridView.sourceMode === "backlinks") {
            if (isDocumentFile(file)) {
              this.scheduleRender();
            }
          } else {
            this.scheduleRender();
          }
        }
      })
    );
    this.plugin.registerEvent(
      this.app.vault.on("delete", (file) => {
        if (file instanceof import_obsidian17.TFile) {
          if (this.gridView) {
            const gridItemIndex = this.gridView.gridItems.findIndex(
              (item) => item.dataset.filePath === file.path
            );
            if (gridItemIndex >= 0) {
              this.gridView.gridItems[gridItemIndex].remove();
              this.gridView.gridItems.splice(gridItemIndex, 1);
              const gridContainer = this.gridView.containerEl.querySelector(".ge-grid-container");
              this.cleanupDateDividers(gridContainer);
            }
          }
        }
      })
    );
    this.plugin.registerEvent(
      this.app.vault.on("rename", (file, oldPath) => {
        if (file instanceof import_obsidian17.TFile) {
          const fileDirPath = file.path.split("/").slice(0, -1).join("/") || "/";
          const oldDirPath = oldPath.split("/").slice(0, -1).join("/") || "/";
          if (fileDirPath !== oldDirPath) {
            if (this.gridView.sourceMode === "folder") {
              if (this.gridView.sourcePath && this.gridView.searchQuery === "") {
                if (fileDirPath === this.gridView.sourcePath || oldDirPath === this.gridView.sourcePath) {
                  this.scheduleRender();
                  return;
                }
              }
            }
          }
          if (this.gridView) {
            const gridItemIndex = this.gridView.gridItems.findIndex(
              (item) => item.dataset.filePath === oldPath
            );
            if (gridItemIndex >= 0) {
              const getitle = this.gridView.gridItems[gridItemIndex].querySelector(".ge-grid-item .ge-title");
              if (getitle) {
                this.gridView.gridItems[gridItemIndex].dataset.filePath = file.path;
                getitle.textContent = file.basename;
                getitle.setAttribute("title", file.basename);
              }
            }
          }
        }
      })
    );
    this.plugin.registerEvent(
      this.app.internalPlugins.plugins.bookmarks.instance.on("changed", () => {
        if (this.gridView.sourceMode === "bookmarks") {
          this.scheduleRender();
        }
      })
    );
    this.plugin.registerEvent(
      this.app.workspace.on("file-open", (file) => {
        if (file instanceof import_obsidian17.TFile && this.gridView.searchQuery === "") {
          const sourceMode = this.gridView.sourceMode;
          if (sourceMode === "backlinks" || sourceMode === "outgoinglinks") {
            this.scheduleRender();
            return;
          }
          if (sourceMode.startsWith("custom-")) {
            const mode = this.plugin.settings.customModes.find((m) => m.internalName === sourceMode);
            if (mode && mode.dataviewCode.includes("dv.current")) {
              this.scheduleRender();
            }
          }
        }
      })
    );
  }
  // 清理日期分隔線
  cleanupDateDividers(container) {
    if (!container)
      return;
    const dateDividers = Array.from(container.querySelectorAll(".ge-date-divider"));
    for (let i = dateDividers.length - 1; i >= 0; i--) {
      const currentDivider = dateDividers[i];
      const nextDivider = dateDividers[i + 1];
      let nextElement = currentDivider.nextElementSibling;
      let hasItemsBetween = false;
      while (nextElement && (!nextDivider || nextElement !== nextDivider)) {
        if (!nextElement.classList.contains("ge-date-divider")) {
          hasItemsBetween = true;
          break;
        }
        nextElement = nextElement.nextElementSibling;
      }
      if (!nextDivider) {
        hasItemsBetween = currentDivider.nextElementSibling !== null;
      }
      if (!hasItemsBetween) {
        currentDivider.remove();
      }
    }
  }
};

// src/utils/mediaUtils.ts
var import_obsidian18 = require("obsidian");
async function findFirstImageInNote(app, content) {
  try {
    const internalStyle = /!?\[\[(.*?\.(?:jpg|jpeg|png|gif|webp|avif))(?:\|.*?)?\]\]/;
    const markdownStyle = /!\[(.*?)\]\(\s*(\S+?(?:\.(?:jpg|jpeg|png|gif|webp|avif)|format=(?:jpg|jpeg|png|gif|webp))[^\s)]*)\s*(?:\s+["'][^"']*["'])?\s*\)/;
    const frontmatterUrl = /^[\w\-_]+:\s*(https?:\/\/\S+?(?:\.(?:jpg|jpeg|png|gif|webp|avif)|format=(?:jpg|jpeg|png|gif|webp))[^\s]*)\s*$/;
    const combinedPatternSource = `(?:${internalStyle.source}|${markdownStyle.source}|${frontmatterUrl.source})`;
    const initialPattern = new RegExp(combinedPatternSource, "im");
    const internalMatch = content.match(initialPattern);
    if (internalMatch) {
      const firstImage = await processMediaLink(app, internalMatch);
      if (firstImage) {
        return firstImage;
      }
      const fallbackPattern = new RegExp(combinedPatternSource, "img");
      let match;
      const firstIndex = internalMatch.index;
      const firstMatchText = internalMatch[0];
      while ((match = fallbackPattern.exec(content)) !== null) {
        if (firstIndex !== void 0 && match.index === firstIndex && match[0] === firstMatchText) {
          continue;
        }
        const fallbackImage = await processMediaLink(app, match);
        if (fallbackImage) {
          return fallbackImage;
        }
      }
      return null;
    } else {
      return null;
    }
  } catch (error) {
    console.error("Error finding image in note:", error);
    return null;
  }
}
async function processMediaLink(app, internalMatch) {
  if (internalMatch[4]) {
    return await resolveUrl(app, internalMatch[4]);
  }
  if (internalMatch[1]) {
    const file = app.metadataCache.getFirstLinkpathDest(internalMatch[1], "");
    if (file) {
      return app.vault.getResourcePath(file);
    }
  }
  if (internalMatch[3]) {
    const url = internalMatch[3];
    if (isRemoteUrl(url)) {
      return await validateRemoteImage(url);
    } else {
      const file = app.metadataCache.getFirstLinkpathDest(url, "");
      if (!file) {
        const fileByPath = app.vault.getAbstractFileByPath(url);
        if (fileByPath instanceof import_obsidian18.TFile) {
          return app.vault.getResourcePath(fileByPath);
        }
      } else {
        return app.vault.getResourcePath(file);
      }
    }
  }
  return null;
}
function isRemoteUrl(url) {
  return /^https?:\/\//i.test(url);
}
async function resolveUrl(app, url) {
  if (isRemoteUrl(url)) {
    return await validateRemoteImage(url);
  }
  const file = app.metadataCache.getFirstLinkpathDest(url, "");
  if (file) {
    return app.vault.getResourcePath(file);
  }
  const fileByPath = app.vault.getAbstractFileByPath(url);
  if (fileByPath instanceof import_obsidian18.TFile) {
    return app.vault.getResourcePath(fileByPath);
  }
  return null;
}
async function validateRemoteImage(url) {
  try {
    const headResponse = await (0, import_obsidian18.requestUrl)({ url, method: "HEAD" });
    if (isSuccessfulStatus(headResponse)) {
      return url;
    }
    if (headResponse.status === 405 || headResponse.status === 501) {
      const getResponse = await (0, import_obsidian18.requestUrl)({ url });
      if (isSuccessfulStatus(getResponse)) {
        return url;
      }
    }
  } catch (error) {
    try {
      const getResponse = await (0, import_obsidian18.requestUrl)({ url });
      if (isSuccessfulStatus(getResponse)) {
        return url;
      }
    } catch (fallbackError) {
      console.warn("Remote image validation failed:", url, fallbackError);
    }
  }
  return null;
}
function isSuccessfulStatus(response) {
  return response.status >= 200 && response.status < 400;
}

// src/modal/noteSettingsModal.ts
var import_obsidian19 = require("obsidian");
function showNoteSettingsModal(app, plugin, file) {
  new NoteSettingsModal(app, plugin, file).open();
}
var NoteSettingsModal = class extends import_obsidian19.Modal {
  // 記錄初始的 isPinned 狀態
  constructor(app, plugin, file) {
    super(app);
    this.settings = {
      title: "",
      summary: "",
      color: "",
      isPinned: false,
      isMinimized: false
    };
    this.initialIsPinned = false;
    this.plugin = plugin;
    this.files = Array.isArray(file) ? file : [file];
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    await this.loadAttributes();
    if (this.files.length > 1) {
      new import_obsidian19.Setting(contentEl).setName(t("note_attribute_settings") + ` (${this.files.length} ${t("files")})`).setHeading();
    } else {
      new import_obsidian19.Setting(contentEl).setName(t("note_attribute_settings") + `: ${this.files[0].basename}`).setHeading();
    }
    if (this.files.length === 1 && this.files[0].extension === "md") {
      new import_obsidian19.Setting(contentEl).setName(t("note_title")).setDesc(t("note_title_desc")).addText((text) => {
        text.setValue(this.settings.title);
        text.onChange((value) => {
          this.settings.title = value;
        });
      });
      new import_obsidian19.Setting(contentEl).setName(t("note_summary")).setDesc(t("note_summary_desc")).addText((text) => {
        text.setValue(this.settings.summary);
        text.onChange((value) => {
          this.settings.summary = value;
        });
      });
    }
    if (this.files[0].extension === "md") {
      const isCurrentColorHex = /^#([0-9A-Fa-f]{3}){1,2}$/.test(this.settings.color);
      new import_obsidian19.Setting(contentEl).setName(t("note_color")).setDesc(t("note_color_desc")).addDropdown((dropdown) => {
        dropdown.addOption("", t("no_color")).addOption("red", t("color_red")).addOption("orange", t("color_orange")).addOption("yellow", t("color_yellow")).addOption("green", t("color_green")).addOption("cyan", t("color_cyan")).addOption("blue", t("color_blue")).addOption("purple", t("color_purple")).addOption("pink", t("color_pink")).addOption("custom", t("color_custom")).setValue(isCurrentColorHex ? "custom" : this.settings.color).onChange((value) => {
          if (value !== "custom") {
            this.settings.color = value;
            if (hexInput) {
              hexInput.setValue("");
            }
          }
        });
      });
      let hexInput;
      const hexSetting = new import_obsidian19.Setting(contentEl).setName(t("custom_hex_color")).setDesc(t("custom_hex_color_desc")).addText((text) => {
        hexInput = text;
        text.setPlaceholder("#FF8800 or #F80").setValue(isCurrentColorHex ? this.settings.color : "").onChange((value) => {
          if (value && /^#([0-9A-Fa-f]{3}){1,2}$/.test(value)) {
            this.settings.color = value;
            text.inputEl.removeClass("ge-input-error");
          } else if (value && value.trim() !== "") {
            text.inputEl.addClass("ge-input-error");
          } else {
            text.inputEl.removeClass("ge-input-error");
            if (value === "") {
              this.settings.color = "";
            }
          }
        });
      });
    }
    if (this.files[0].parent && this.files[0].parent !== this.app.vault.getRoot()) {
      new import_obsidian19.Setting(contentEl).setName(t("pinned")).setDesc(t("pinned_desc")).addToggle((toggle) => {
        toggle.setValue(this.settings.isPinned).onChange((value) => {
          this.settings.isPinned = value;
        });
      });
    }
    if (this.files[0].extension === "md") {
      new import_obsidian19.Setting(contentEl).setName(t("display_minimized")).setDesc(t("display_minimized_desc")).addToggle((toggle) => {
        toggle.setValue(this.settings.isMinimized).onChange((value) => {
          this.settings.isMinimized = value;
        });
      });
    }
    const buttonSetting = new import_obsidian19.Setting(contentEl);
    buttonSetting.addButton((button) => {
      button.setButtonText(t("create_shortcut")).onClick(async () => {
        await this.createShortcut();
      });
    });
    buttonSetting.addButton((button) => {
      button.setButtonText(t("confirm")).setCta().onClick(() => {
        this.saveAttributes();
        this.close();
      });
    });
  }
  // 創建重定向筆記
  async createShortcut() {
    var _a, _b;
    try {
      for (const originalFile of this.files) {
        const originalName = originalFile.basename;
        const extension = originalFile.extension;
        let counter = 0;
        let redirectName = `\u{1F4C4} ${originalName}`;
        let newPath = `${((_a = originalFile.parent) == null ? void 0 : _a.path) || ""}/${redirectName}.${extension}`;
        while (this.app.vault.getAbstractFileByPath(newPath)) {
          counter++;
          redirectName = `${originalName} ${counter}`;
          newPath = `${((_b = originalFile.parent) == null ? void 0 : _b.path) || ""}/${redirectName}.${extension}`;
        }
        const newFile = await this.app.vault.create(newPath, "");
        await this.app.fileManager.processFrontMatter(newFile, (frontmatter) => {
          const link = this.app.fileManager.generateMarkdownLink(originalFile, "");
          frontmatter.type = "file";
          frontmatter.redirect = link;
        });
      }
      setTimeout(() => {
      }, 200);
      this.close();
    } catch (error) {
      console.error("Create redirect note error", error);
    }
  }
  // 讀取現有筆記的設定
  async loadAttributes() {
    var _a;
    try {
      if (this.files.length === 1) {
        const fileCache = this.app.metadataCache.getFileCache(this.files[0]);
        if (fileCache && fileCache.frontmatter) {
          const titleField = this.plugin.settings.noteTitleField || "title";
          if (fileCache.frontmatter[titleField]) {
            this.settings.title = fileCache.frontmatter[titleField] || "";
          }
          const summaryField = this.plugin.settings.noteSummaryField || "summary";
          if (fileCache.frontmatter[summaryField]) {
            this.settings.summary = fileCache.frontmatter[summaryField] || "";
          }
        }
      }
      if (this.files.length > 0) {
        const fileCache = this.app.metadataCache.getFileCache(this.files[0]);
        if (fileCache && fileCache.frontmatter) {
          if ("color" in fileCache.frontmatter) {
            this.settings.color = fileCache.frontmatter.color || "";
          }
          if (fileCache.frontmatter.display === "minimized") {
            this.settings.isMinimized = true;
          }
        }
      }
      const folder = this.files[0].parent;
      if (folder && folder !== this.app.vault.getRoot()) {
        const notePath = `${folder.path}/${folder.name}.md`;
        const noteFile = this.app.vault.getAbstractFileByPath(notePath);
        if (noteFile instanceof import_obsidian19.TFile) {
          const fm = (_a = this.app.metadataCache.getFileCache(noteFile)) == null ? void 0 : _a.frontmatter;
          if (fm && Array.isArray(fm["pinned"])) {
            this.settings.isPinned = fm["pinned"].includes(this.files[0].name);
          }
        }
        this.initialIsPinned = this.settings.isPinned;
      }
    } catch (error) {
      console.error("\u7121\u6CD5\u8B80\u53D6\u7B46\u8A18\u5C6C\u6027\u8A2D\u5B9A", error);
    }
  }
  // 儲存筆記屬性設定
  async saveAttributes() {
    try {
      if (this.files.length === 1 && this.files[0].extension === "md") {
        await this.app.fileManager.processFrontMatter(this.files[0], (frontmatter) => {
          const titleField = this.plugin.settings.noteTitleField || "title";
          if (this.settings.title) {
            frontmatter[titleField] = this.settings.title;
          } else {
            delete frontmatter[titleField];
          }
          const summaryField = this.plugin.settings.noteSummaryField || "summary";
          if (this.settings.summary) {
            frontmatter[summaryField] = this.settings.summary;
          } else {
            delete frontmatter[summaryField];
          }
          if (this.settings.color) {
            frontmatter["color"] = this.settings.color;
          } else {
            delete frontmatter["color"];
          }
          if (this.settings.isMinimized) {
            frontmatter["display"] = "minimized";
          } else {
            if (frontmatter["display"] === "minimized")
              delete frontmatter["display"];
          }
        });
      }
      if (this.files.length > 1) {
        for (const file of this.files) {
          if (file.extension === "md") {
            await this.app.fileManager.processFrontMatter(file, (frontmatter) => {
              if (this.settings.color) {
                frontmatter["color"] = this.settings.color;
              } else {
                delete frontmatter["color"];
              }
              if (this.settings.isMinimized) {
                frontmatter["display"] = "minimized";
              } else {
                if (frontmatter["display"] === "minimized")
                  delete frontmatter["display"];
              }
            });
          }
        }
      }
      setTimeout(() => {
      }, 200);
      if (this.initialIsPinned !== this.settings.isPinned) {
        for (const file of this.files) {
          const folder = file.parent;
          if (!folder || folder === this.app.vault.getRoot())
            continue;
          const notePath = `${folder.path}/${folder.name}.md`;
          let noteFile = this.app.vault.getAbstractFileByPath(notePath);
          if (!(noteFile instanceof import_obsidian19.TFile)) {
            const initialFrontmatter = this.settings.isPinned ? `pinned:
  - ${file.name}
` : "";
            const initialContent = `---
${initialFrontmatter}---
`;
            noteFile = await this.app.vault.create(notePath, initialContent);
          }
          await this.app.fileManager.processFrontMatter(noteFile, (frontmatter) => {
            let list = Array.isArray(frontmatter["pinned"]) ? frontmatter["pinned"] : [];
            if (this.settings.isPinned) {
              if (!list.includes(file.name))
                list.push(file.name);
            } else {
              list = list.filter((n) => n !== file.name);
            }
            if (list.length > 0) {
              frontmatter["pinned"] = list;
            } else {
              delete frontmatter["pinned"];
            }
          });
        }
      }
      setTimeout(() => {
        this.app.workspace.getLeavesOfType("grid-view").forEach((leaf) => {
          if (leaf.view instanceof GridView) {
            leaf.view.render();
          }
        });
      }, 200);
    } catch (error) {
      console.error("\u7121\u6CD5\u5132\u5B58\u7B46\u8A18\u5C6C\u6027\u8A2D\u5B9A", error);
    }
  }
};

// src/GridView.ts
var GridView = class extends import_obsidian20.ItemView {
  // 存儲事件清理函數
  constructor(leaf, plugin) {
    super(leaf);
    this.sourceMode = "";
    // 模式選擇
    this.sourcePath = "";
    // 目前實際使用的排序模式（可能被資料夾 metadata 臨時覆蓋）
    this.searchQuery = "";
    // 搜尋關鍵字
    this.searchCurrentLocationOnly = false;
    // 是否只搜尋當前位置
    this.searchFilesNameOnly = false;
    // 是否只搜尋筆記名稱
    this.searchMediaFiles = false;
    // 是否搜尋媒體檔案
    this.includeMedia = false;
    // 是否包含媒體檔案
    this.selectedItemIndex = -1;
    // 當前選中的項目索引
    this.selectedItems = /* @__PURE__ */ new Set();
    // 存儲多選的項目索引
    this.gridItems = [];
    // 存儲所有網格項目的引用
    this.hasKeyboardFocus = false;
    // 檔案監聽器
    this.recentSources = [];
    // 歷史記錄
    this.futureSources = [];
    // 未來紀錄（前進堆疊）
    this.minMode = false;
    // 最小模式
    this.showIgnoredFolders = false;
    // 顯示忽略資料夾
    this.showDateDividers = false;
    // 顯示日期分隔器
    this.showNoteTags = false;
    // 顯示筆記標籤
    this.pinnedList = [];
    // 置頂清單
    this.taskFilter = "uncompleted";
    // 任務分類
    this.hideHeaderElements = false;
    // 是否隱藏標題列元素（模式名稱和按鈕）
    this.customOptionIndex = -1;
    // 自訂模式選項索引    
    this.baseCardLayout = "horizontal";
    // 使用者在設定或 UI 中選擇的基礎卡片樣式（不受資料夾臨時覆蓋影響）
    this.cardLayout = "horizontal";
    // 目前實際使用的卡片樣式（可能被資料夾 metadata 臨時覆蓋）
    this.renderToken = 0;
    // 用於取消尚未完成之批次排程的遞增令牌
    this.isShowingNote = false;
    // 是否正在顯示筆記
    this.noteViewContainer = null;
    // 筆記檢視容器
    this.eventCleanupFunctions = [];
    this.plugin = plugin;
    this.containerEl.addClass("ge-grid-view-container");
    this.baseSortType = this.plugin.settings.defaultSortType;
    this.sortType = this.baseSortType;
    this.baseCardLayout = this.plugin.settings.cardLayout;
    this.cardLayout = this.baseCardLayout;
    this.showDateDividers = this.plugin.settings.dateDividerMode !== "none";
    this.showNoteTags = this.plugin.settings.showNoteTags;
    this.searchCurrentLocationOnly = this.plugin.settings.searchCurrentLocationOnly;
    this.searchFilesNameOnly = this.plugin.settings.searchFilesNameOnly;
    this.searchMediaFiles = this.plugin.settings.searchMediaFiles;
    if (this.plugin.settings.enableFileWatcher) {
      this.fileWatcher = new FileWatcher(plugin, this);
      this.fileWatcher.registerFileWatcher();
    }
    this.registerDomEvent(window, "keydown", (event) => {
      if (event.key === "ArrowLeft" && event.altKey) {
        if (this.app.workspace.getActiveViewOfType(GridView) !== this)
          return;
        if (this.isShowingNote)
          return;
        if (document.querySelector(".modal-container"))
          return;
        if (this.sourceMode === "folder" && this.sourcePath && this.sourcePath !== "/") {
          event.preventDefault();
          if (typeof event.stopImmediatePropagation === "function") {
            event.stopImmediatePropagation();
          } else {
            event.stopPropagation();
          }
          const parentPath = this.sourcePath.split("/").slice(0, -1).join("/") || "/";
          this.setSource("folder", parentPath);
          this.clearSelection();
        }
      } else if (event.key === "ArrowRight" && event.altKey) {
        if (this.app.workspace.getActiveViewOfType(GridView) !== this)
          return;
        if (this.isShowingNote)
          return;
        if (document.querySelector(".modal-container"))
          return;
        if (this.selectedItemIndex >= 0 && this.selectedItemIndex < this.gridItems.length) {
          event.preventDefault();
          if (typeof event.stopImmediatePropagation === "function") {
            event.stopImmediatePropagation();
          } else {
            event.stopPropagation();
          }
          this.gridItems[this.selectedItemIndex].click();
        }
      }
    }, true);
    this.registerDomEvent(document, "keydown", (event) => {
      if (this.app.workspace.getActiveViewOfType(GridView) === this) {
        return handleKeyDown(this, event);
      }
    });
    this.registerEvent(
      this.app.metadataCache.on("dataview:index-ready", () => {
        if (this.sourceMode.startsWith("custom-")) {
          this.render();
        }
      })
    );
  }
  getViewType() {
    return "grid-view";
  }
  getIcon() {
    if (this.sourceMode.startsWith("custom-")) {
      return "puzzle";
    } else if (this.sourceMode === "bookmarks") {
      return "bookmark";
    } else if (this.sourceMode === "search") {
      return "search";
    } else if (this.sourceMode === "backlinks") {
      return "links-coming-in";
    } else if (this.sourceMode === "outgoinglinks") {
      return "links-going-out";
    } else if (this.sourceMode === "all-files") {
      return "book-text";
    } else if (this.sourceMode === "recent-files") {
      return "calendar-days";
    } else if (this.sourceMode === "random-note") {
      return "dice";
    } else if (this.sourceMode === "tasks") {
      return "square-check-big";
    } else if (this.sourceMode === "folder") {
      return "folder";
    } else {
      return "grid";
    }
  }
  getDisplayText() {
    if (this.sourceMode.startsWith("custom-")) {
      const mode = this.plugin.settings.customModes.find((m) => m.internalName === this.sourceMode);
      return mode ? mode.displayName : t("custom_mode");
    } else if (this.sourceMode === "") {
      return t("grid_view_title");
    } else if (this.sourceMode === "bookmarks") {
      return t("bookmarks_mode");
    } else if (this.sourceMode === "search") {
      return t("search_results");
    } else if (this.sourceMode === "backlinks") {
      return t("backlinks_mode");
    } else if (this.sourceMode === "outgoinglinks") {
      return t("outgoinglinks_mode");
    } else if (this.sourceMode === "all-files") {
      return t("all_files_mode");
    } else if (this.sourceMode === "recent-files") {
      return t("recent_files_mode");
    } else if (this.sourceMode === "random-note") {
      return t("random_note_mode");
    } else if (this.sourceMode === "tasks") {
      return t("tasks_mode");
    } else if (this.sourceMode === "folder") {
      if (this.sourcePath === "/") {
        return t("root");
      }
      return this.sourcePath;
    } else {
      return "";
    }
  }
  // 判斷當前Leaf是否被釘選
  isPinned() {
    var _a, _b;
    return (_b = (_a = this.leaf) == null ? void 0 : _a.pinned) != null ? _b : false;
  }
  // 將來源加入歷史記錄
  // 1. 插入到陣列開頭，代表最新使用
  // 2. 超過上限時裁切
  pushHistory(mode, path, searchQuery = "", searchCurrentLocationOnly = false, searchFilesNameOnly = false, searchMediaFiles = false) {
    const sanitizedPath = path != null ? path : "";
    const key = JSON.stringify({
      mode,
      path: sanitizedPath,
      searchQuery,
      searchCurrentLocationOnly,
      searchFilesNameOnly,
      searchMediaFiles
    });
    this.recentSources.unshift(key);
    this.futureSources = [];
    const limit = 10;
    if (this.recentSources.length > limit) {
      this.recentSources.length = limit;
    }
  }
  // 設定來源模式
  async setSource(mode, path = "", recordHistory = true, searchQuery, searchCurrentLocationOnly, searchFilesNameOnly, searchMediaFiles) {
    var _a, _b, _c;
    if (this.sourceMode === mode && this.sourcePath === path && this.searchQuery === searchQuery && this.searchCurrentLocationOnly === searchCurrentLocationOnly && this.searchFilesNameOnly === searchFilesNameOnly && this.searchMediaFiles === searchMediaFiles) {
      return;
    }
    if (this.sourceMode && recordHistory) {
      this.pushHistory(
        this.sourceMode,
        this.sourcePath,
        this.searchQuery,
        this.searchCurrentLocationOnly,
        this.searchFilesNameOnly,
        this.searchMediaFiles
      );
    }
    if (this.searchQuery && !this.searchCurrentLocationOnly) {
      this.searchQuery = "";
    }
    if (mode !== "")
      this.sourceMode = mode;
    if (path !== "")
      this.sourcePath = path;
    if (this.sourceMode === "")
      this.sourceMode = "folder";
    if (this.sourcePath === "")
      this.sourcePath = "/";
    this.pinnedList = [];
    if (this.sourceMode === "folder") {
      const folderName = this.sourcePath.split("/").pop() || "";
      const mdFilePath = `${this.sourcePath}/${folderName}.md`;
      const mdFile = this.app.vault.getAbstractFileByPath(mdFilePath);
      let tempLayout = this.baseCardLayout;
      let folderSort;
      if (mdFile instanceof import_obsidian20.TFile) {
        const metadata = (_a = this.app.metadataCache.getFileCache(mdFile)) == null ? void 0 : _a.frontmatter;
        folderSort = metadata == null ? void 0 : metadata.sort;
        if ((metadata == null ? void 0 : metadata.cardLayout) === "horizontal" || (metadata == null ? void 0 : metadata.cardLayout) === "vertical") {
          tempLayout = metadata.cardLayout;
        }
      }
      this.cardLayout = tempLayout;
      this.sortType = folderSort && typeof folderSort === "string" && folderSort.trim() !== "" ? folderSort : this.baseSortType;
    } else {
      this.cardLayout = this.baseCardLayout;
      this.sourcePath = "/";
      if (this.sourceMode.startsWith("custom-")) {
        this.customOptionIndex = -1;
        this.sortType = "none";
      } else {
        this.sortType = this.baseSortType;
      }
    }
    if (searchQuery !== void 0) {
      this.searchQuery = searchQuery;
    }
    if (searchCurrentLocationOnly !== void 0) {
      this.searchCurrentLocationOnly = searchCurrentLocationOnly;
    }
    if (searchFilesNameOnly !== void 0) {
      this.searchFilesNameOnly = searchFilesNameOnly;
    }
    if (searchMediaFiles !== void 0) {
      this.searchMediaFiles = searchMediaFiles;
    }
    this.app.workspace.requestSaveLayout();
    try {
      (_c = (_b = this.app.workspace).trigger) == null ? void 0 : _c.call(_b, "ge-grid-source-changed", {
        mode: this.sourceMode,
        path: this.sourcePath
      });
    } catch (e) {
    }
    await this.render();
  }
  // 清理事件監聽器
  onunload() {
    this.eventCleanupFunctions.forEach((cleanup) => {
      try {
        cleanup();
      } catch (error) {
        console.warn("GridExplorer: Error during event cleanup:", error);
      }
    });
    this.eventCleanupFunctions = [];
    super.onunload();
  }
  // 渲染網格
  async render() {
    var _a;
    let selectedFilePath = null;
    if (this.selectedItemIndex >= 0 && this.selectedItemIndex < this.gridItems.length) {
      const selectedItem = this.gridItems[this.selectedItemIndex];
      selectedFilePath = selectedItem.dataset.filePath || null;
    }
    this.eventCleanupFunctions.forEach((cleanup) => {
      try {
        cleanup();
      } catch (error) {
        console.warn("GridExplorer: Error during event cleanup:", error);
      }
    });
    this.eventCleanupFunctions = [];
    this.containerEl.empty();
    renderHeaderButton(this);
    renderModePath(this);
    const contentEl = this.containerEl.createDiv("view-content");
    if (this.sourceMode === "folder" && this.sourcePath !== "/") {
      this.pinnedList = [];
      const folderPath = this.sourcePath;
      if (!folderPath || folderPath === "/")
        return;
      const folderName = folderPath.split("/").pop() || "";
      const notePath = `${folderPath}/${folderName}.md`;
      const noteFile = this.app.vault.getAbstractFileByPath(notePath);
      if (noteFile instanceof import_obsidian20.TFile) {
        const metadata = (_a = this.app.metadataCache.getFileCache(noteFile)) == null ? void 0 : _a.frontmatter;
        if (metadata) {
          if (Array.isArray(metadata["pinned"])) {
            if (this.plugin.settings.folderNoteDisplaySettings === "pinned") {
              this.pinnedList = metadata["pinned"].filter((name) => name !== `${folderName}.md`);
              this.pinnedList.unshift(`${folderName}.md`);
            } else {
              this.pinnedList = metadata["pinned"];
            }
          } else if (this.plugin.settings.folderNoteDisplaySettings === "pinned") {
            this.pinnedList = [`${folderName}.md`];
          }
        }
      }
    }
    ;
    await this.grid_render();
    this.leaf.updateHeader();
    if (selectedFilePath && this.hasKeyboardFocus) {
      const newIndex = this.gridItems.findIndex((item) => item.dataset.filePath === selectedFilePath);
      if (newIndex >= 0) {
        this.selectItem(newIndex);
      }
    }
  }
  // 渲染網格內容
  async grid_render() {
    var _a;
    const container = this.containerEl.querySelector(".view-content");
    container.empty();
    container.addClass("ge-grid-container");
    const displayValue = this.hideHeaderElements ? "none" : "flex";
    const headerButtons = this.containerEl.querySelector(".ge-header-buttons");
    const modeHeaderContainer = this.containerEl.querySelector(".ge-mode-header-container");
    if (headerButtons)
      headerButtons.style.display = displayValue;
    if (modeHeaderContainer)
      modeHeaderContainer.style.display = displayValue;
    if (this.cardLayout === "vertical") {
      container.addClass("ge-vertical-card");
    } else {
      container.removeClass("ge-vertical-card");
    }
    container.addEventListener("click", (event) => {
      if (event.target === container) {
        this.clearSelection();
        this.hasKeyboardFocus = false;
      }
    });
    const settings = this.plugin.settings;
    const gridItemWidth = this.cardLayout === "vertical" ? settings.verticalGridItemWidth : settings.gridItemWidth;
    const gridItemHeight = this.cardLayout === "vertical" ? settings.verticalGridItemHeight : settings.gridItemHeight;
    const imageAreaWidth = settings.imageAreaWidth;
    const imageAreaHeight = this.cardLayout === "vertical" ? settings.verticalImageAreaHeight : settings.imageAreaHeight;
    container.style.setProperty("--grid-item-width", gridItemWidth + "px");
    if (gridItemHeight === 0 || this.minMode) {
      container.style.setProperty("--grid-item-height", "auto");
    } else {
      container.style.setProperty("--grid-item-height", gridItemHeight + "px");
    }
    container.style.setProperty("--image-area-width", imageAreaWidth + "px");
    container.style.setProperty("--image-area-height", imageAreaHeight + "px");
    container.style.setProperty("--title-font-size", settings.titleFontSize + "em");
    if (this.cardLayout === "vertical") {
      if (settings.verticalCardImagePosition === "top") {
        container.addClass("ge-image-top");
        container.removeClass("ge-image-bottom");
      } else {
        container.addClass("ge-image-bottom");
        container.removeClass("ge-image-top");
      }
    }
    const modeClasses = [
      "bookmarks",
      "search",
      "backlinks",
      "outgoinglinks",
      "all-files",
      "recent-files",
      "random-note",
      "tasks",
      "folder"
    ];
    this.containerEl.removeClass("ge-mode-custom");
    modeClasses.forEach((mode) => {
      this.containerEl.removeClass(`ge-mode-${mode}`);
    });
    if (this.sourceMode.startsWith("custom-")) {
      this.containerEl.addClass("ge-mode-custom");
    } else if (modeClasses.includes(this.sourceMode)) {
      this.containerEl.addClass(`ge-mode-${this.sourceMode}`);
    }
    this.gridItems = [];
    if (this.sourceMode === "bookmarks" && !((_a = this.app.internalPlugins.plugins.bookmarks) == null ? void 0 : _a.enabled)) {
      new import_obsidian20.Notice(t("bookmarks_plugin_disabled"));
      return;
    }
    if (this.sourceMode === "backlinks" && !this.app.workspace.getActiveFile()) {
      const noFilesDiv = container.createDiv("ge-no-files");
      noFilesDiv.setText(t("no_backlinks"));
      if (this.plugin.statusBarItem) {
        this.plugin.statusBarItem.setText("");
      }
      return;
    }
    renderFolder(this, container);
    let files = await renderFiles(this, container);
    if (files.length === 0) {
      const noFilesDiv = container.createDiv("ge-no-files");
      if (this.sourceMode !== "backlinks") {
        noFilesDiv.setText(t("no_files"));
      } else {
        noFilesDiv.setText(t("no_backlinks"));
      }
      if (this.plugin.statusBarItem) {
        this.plugin.statusBarItem.setText("");
      }
      return;
    }
    if (this.pinnedList.length > 0 && this.sourceMode === "folder") {
      const pinnedFiles = files.filter((f) => this.pinnedList.includes(f.name));
      pinnedFiles.sort((a, b) => this.pinnedList.indexOf(a.name) - this.pinnedList.indexOf(b.name));
      const otherFiles = files.filter((f) => !this.pinnedList.includes(f.name));
      files = [...pinnedFiles, ...otherFiles];
    }
    if (this.sourceMode === "folder" && this.sourcePath !== "/") {
      if (this.plugin.settings.folderNoteDisplaySettings === "hidden") {
        const currentFolder = this.app.vault.getAbstractFileByPath(this.sourcePath);
        if (currentFolder instanceof import_obsidian20.TFolder) {
          const folderName = currentFolder.name;
          files = files.filter((f) => f.name !== `${folderName}.md`);
        }
      }
    }
    // === Row height equalization (debounced) ===
    const geEqualizeRowHeights = (() => {
      let timer = null;
      return () => {
        clearTimeout(timer);
        timer = setTimeout(() => {
          if (container.classList.contains('ge-vertical-card')) return;
          const savedScrollTop = container.scrollTop;
          const items = Array.from(container.querySelectorAll('.ge-grid-item:not(.ge-folder-item):not(.ge-media-card)'));
          // Reset min-height so we can measure natural heights
          items.forEach(el => el.style.minHeight = '');
          void container.offsetHeight; // force reflow
          // Group items by visual row (same offsetTop)
          const rows = new Map();
          items.forEach(el => {
            const top = Math.round(el.offsetTop);
            if (!rows.has(top)) rows.set(top, []);
            rows.get(top).push(el);
          });
          // Set min-height to tallest card in each row
          rows.forEach(rowItems => {
            if (rowItems.length <= 1) return;
            const maxH = Math.max(...rowItems.map(el => el.scrollHeight));
            rowItems.forEach(el => el.style.minHeight = maxH + 'px');
          });
          container.scrollTop = savedScrollTop;
        }, 80);
      };
    })();
    // ResizeObserver: re-equalize when container size changes (panel resize, etc.)
    const geResizeObs = new ResizeObserver(geEqualizeRowHeights);
    geResizeObs.observe(container);
    // === End row height equalization setup ===
    const observer = new IntersectionObserver((entries, observer2) => {
      entries.forEach(async (entry) => {
        var _a2, _b, _c;
        if (entry.isIntersecting) {
          const fileEl = entry.target;
          const filePath = fileEl.dataset.filePath;
          if (!filePath)
            return;
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (!(file instanceof import_obsidian20.TFile))
            return;
          let imageUrl = "";
          const contentArea = fileEl.querySelector(".ge-content-area");
          if (!contentArea.hasAttribute("data-loaded")) {
            if (file.extension === "md") {
              let summaryLength = this.plugin.settings.summaryLength;
              if (summaryLength < 50) {
                summaryLength = 100;
                this.plugin.settings.summaryLength = 100;
                this.plugin.saveSettings();
              }
              const content = await this.app.vault.cachedRead(file);
              const frontMatterInfo = (0, import_obsidian20.getFrontMatterInfo)(content);
              let metadata = void 0;
              if (frontMatterInfo.exists) {
                metadata = (_a2 = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a2.frontmatter;
              }
              let pEl = null;
              if (!this.minMode) {
                let summaryField = this.plugin.settings.noteSummaryField || "summary";
                let summaryValue = metadata == null ? void 0 : metadata[summaryField];
                if (this.sourceMode.startsWith("custom-")) {
                  const mode = this.plugin.settings.customModes.find((m) => m.internalName === this.sourceMode);
                  if (mode) {
                    let fields = (mode == null ? void 0 : mode.fields) || "";
                    if (this.customOptionIndex >= 0 && mode.options && this.customOptionIndex < mode.options.length) {
                      const option = mode.options[this.customOptionIndex];
                      fields = option.fields || "";
                    }
                    if (fields) {
                      const fieldList = (() => {
                        const parts = [];
                        let buf = "";
                        let depth = 0;
                        for (let i = 0; i < fields.length; i++) {
                          const ch = fields[i];
                          const next = fields[i + 1];
                          if (ch === "{" && next === "{") {
                            depth++;
                            buf += "{{";
                            i++;
                            continue;
                          }
                          if (ch === "}" && next === "}") {
                            if (depth > 0)
                              depth--;
                            buf += "}}";
                            i++;
                            continue;
                          }
                          if (ch === "," && depth === 0) {
                            if (buf.trim())
                              parts.push(buf.trim());
                            buf = "";
                            continue;
                          }
                          buf += ch;
                        }
                        if (buf.trim())
                          parts.push(buf.trim());
                        return parts;
                      })();
                      const fieldValues = [];
                      fieldList.forEach((fieldEntry) => {
                        var _a3;
                        let raw = fieldEntry.trim();
                        let calcExpr = null;
                        const calcMatch = raw.match(/\{\{(.*?)\}\}/);
                        if (calcMatch) {
                          calcExpr = calcMatch[1];
                          raw = raw.substring(0, calcMatch.index).trim();
                        }
                        const aliasIdx = raw.lastIndexOf("|");
                        let fieldKey;
                        let labelName;
                        if (aliasIdx !== -1) {
                          fieldKey = raw.substring(0, aliasIdx).trim();
                          labelName = raw.substring(aliasIdx + 1).trim() || fieldKey;
                        } else {
                          fieldKey = raw;
                          labelName = fieldKey;
                        }
                        if ((metadata == null ? void 0 : metadata[fieldKey]) !== void 0 && (metadata == null ? void 0 : metadata[fieldKey]) !== "" && (metadata == null ? void 0 : metadata[fieldKey]) !== null) {
                          let value = metadata[fieldKey];
                          if (typeof metadata[fieldKey] === "number") {
                            value = metadata[fieldKey].toLocaleString();
                          }
                          if (Array.isArray(metadata[fieldKey])) {
                            value = metadata[fieldKey].join(", ");
                          }
                          let outputValue = value;
                          if (calcExpr) {
                            try {
                              const fn = new Function("value", "metadata", "app", "dv", `return (${calcExpr});`);
                              const dvApi = (_a3 = this.app.plugins.plugins.dataview) == null ? void 0 : _a3.api;
                              outputValue = fn(value, metadata, this.app, dvApi);
                            } catch (error) {
                              console.error("GridExplorer: evaluate displayName error", error);
                            }
                          }
                          fieldValues.push(`${labelName}: ${outputValue}`);
                        }
                      });
                      if (fieldValues.length > 0) {
                        summaryValue = fieldValues.join("\n");
                      }
                    }
                  }
                }
                if (summaryValue) {
                  if (!this.sourceMode.startsWith("custom-")) {
                    pEl = contentArea.createEl("p", { text: summaryValue.trim() });
                  } else {
                    pEl = contentArea.createEl("p", { text: summaryValue.trim(), cls: "ge-content-area-p-field" });
                  }
                } else {
                  let contentWithoutFrontmatter = "";
                  if (summaryLength < 500) {
                    contentWithoutFrontmatter = content.substring(frontMatterInfo.contentStart).slice(0, 500);
                  } else {
                    contentWithoutFrontmatter = content.substring(frontMatterInfo.contentStart).slice(0, summaryLength + summaryLength);
                  }
                  let contentWithoutMediaLinks = "";
                  if (this.plugin.settings.showCodeBlocksInSummary) {
                    contentWithoutMediaLinks = contentWithoutFrontmatter;
                  } else {
                    contentWithoutMediaLinks = contentWithoutFrontmatter.replace(/```[\s\S]*?```\n/g, "").replace(/```[\s\S]*$/, "");
                  }
                  contentWithoutMediaLinks = contentWithoutMediaLinks.replace(/<!--[\s\S]*?-->/g, "").replace(/!?\[([^\]]*)\]\([^)]+\)|!?\[\[([^\]]+)\]\]/g, (match, p1, p2) => {
                    var _a3;
                    const linkText = p1 || p2 || "";
                    if (!linkText)
                      return "";
                    const extension = ((_a3 = linkText.split(".").pop()) == null ? void 0 : _a3.toLowerCase()) || "";
                    return IMAGE_EXTENSIONS.has(extension) || VIDEO_EXTENSIONS.has(extension) ? "" : linkText;
                  });
                  if (contentWithoutMediaLinks.startsWith("# ") || contentWithoutMediaLinks.startsWith("## ") || contentWithoutMediaLinks.startsWith("### ")) {
                    contentWithoutMediaLinks = contentWithoutMediaLinks.split("\n").slice(1).join("\n");
                  }
                  if (!this.plugin.settings.showCodeBlocksInSummary) {
                    contentWithoutMediaLinks = contentWithoutMediaLinks.replace(/[>|\-#*]/g, "").trim();
                  }
                  const preview = contentWithoutMediaLinks.slice(0, summaryLength) + (contentWithoutMediaLinks.length > summaryLength ? "..." : "");
                  pEl = contentArea.createEl("p", { text: preview.trim() });
                }
              }
              const titleEl = fileEl.querySelector(".ge-title");
              if (titleEl) {
                (0, import_obsidian20.setTooltip)(contentArea, `${titleEl.textContent}`);
              }
              if (frontMatterInfo.exists) {
                const colorValue = metadata == null ? void 0 : metadata.color;
                if (colorValue) {
                  if (isHexColor(colorValue)) {
                    fileEl.addClass("ge-note-color-custom");
                    fileEl.style.setProperty("--ge-note-color-bg", hexToRgba(colorValue, 0.2));
                    fileEl.style.setProperty("--ge-note-color-border", hexToRgba(colorValue, 0.5));
                    if (pEl) {
                      pEl.addClass("ge-note-color-custom-text");
                      pEl.style.setProperty("--ge-note-color-text", hexToRgba(colorValue, 0.7));
                    }
                  } else {
                    fileEl.addClass(`ge-note-color-${colorValue}`);
                    if (pEl) {
                      pEl.addClass(`ge-note-color-${colorValue}-text`);
                    }
                  }
                }
                const titleField = this.plugin.settings.noteTitleField || "title";
                const titleValue = metadata == null ? void 0 : metadata[titleField];
                if (titleValue) {
                  if (titleEl) {
                    titleEl.textContent = titleValue;
                  }
                }
                const displayValue2 = metadata == null ? void 0 : metadata.display;
                if (displayValue2 === "minimized") {
                  if (pEl) {
                    pEl.remove();
                  }
                  const imageAreaEl = fileEl.querySelector(".ge-image-area");
                  if (imageAreaEl) {
                    imageAreaEl.remove();
                  }
                  fileEl.style.height = "100%";
                }
                const redirectType = metadata == null ? void 0 : metadata.type;
                const redirectPath = metadata == null ? void 0 : metadata.redirect;
                if (redirectType && typeof redirectPath === "string" && redirectPath.trim() !== "") {
                  const iconContainer = fileEl.querySelector(".ge-icon-container");
                  if (iconContainer) {
                    (0, import_obsidian20.setIcon)(iconContainer, "shuffle");
                  }
                }
              }
              imageUrl = await findFirstImageInNote(this.app, content);
            } else {
              if (!this.minMode) {
                contentArea.createEl("p", { text: file.extension.toUpperCase() });
              }
              (0, import_obsidian20.setTooltip)(fileEl, `${file.name}`, { delay: 2e3 });
            }
            if (file.extension === "md" && this.showNoteTags && !this.minMode) {
              const fileCache = this.app.metadataCache.getFileCache(file);
              const displaySetting = (_b = fileCache == null ? void 0 : fileCache.frontmatter) == null ? void 0 : _b.display;
              if (displaySetting !== "minimized") {
                const allTags = /* @__PURE__ */ new Set();
                let frontmatterTags = ((_c = fileCache == null ? void 0 : fileCache.frontmatter) == null ? void 0 : _c.tags) || [];
                if (typeof frontmatterTags === "string") {
                  frontmatterTags.split(/[,\s]+/).filter((tag) => tag.trim() !== "").forEach((tag) => allTags.add(tag));
                } else if (Array.isArray(frontmatterTags)) {
                  frontmatterTags.forEach((tag) => {
                    if (typeof tag === "string") {
                      if (tag.includes(" ")) {
                        tag.split(/\s+/).filter((subTag) => subTag.trim() !== "").forEach((subTag) => allTags.add(subTag));
                      } else {
                        allTags.add(tag);
                      }
                    }
                  });
                }
                const cacheTags = (fileCache == null ? void 0 : fileCache.tags) || [];
                cacheTags.forEach((tagObj) => {
                  const tag = tagObj.tag.startsWith("#") ? tagObj.tag.substring(1) : tagObj.tag;
                  allTags.add(tag);
                });
                if (allTags.size > 0) {
                  const tagsContainer = contentArea.createDiv("ge-tags-container");
                  const displayTags = Array.from(allTags);
                  displayTags.forEach((tag) => {
                    const tagEl = tagsContainer.createEl("span", {
                      cls: "ge-tag",
                      text: tag.startsWith("#") ? tag : `#${tag}`
                    });
                    tagEl.addEventListener("contextmenu", (e) => {
                      e.preventDefault();
                      e.stopPropagation();
                      const tagText = tag.startsWith("#") ? tag : `#${tag}`;
                      const menu = new import_obsidian20.Menu();
                      if (!this.searchQuery.includes(tagText)) {
                        menu.addItem(
                          (item) => item.setTitle(t("add_tag_to_search")).setIcon("circle-plus").onClick(() => {
                            const searchQuery = this.searchQuery + ` ${tagText}`;
                            this.setSource("", "", true, searchQuery);
                            return false;
                          })
                        );
                      }
                      if (this.searchQuery.includes(tagText)) {
                        menu.addItem(
                          (item) => item.setTitle(t("remove_tag_from_search")).setIcon("circle-minus").onClick(() => {
                            const searchQuery = this.searchQuery.replace(tagText, "");
                            this.setSource("", "", true, searchQuery);
                            return false;
                          })
                        );
                      }
                      menu.showAtPosition({
                        x: e.clientX,
                        y: e.clientY
                      });
                    });
                    tagEl.addEventListener("click", (e) => {
                      e.preventDefault();
                      e.stopPropagation();
                      const tagText = tag.startsWith("#") ? tag : `#${tag}`;
                      if (this.searchQuery !== tagText) {
                        this.setSource("", "", true, tagText);
                      }
                      return false;
                    });
                  });
                }
              }
            }
            contentArea.setAttribute("data-loaded", "true");
          }
          if (!this.minMode) {
            const imageArea = fileEl.querySelector(".ge-image-area");
            if (imageArea && !imageArea.hasAttribute("data-loaded")) {
              if (isImageFile(file)) {
                const img = imageArea.createEl("img");
                img.src = this.app.vault.getResourcePath(file);
                img.draggable = false;
                imageArea.setAttribute("data-loaded", "true");
              } else if (isVideoFile(file)) {
                if (this.plugin.settings.showVideoThumbnails) {
                  const video = imageArea.createEl("video");
                  video.src = this.app.vault.getResourcePath(file);
                } else {
                  const videoThumb = imageArea.createDiv("ge-video-thumbnail");
                  (0, import_obsidian20.setIcon)(videoThumb, "play-circle");
                }
                imageArea.setAttribute("data-loaded", "true");
              } else if (file.extension === "md") {
                if (imageUrl) {
                  const img = imageArea.createEl("img");
                  img.src = imageUrl;
                  img.draggable = false;
                  imageArea.setAttribute("data-loaded", "true");
                } else {
                  imageArea.remove();
                }
              } else {
                imageArea.remove();
              }
            }
          }
          observer2.unobserve(fileEl);
          // Trigger row height equalization after content loads
          geEqualizeRowHeights();
          // Also equalize after images finish loading (async)
          fileEl.querySelectorAll('img').forEach(img => {
            if (!img.complete) {
              img.addEventListener('load', geEqualizeRowHeights, { once: true });
            }
          });
        }
      });
    }, {
      root: container,
      rootMargin: "50px",
      // 預先載入視窗外 50px 的內容
      threshold: 0.1
    });
    if (files.length > 0) {
      const dateDividerMode = this.plugin.settings.dateDividerMode || "none";
      const sortType = this.sortType;
      const shouldShowDateDividers = dateDividerMode !== "none" && (sortType.startsWith("mtime-") || sortType.startsWith("ctime-")) && this.sourceMode !== "random-note" && this.sourceMode !== "bookmarks" && this.showDateDividers;
      let lastDateString = "";
      let pinDividerAdded = false;
      let blankDividerAdded = false;
      const currentToken = ++this.renderToken;
      const state = { lastDateString, pinDividerAdded, blankDividerAdded };
      const paramsBase = { container, observer, files, dateDividerMode, sortType, shouldShowDateDividers, state };
      const selfRef = this;
      if (import_obsidian20.Platform.isIosApp) {
        const TIME_BUDGET_MS = 6;
        const processChunk = (start) => {
          if (currentToken !== this.renderToken)
            return;
          const startTime = performance.now();
          let i = start;
          for (; i < files.length; i++) {
            selfRef.processFile(files[i], paramsBase);
            if (performance.now() - startTime > TIME_BUDGET_MS) {
              break;
            }
          }
          if (i < files.length) {
            requestAnimationFrame(() => processChunk(i));
          }
        };
        processChunk(0);
      } else {
        const batchSize = 50;
        const processBatch = (start) => {
          if (currentToken !== this.renderToken)
            return;
          const end = Math.min(start + batchSize, files.length);
          for (let i = start; i < end; i++) {
            selfRef.processFile(files[i], paramsBase);
          }
          if (end < files.length) {
            const cb = () => processBatch(end);
            if (typeof window.requestIdleCallback === "function") {
              window.requestIdleCallback(cb);
            } else {
              setTimeout(cb, 0);
            }
          }
        };
        processBatch(0);
      }
    }
    if (this.plugin.statusBarItem) {
      this.plugin.statusBarItem.setText(`${files.length} ${t("files")}`);
    }
  }
  // 處理單個檔案渲染
  processFile(file, params) {
    var _a;
    const { container, observer, files, dateDividerMode, sortType, shouldShowDateDividers, state } = params;
    if (!state.pinDividerAdded && this.pinnedList.includes(file.name)) {
      const pinDivider = container.createDiv("ge-pin-divider");
      pinDivider.textContent = t("pinned");
      state.pinDividerAdded = true;
      if (import_obsidian20.Platform.isIosApp) {
        pinDivider.style.width = "calc(100% - 16px)";
      }
    }
    if (state.pinDividerAdded && !state.blankDividerAdded && !this.pinnedList.includes(file.name)) {
      container.createDiv("ge-break");
      state.blankDividerAdded = true;
    }
    if (shouldShowDateDividers && !this.pinnedList.includes(file.name)) {
      let timestamp = 0;
      if (sortType.startsWith("mtime-") || sortType.startsWith("ctime-")) {
        const isModifiedTime = sortType.startsWith("mtime-") || this.sourceMode === "recent-files";
        let frontMatterDate = null;
        if (file.extension === "md") {
          const metadata = this.app.metadataCache.getFileCache(file);
          if (metadata == null ? void 0 : metadata.frontmatter) {
            const fieldSetting = isModifiedTime ? this.plugin.settings.modifiedDateField : this.plugin.settings.createdDateField;
            const fieldNames = fieldSetting ? fieldSetting.split(",").map((f) => f.trim()).filter(Boolean) : [];
            for (const fieldName of fieldNames) {
              const dateStr = metadata.frontmatter[fieldName];
              if (dateStr) {
                const date = new Date(dateStr);
                if (!isNaN(date.getTime())) {
                  frontMatterDate = date;
                  break;
                }
              }
            }
          }
        }
        if (frontMatterDate) {
          timestamp = frontMatterDate.getTime();
        } else {
          timestamp = isModifiedTime ? file.stat.mtime : file.stat.ctime;
        }
      }
      const fileDate = new Date(timestamp);
      let currentDateString = "";
      if (dateDividerMode === "year") {
        currentDateString = fileDate.getFullYear().toString();
      } else if (dateDividerMode === "month") {
        const year = fileDate.getFullYear();
        const month = fileDate.getMonth() + 1;
        currentDateString = `${year}-${month.toString().padStart(2, "0")}`;
      } else {
        currentDateString = fileDate.toLocaleDateString();
      }
      if (currentDateString !== state.lastDateString) {
        state.lastDateString = currentDateString;
        const dateDivider = container.createDiv("ge-date-divider");
        dateDivider.textContent = currentDateString;
        if (import_obsidian20.Platform.isIosApp) {
          dateDivider.style.width = "calc(100% - 16px)";
        }
      }
    }
    const fileEl = container.createDiv("ge-grid-item");
    this.gridItems.push(fileEl);
    fileEl.dataset.filePath = file.path;
    const parentPath = ((_a = file.parent) == null ? void 0 : _a.path) || "";
    const parentName = parentPath.split("/").pop() || "";
    if (parentName === file.basename) {
      fileEl.addClass("ge-foldernote");
    }
    if (this.pinnedList.includes(file.name)) {
      fileEl.addClass("ge-pinned");
    }
    const contentArea = fileEl.createDiv("ge-content-area");
    const titleContainer = contentArea.createDiv("ge-title-container");
    const extension = file.extension.toLowerCase();
    if (this.cardLayout === "vertical" && (isImageFile(file) || isVideoFile(file)) && !this.minMode) {
      fileEl.addClass("ge-media-card");
    }
    if (isImageFile(file)) {
      const iconContainer = titleContainer.createDiv("ge-icon-container ge-img");
      (0, import_obsidian20.setIcon)(iconContainer, "image");
    } else if (isVideoFile(file)) {
      const iconContainer = titleContainer.createDiv("ge-icon-container ge-video");
      (0, import_obsidian20.setIcon)(iconContainer, "play-circle");
    } else if (isAudioFile(file)) {
      const iconContainer = titleContainer.createDiv("ge-icon-container ge-audio");
      (0, import_obsidian20.setIcon)(iconContainer, "music");
    } else if (extension === "pdf") {
      const iconContainer = titleContainer.createDiv("ge-icon-container ge-pdf");
      (0, import_obsidian20.setIcon)(iconContainer, "paperclip");
    } else if (extension === "canvas") {
      const iconContainer = titleContainer.createDiv("ge-icon-container ge-canvas");
      (0, import_obsidian20.setIcon)(iconContainer, "layout-dashboard");
    } else if (extension === "base") {
      const iconContainer = titleContainer.createDiv("ge-icon-container ge-base");
      (0, import_obsidian20.setIcon)(iconContainer, "layout-list");
    } else if (extension === "md" || extension === "txt") {
      const iconContainer = titleContainer.createDiv("ge-icon-container");
      (0, import_obsidian20.setIcon)(iconContainer, "file-text");
    } else {
      const iconContainer = titleContainer.createDiv("ge-icon-container");
      (0, import_obsidian20.setIcon)(iconContainer, "file");
    }
    const shouldShowExtension = this.minMode && extension !== "md";
    const displayText = shouldShowExtension ? `${file.basename}.${file.extension}` : file.basename;
    const titleEl = titleContainer.createEl("span", { cls: "ge-title", text: displayText });
    if (this.plugin.settings.multiLineTitle)
      titleEl.addClass("ge-multiline-title");
    if (!this.minMode) {
      fileEl.createDiv("ge-image-area");
    }
    observer.observe(fileEl);
    if (import_obsidian20.Platform.isDesktop && file.extension === "md" && !this.plugin.settings.showNoteInGrid) {
      let triggeredInHover = false;
      let isHovering = false;
      let isMouseDown = false;
      let keydownListener = null;
      const trigger = () => {
        if (triggeredInHover || isMouseDown)
          return;
        triggeredInHover = true;
        if (!this.openShortcutFile(file)) {
          this.showNoteInGrid(file);
        }
      };
      const onKeyDown = (e) => {
        if (isHovering && e.ctrlKey && !isMouseDown && this.app.workspace.getActiveViewOfType(GridView) === this) {
          setTimeout(() => {
            if (isHovering && !triggeredInHover && !isMouseDown && this.app.workspace.getActiveViewOfType(GridView) === this) {
              trigger();
            }
          }, 300);
        }
      };
      const onMouseDown = () => {
        isMouseDown = true;
        triggeredInHover = true;
      };
      const onMouseUp = () => {
        isMouseDown = false;
        setTimeout(() => {
          if (isHovering) {
            triggeredInHover = false;
          }
        }, 50);
      };
      const onMouseEnter = () => {
        triggeredInHover = false;
        isHovering = true;
        if (!keydownListener) {
          keydownListener = onKeyDown;
          document.addEventListener("keydown", keydownListener, { capture: true });
        }
      };
      const onMouseLeave = () => {
        isHovering = false;
        isMouseDown = false;
        if (keydownListener) {
          document.removeEventListener("keydown", keydownListener, { capture: true });
          keydownListener = null;
        }
        triggeredInHover = false;
      };
      fileEl.addEventListener("mouseenter", onMouseEnter);
      fileEl.addEventListener("mouseleave", onMouseLeave);
      fileEl.addEventListener("mousedown", onMouseDown);
      fileEl.addEventListener("mouseup", onMouseUp);
      this.eventCleanupFunctions.push(() => {
        if (keydownListener) {
          document.removeEventListener("keydown", keydownListener, { capture: true });
        }
        fileEl.removeEventListener("mouseenter", onMouseEnter);
        fileEl.removeEventListener("mouseleave", onMouseLeave);
        fileEl.removeEventListener("mousedown", onMouseDown);
        fileEl.removeEventListener("mouseup", onMouseUp);
      });
    }
    fileEl.addEventListener("click", (event) => {
      const index = this.gridItems.indexOf(fileEl);
      if (index < 0)
        return;
      if (event.ctrlKey || event.metaKey) {
        if (isMediaFile(file)) {
          if (isAudioFile(file)) {
            FloatingAudioPlayer.open(this.app, file);
          } else {
            this.openMediaFile(file, files);
          }
        } else {
          this.app.workspace.getLeaf(true).openFile(file);
        }
        event.preventDefault();
        return;
      } else if (event.shiftKey) {
        this.handleRangeSelection(index);
        this.hasKeyboardFocus = true;
        event.preventDefault();
        return;
      } else if (event.altKey) {
        this.selectItem(index, true);
        this.hasKeyboardFocus = true;
        event.preventDefault();
        return;
      } else if (this.plugin.settings.showNoteInGrid) {
        this.selectItem(index);
        this.hasKeyboardFocus = true;
        if (isMediaFile(file)) {
          if (isAudioFile(file)) {
            FloatingAudioPlayer.open(this.app, file);
          } else {
            this.openMediaFile(file, files);
          }
        } else if (file.extension === "pdf" || file.extension === "canvas" || file.extension === "base") {
          this.app.workspace.getLeaf(true).openFile(file);
        } else {
          if (!this.openShortcutFile(file)) {
            this.showNoteInGrid(file);
          }
        }
        event.preventDefault();
        return;
      } else {
        this.selectItem(index);
        this.hasKeyboardFocus = true;
        if (isMediaFile(file)) {
          if (isAudioFile(file)) {
            FloatingAudioPlayer.open(this.app, file);
          } else {
            this.openMediaFile(file, files);
          }
        } else {
          if (!this.openShortcutFile(file)) {
            const leaf = this.getLeafByMode();
            if (this.searchQuery) {
              this.app.vault.cachedRead(file).then((content) => {
                const searchQuery = this.searchQuery;
                const lowerContent = content.toLowerCase();
                let idx = -1;
                let lineNumber = 0;
                idx = lowerContent.indexOf(searchQuery.toLowerCase());
                if (idx === -1 && searchQuery.includes(" ")) {
                  const keywords = searchQuery.split(/\s+/).filter((k) => k.trim() !== "");
                  if (keywords.length > 1) {
                    for (const keyword of keywords) {
                      const keywordIdx = lowerContent.indexOf(keyword.toLowerCase());
                      if (keywordIdx !== -1) {
                        idx = keywordIdx;
                        break;
                      }
                    }
                  }
                }
                if (idx !== -1) {
                  lineNumber = content.substring(0, idx).split("\n").length - 1;
                  leaf.openFile(file, { eState: { line: lineNumber } }).then(() => {
                    var _a2, _b, _c;
                    (_c = (_b = (_a2 = this.app) == null ? void 0 : _a2.commands) == null ? void 0 : _b.executeCommandById) == null ? void 0 : _c.call(_b, "editor:focus");
                  });
                  return;
                }
                leaf.openFile(file);
              });
            } else {
              leaf.openFile(file);
            }
          }
        }
      }
    });
    fileEl.addEventListener("mousedown", (event) => {
      if (event.button === 1) {
        event.preventDefault();
      }
    });
    fileEl.addEventListener("mouseup", (event) => {
      if (event.button === 1) {
        event.preventDefault();
        if (!isMediaFile(file)) {
          this.app.workspace.getLeaf(true).openFile(file);
        }
      }
    });
    if (import_obsidian20.Platform.isDesktop) {
      fileEl.setAttribute("draggable", "true");
      fileEl.addEventListener("dragstart", (event) => {
        var _a2, _b, _c, _d;
        const index = this.gridItems.indexOf(fileEl);
        if (index >= 0) {
          if (!this.selectedItems.has(index)) {
            this.selectItem(index);
          }
        }
        const selectedFiles = this.getSelectedFiles();
        let drag_filename = "";
        if (selectedFiles.length > 1) {
          const mdList = selectedFiles.map((f) => this.app.fileManager.generateMarkdownLink(f, "")).join("\n");
          (_a2 = event.dataTransfer) == null ? void 0 : _a2.setData("text/plain", mdList);
          (_b = event.dataTransfer) == null ? void 0 : _b.setData("application/obsidian-grid-explorer-files", JSON.stringify(selectedFiles.map((f) => f.path)));
          drag_filename = `${selectedFiles.length} ${t("files")}`;
        } else {
          const mdLink = this.app.fileManager.generateMarkdownLink(file, "");
          (_c = event.dataTransfer) == null ? void 0 : _c.setData("text/plain", mdLink);
          (_d = event.dataTransfer) == null ? void 0 : _d.setData("application/obsidian-grid-explorer-files", JSON.stringify([file.path]));
          drag_filename = file.basename;
        }
        const dragImage = document.createElement("div");
        dragImage.className = "ge-custom-drag-preview";
        dragImage.textContent = drag_filename;
        document.body.appendChild(dragImage);
        event.dataTransfer.setDragImage(dragImage, 20, 20);
        setTimeout(() => {
          document.body.removeChild(dragImage);
        }, 0);
        event.dataTransfer.effectAllowed = "all";
        fileEl.addClass("ge-dragging");
      });
      fileEl.addEventListener("dragend", () => {
        fileEl.removeClass("ge-dragging");
      });
    }
    fileEl.addEventListener("contextmenu", (event) => {
      event.preventDefault();
      const menu = new import_obsidian20.Menu();
      const index = this.gridItems.indexOf(fileEl);
      if (index >= 0) {
        if (!this.selectedItems.has(index)) {
          this.selectItem(index);
        }
      }
      const selectedFiles = this.getSelectedFiles();
      if (selectedFiles.length > 1) {
        this.app.workspace.trigger("files-menu", menu, selectedFiles);
        const allMdFiles = selectedFiles.every((file2) => file2.extension === "md");
        if (allMdFiles) {
          menu.addItem((item) => {
            item.setTitle(t("set_note_attribute")).setIcon("palette").onClick(() => {
              showNoteSettingsModal(this.app, this.plugin, selectedFiles);
            });
          });
        }
      } else {
        this.app.workspace.trigger("file-menu", menu, file);
      }
      menu.addItem((item) => {
        var _a2, _b;
        (_b = (_a2 = item.setTitle(t("open_in_new_tab")).setIcon("external-link")).setSection) == null ? void 0 : _b.call(_a2, "open").onClick(() => {
          if (selectedFiles.length > 1) {
            for (const f of selectedFiles) {
              this.app.workspace.getLeaf(true).openFile(f);
            }
          } else {
            this.app.workspace.getLeaf(true).openFile(file);
          }
        });
      });
      if (import_obsidian20.Platform.isMobile) {
        menu.addItem((item) => {
          item.setTitle(t("add_to_stash")).setIcon("archive").onClick(() => {
            this.addFilesToStash(selectedFiles);
          });
        });
      }
      menu.addItem((item) => {
        item.setWarning(true);
        item.setTitle(t("delete_note")).setIcon("trash").onClick(async () => {
          if (selectedFiles.length > 1) {
            for (const f of selectedFiles) {
              await this.app.fileManager.trashFile(f);
            }
          } else {
            await this.app.fileManager.trashFile(file);
          }
          this.clearSelection();
        });
      });
      menu.showAtMouseEvent(event);
    });
  }
  // 將檔案添加到 ExplorerView 的暫存區
  addFilesToStash(files) {
    const explorerLeaves = this.app.workspace.getLeavesOfType(EXPLORER_VIEW_TYPE);
    if (explorerLeaves.length === 0) {
      new import_obsidian20.Notice("\u627E\u4E0D\u5230 Explorer \u8996\u5716");
      return;
    }
    const explorerView = explorerLeaves[0].view;
    if (!explorerView) {
      new import_obsidian20.Notice("\u7121\u6CD5\u8A2A\u554F Explorer \u8996\u5716");
      return;
    }
    const filePaths = files.map((file) => file.path);
    explorerView.addToStash(filePaths);
    explorerView.refresh();
    new import_obsidian20.Notice(t("added_to_stash"));
  }
  onPaneMenu(menu, source) {
    menu.addItem((item) => {
      item.setTitle(t("hide_header_elements")).setIcon("archive-restore").setChecked(this.hideHeaderElements).onClick(() => {
        this.hideHeaderElements = !this.hideHeaderElements;
        this.app.workspace.requestSaveLayout();
        this.render();
      });
    });
    menu.addItem((item) => {
      item.setTitle(t("reselect")).setIcon("grid").onClick(() => {
        showFolderSelectionModal(this.app, this.plugin, this);
      });
    });
    menu.addItem((item) => {
      item.setTitle(t("refresh")).setIcon("refresh-cw").onClick(() => {
        this.render();
      });
    });
  }
  // 清除選中狀態
  clearSelection() {
    this.gridItems.forEach((item) => {
      item.removeClass("ge-selected-item");
    });
    this.selectedItemIndex = -1;
    this.selectedItems.clear();
  }
  // 選中指定索引的項目
  selectItem(index, multiSelect = false) {
    if (!multiSelect) {
      this.gridItems.forEach((item) => {
        item.removeClass("ge-selected-item");
      });
      this.selectedItems.clear();
    }
    if (index >= 0 && index < this.gridItems.length) {
      this.selectedItemIndex = index;
      const selectedItem = this.gridItems[index];
      if (multiSelect && this.selectedItems.has(index)) {
        selectedItem.removeClass("ge-selected-item");
        this.selectedItems.delete(index);
        if (this.selectedItems.size === 0) {
          this.selectedItemIndex = -1;
        } else {
          this.selectedItemIndex = Array.from(this.selectedItems).pop() || -1;
        }
      } else {
        selectedItem.addClass("ge-selected-item");
        this.selectedItems.add(index);
      }
      selectedItem.scrollIntoView({ block: "nearest" });
    }
  }
  // 處理範圍選擇（Shift 鍵）
  handleRangeSelection(index) {
    if (this.selectedItemIndex === -1) {
      this.selectItem(index);
      return;
    }
    const startIndex = Math.min(this.selectedItemIndex, index);
    const endIndex = Math.max(this.selectedItemIndex, index);
    this.gridItems.forEach((item) => {
      item.removeClass("ge-selected-item");
    });
    this.selectedItems.clear();
    for (let i = startIndex; i <= endIndex; i++) {
      this.gridItems[i].addClass("ge-selected-item");
      this.selectedItems.add(i);
    }
    this.selectedItemIndex = index;
  }
  // 獲取所有選中項目的檔案
  getSelectedFiles() {
    const files = [];
    this.selectedItems.forEach((index) => {
      const fileEl = this.gridItems[index];
      const filePath = fileEl.dataset.filePath;
      if (filePath) {
        const file = this.app.vault.getAbstractFileByPath(filePath);
        if (file instanceof import_obsidian20.TFile) {
          files.push(file);
        }
      }
    });
    return files;
  }
  // 開啟媒體檔案
  openMediaFile(file, mediaFiles) {
    const getMediaFilesPromise = mediaFiles ? Promise.resolve(mediaFiles.filter((f) => isMediaFile(f))) : getFiles(this, this.includeMedia).then((allFiles) => allFiles.filter((f) => isMediaFile(f)));
    getMediaFilesPromise.then((filteredMediaFiles) => {
      const currentIndex = filteredMediaFiles.findIndex((f) => f.path === file.path);
      if (currentIndex === -1)
        return;
      const mediaModal = new MediaModal(this.app, file, filteredMediaFiles, this);
      mediaModal.open();
    });
  }
  // 根據 openNoteLayout 設定獲取對應的 leaf
  getLeafByMode() {
    var _a;
    const mode = this.plugin.settings.openNoteLayout;
    switch (mode) {
      case "newTab":
        return this.app.workspace.getLeaf("tab");
      case "split":
        const mainEntry = this.app.workspace.rootSplit;
        if (mainEntry && ((_a = mainEntry == null ? void 0 : mainEntry.children) == null ? void 0 : _a.length) > 1) {
          return this.app.workspace.getLeaf(false);
        } else {
          return this.app.workspace.getLeaf("split");
        }
      case "newWindow":
        return this.app.workspace.getLeaf("window");
      case "default":
      default:
        return this.app.workspace.getLeaf();
    }
  }
  // 開啟捷徑檔案
  openShortcutFile(file) {
    var _a, _b, _c, _d, _e;
    const fileCache = this.app.metadataCache.getFileCache(file);
    if (!(fileCache == null ? void 0 : fileCache.frontmatter))
      return false;
    const redirectType = (_a = fileCache == null ? void 0 : fileCache.frontmatter) == null ? void 0 : _a.type;
    const redirectPath = (_b = fileCache == null ? void 0 : fileCache.frontmatter) == null ? void 0 : _b.redirect;
    if (redirectType && typeof redirectPath === "string" && redirectPath.trim() !== "") {
      let target;
      if (redirectType === "file") {
        const trimmed = redirectPath.trim();
        const isEmbed = trimmed.startsWith("!");
        const wikilink = isEmbed ? trimmed.substring(1) : trimmed;
        if (wikilink.startsWith("[[") && wikilink.endsWith("]]")) {
          let linkInner = wikilink.slice(2, -2).trim();
          const pipeIdx = linkInner.indexOf("|");
          if (pipeIdx !== -1)
            linkInner = linkInner.substring(0, pipeIdx).trim();
          target = this.app.metadataCache.getFirstLinkpathDest(linkInner, file.path);
        } else {
          target = this.app.vault.getAbstractFileByPath((0, import_obsidian20.normalizePath)(redirectPath));
        }
        if (!target)
          return false;
        if (target instanceof import_obsidian20.TFile) {
          this.getLeafByMode().openFile(target);
          return true;
        } else {
          new import_obsidian20.Notice(`${t("target_not_found")}: ${redirectPath}`);
        }
      } else if (redirectType === "folder") {
        target = this.app.vault.getAbstractFileByPath((0, import_obsidian20.normalizePath)(redirectPath));
        if (!target)
          return false;
        if (target instanceof import_obsidian20.TFolder) {
          this.setSource("folder", redirectPath);
          this.clearSelection();
          requestAnimationFrame(async () => {
            var _a2;
            const cardLayout = (_a2 = fileCache == null ? void 0 : fileCache.frontmatter) == null ? void 0 : _a2.cardLayout;
            if (cardLayout && cardLayout !== this.cardLayout) {
              this.cardLayout = cardLayout;
              this.render();
            }
          });
          return true;
        } else {
          new import_obsidian20.Notice(`${t("target_not_found")}: ${redirectPath}`);
        }
      } else if (redirectType === "mode") {
        this.setSource(redirectPath);
        this.clearSelection();
        requestAnimationFrame(async () => {
          var _a2;
          const cardLayout = (_a2 = fileCache == null ? void 0 : fileCache.frontmatter) == null ? void 0 : _a2.cardLayout;
          if (cardLayout && cardLayout !== this.cardLayout) {
            this.cardLayout = cardLayout;
            this.render();
          }
        });
        return true;
      } else if (redirectType === "search") {
        const searchCurrentLocationOnly = ((_c = fileCache == null ? void 0 : fileCache.frontmatter) == null ? void 0 : _c.searchCurrentLocationOnly) || false;
        const searchFilesNameOnly = ((_d = fileCache == null ? void 0 : fileCache.frontmatter) == null ? void 0 : _d.searchFilesNameOnly) || false;
        const searchMediaFiles = ((_e = fileCache == null ? void 0 : fileCache.frontmatter) == null ? void 0 : _e.searchMediaFiles) || false;
        this.setSource("", "", true, redirectPath, searchCurrentLocationOnly, searchFilesNameOnly, searchMediaFiles);
        this.clearSelection();
        return true;
      } else if (redirectType === "uri") {
        if (redirectPath.startsWith("http://") || redirectPath.startsWith("https://") || redirectPath.startsWith("obsidian://") || redirectPath.startsWith("file://")) {
          window.open(redirectPath, "_blank");
          return true;
        } else {
          new import_obsidian20.Notice(`${t("target_not_found")}: ${redirectPath}`);
        }
      } else {
        new import_obsidian20.Notice(`${t("target_not_found")}: ${redirectPath}`);
      }
    }
    return false;
  }
  // 在網格視圖中直接顯示筆記
  async showNoteInGrid(file) {
    if (this.isShowingNote) {
      this.hideNoteInGrid();
    }
    const gridContainer = this.containerEl.querySelector(".ge-grid-container");
    if (!gridContainer)
      return;
    this.noteViewContainer = this.containerEl.createDiv("ge-note-view-container");
    const topBar = this.noteViewContainer.createDiv("ge-note-top-bar");
    const leftBar = topBar.createDiv("ge-note-top-left");
    const rightBar = topBar.createDiv("ge-note-top-right");
    const noteTitle = leftBar.createDiv("ge-note-title");
    noteTitle.textContent = file.basename;
    (0, import_obsidian20.setTooltip)(noteTitle, file.basename);
    const editButton = rightBar.createEl("button", { cls: "ge-note-edit-button" });
    (0, import_obsidian20.setIcon)(editButton, "pencil");
    editButton.addEventListener("click", () => {
      this.getLeafByMode().openFile(file);
    });
    const closeButton = rightBar.createEl("button", { cls: "ge-note-close-button" });
    (0, import_obsidian20.setIcon)(closeButton, "x");
    closeButton.addEventListener("click", () => {
      this.hideNoteInGrid();
    });
    const scrollContainer = this.noteViewContainer.createDiv("ge-note-scroll-container");
    const isInSidebar = this.leaf.getRoot() === this.app.workspace.leftSplit || this.leaf.getRoot() === this.app.workspace.rightSplit;
    if (isInSidebar) {
      scrollContainer.style.fontSize = "1em";
      scrollContainer.style.backgroundColor = "var(--background-secondary)";
    }
    const noteContent = scrollContainer.createDiv("ge-note-content-container");
    if (isInSidebar) {
      noteContent.style.padding = "15px";
    }
    const noteContentArea = noteContent.createDiv("ge-note-content");
    try {
      const content = await this.app.vault.read(file);
      await import_obsidian20.MarkdownRenderer.render(
        this.app,
        content,
        noteContentArea,
        file.path,
        this
      );
      noteContentArea.querySelectorAll("img").forEach((img) => img.dataset.sourcePath = file.path);
      const handleLinkClick = (e) => {
        const target = e.target;
        const link = target.closest("a.internal-link");
        if (link) {
          e.preventDefault();
          e.stopPropagation();
          const href = link.getAttribute("href");
          if (href) {
            const linkText = link.getAttribute("data-href") || href;
            const linkedFile = this.app.metadataCache.getFirstLinkpathDest(linkText, file.path);
            if (linkedFile) {
              this.getLeafByMode().openFile(linkedFile);
            }
          }
        }
      };
      this.registerDomEvent(noteContentArea, "click", handleLinkClick);
    } catch (error) {
      noteContentArea.textContent = "\u7121\u6CD5\u8F09\u5165\u7B46\u8A18\u5167\u5BB9";
      console.error("Error loading note content:", error);
    }
    this.isShowingNote = true;
    const handleKeyDown2 = (e) => {
      if (e.key === "Escape") {
        this.hideNoteInGrid();
        e.preventDefault();
      }
    };
    document.addEventListener("keydown", handleKeyDown2);
    this.noteViewContainer.keydownHandler = handleKeyDown2;
  }
  // 隱藏筆記顯示
  hideNoteInGrid() {
    if (!this.isShowingNote)
      return;
    if (this.noteViewContainer) {
      const keydownHandler = this.noteViewContainer.keydownHandler;
      if (keydownHandler) {
        document.removeEventListener("keydown", keydownHandler);
      }
      this.noteViewContainer.remove();
      this.noteViewContainer = null;
    }
    this.isShowingNote = false;
  }
  // 保存視圖狀態
  getState() {
    return {
      type: "grid-view",
      state: {
        sourceMode: this.sourceMode,
        sourcePath: this.sourcePath,
        baseSortType: this.baseSortType,
        sortType: this.sortType,
        searchQuery: this.searchQuery,
        searchCurrentLocationOnly: this.searchCurrentLocationOnly,
        searchFilesNameOnly: this.searchFilesNameOnly,
        searchMediaFiles: this.searchMediaFiles,
        includeMedia: this.includeMedia,
        minMode: this.minMode,
        showIgnoredFolders: this.showIgnoredFolders,
        baseCardLayout: this.baseCardLayout,
        cardLayout: this.cardLayout,
        hideHeaderElements: this.hideHeaderElements,
        showDateDividers: this.showDateDividers,
        showNoteTags: this.showNoteTags,
        recentSources: this.recentSources,
        futureSources: this.futureSources
      }
    };
  }
  // 讀取視圖狀態
  async setState(state) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m;
    if (state == null ? void 0 : state.state) {
      this.sourceMode = state.state.sourceMode || "folder";
      this.sourcePath = state.state.sourcePath || "/";
      this.baseSortType = state.state.baseSortType || this.plugin.settings.defaultSortType;
      this.sortType = state.state.sortType || this.baseSortType;
      this.searchQuery = state.state.searchQuery || "";
      this.searchCurrentLocationOnly = (_a = state.state.searchCurrentLocationOnly) != null ? _a : false;
      this.searchFilesNameOnly = (_b = state.state.searchFilesNameOnly) != null ? _b : false;
      this.searchMediaFiles = (_c = state.state.searchMediaFiles) != null ? _c : false;
      this.includeMedia = (_d = state.state.includeMedia) != null ? _d : false;
      this.minMode = (_e = state.state.minMode) != null ? _e : false;
      this.showIgnoredFolders = (_f = state.state.showIgnoredFolders) != null ? _f : false;
      this.baseCardLayout = (_g = state.state.baseCardLayout) != null ? _g : "horizontal";
      this.cardLayout = (_h = state.state.cardLayout) != null ? _h : this.baseCardLayout;
      this.hideHeaderElements = (_i = state.state.hideHeaderElements) != null ? _i : false;
      this.showDateDividers = (_j = state.state.showDateDividers) != null ? _j : this.plugin.settings.dateDividerMode !== "none";
      this.showNoteTags = (_k = state.state.showNoteTags) != null ? _k : this.plugin.settings.showNoteTags;
      this.recentSources = (_l = state.state.recentSources) != null ? _l : [];
      this.futureSources = (_m = state.state.futureSources) != null ? _m : [];
      await this.render();
    }
  }
};

// src/settings.ts
var import_obsidian21 = require("obsidian");
var DEFAULT_SETTINGS = {
  ignoredFolders: [],
  ignoredFolderPatterns: [],
  // 預設以字串忽略的資料夾模式
  defaultSortType: "mtime-desc",
  // 預設排序模式：修改時間倒序
  gridItemWidth: 300,
  // 網格項目寬度，預設 300
  gridItemHeight: 0,
  // 網格項目高度，預設 0
  imageAreaWidth: 100,
  // 圖片區域寬度，預設 100
  imageAreaHeight: 80,
  // 圖片區域高度，預設 80
  verticalGridItemWidth: 200,
  // 直向卡片 - 網格項目寬度
  verticalGridItemHeight: 0,
  // 直向卡片 - 網格項目高度
  verticalImageAreaHeight: 180,
  // 直向卡片 - 圖片區域高度
  verticalCardImagePosition: "top",
  // 直向卡片圖片位置
  titleFontSize: 1,
  // 筆記標題的字型大小，預設 1.0
  multiLineTitle: false,
  summaryLength: 100,
  // 筆記摘要的字數，預設 100
  enableFileWatcher: true,
  // 預設啟用檔案監控
  folderDisplayStyle: "show",
  // 預設直接顯示資料夾
  showMediaFiles: true,
  // 預設顯示圖片和影片
  showVideoThumbnails: true,
  // 預設顯示影片縮圖
  defaultOpenLocation: "left",
  // 預設開啟位置：左側邊欄
  reuseExistingLeaf: true,
  // 預設重用現有的網格視圖
  showBookmarksMode: true,
  // 預設顯示書籤模式
  showSearchMode: true,
  // 預設顯示搜尋結果模式
  showBacklinksMode: true,
  // 預設顯示反向連結模式
  showOutgoinglinksMode: false,
  // 預設不顯示外部連結模式
  showAllFilesMode: false,
  // 預設不顯示所有檔案模式
  showRandomNoteMode: true,
  // 預設顯示隨機筆記模式
  showRecentFilesMode: true,
  // 預設顯示最近筆記模式
  showTasksMode: false,
  // 預設不顯示任務模式
  recentFilesCount: 30,
  // 預設最近筆記模式顯示的筆數
  randomNoteCount: 10,
  // 預設隨機筆記模式顯示的筆數
  customFolderIcon: "\u{1F4C1}",
  // 自訂資料夾圖示
  customDocumentExtensions: "",
  // 自訂文件副檔名（用逗號分隔）
  recentSources: [],
  // 預設最近的瀏覽記錄
  noteTitleField: "",
  // 筆記標題的欄位名稱
  noteSummaryField: "",
  // 筆記摘要的欄位名稱
  modifiedDateField: "",
  // 修改時間的欄位名稱
  createdDateField: "",
  // 建立時間的欄位名稱
  showNoteTags: false,
  // 預設不顯示筆記標籤
  cardLayout: "horizontal",
  // 預設橫向卡片
  dateDividerMode: "none",
  // 預設不使用日期分隔器
  showCodeBlocksInSummary: false,
  // 預設不在摘要中顯示程式碼區塊
  folderNoteDisplaySettings: "default",
  // 預設不處理資料夾筆記
  interceptAllTagClicks: true,
  // 預設攔截所有tag點擊事件
  interceptBreadcrumbClicks: true,
  // 預設攔截Breadcrumb點擊事件
  customModes: [
    {
      internalName: "custom-1750837329297",
      icon: "\u{1F9E9}",
      displayName: "My Books (Sample)",
      name: "Default",
      dataviewCode: 'return dv.pages("#Book");'
    }
  ],
  // 自訂模式
  quickAccessCommandPath: "",
  // Path used by "Open quick access folder" command
  useQuickAccessAsNewTabMode: "default",
  quickAccessModeType: "all-files",
  // Default quick access view type
  showNoteInGrid: false,
  // 預設不在 grid container 中顯示筆記
  openNoteLayout: "default",
  // 預設開啟筆記的方式
  searchCurrentLocationOnly: false,
  // 預設搜尋所有筆記
  searchFilesNameOnly: false,
  // 預設不只搜尋筆記名稱
  searchMediaFiles: false,
  // 預設不搜尋媒體檔案
  explorerStashPaths: []
  // 預設暫存區為空
};
var FolderSuggest = class extends import_obsidian21.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(inputStr) {
    const lowerCaseInputStr = inputStr.toLowerCase();
    const allFolders = this.app.vault.getAllFolders();
    const suggestions = allFolders.map((folder) => folder.path).filter((path) => path.toLowerCase().includes(lowerCaseInputStr)).sort((a, b) => a.localeCompare(b));
    if ("/".includes(lowerCaseInputStr)) {
      if (!suggestions.includes("/")) {
        suggestions.unshift("/");
      }
    }
    return suggestions;
  }
  renderSuggestion(suggestion, el) {
    el.setText(suggestion);
  }
  selectSuggestion(suggestion) {
    this.inputEl.value = suggestion;
    this.inputEl.trigger("input");
    this.close();
  }
};
var IgnoredFolderSuggest = class extends import_obsidian21.AbstractInputSuggest {
  constructor(app, inputEl, plugin, settingTab) {
    super(app, inputEl);
    this.plugin = plugin;
    this.settingTab = settingTab;
    this.inputEl = inputEl;
  }
  getSuggestions(inputStr) {
    const lowerCaseInputStr = inputStr.toLowerCase();
    const folders = this.app.vault.getAllFolders();
    return folders.map((folder) => folder.path).filter((path) => {
      if (path === "/")
        return false;
      const isIgnored = this.plugin.settings.ignoredFolders.some(
        (ignoredPath) => path === ignoredPath || path.startsWith(ignoredPath + "/")
      );
      return !isIgnored && path.toLowerCase().includes(lowerCaseInputStr);
    }).sort((a, b) => a.localeCompare(b));
  }
  renderSuggestion(suggestion, el) {
    el.setText(suggestion);
  }
  async selectSuggestion(suggestion) {
    if (suggestion && !this.plugin.settings.ignoredFolders.includes(suggestion)) {
      this.plugin.settings.ignoredFolders.push(suggestion);
      await this.plugin.saveSettings();
      this.inputEl.value = "";
      this.settingTab.display();
    }
    this.close();
  }
};
var GridExplorerSettingTab = class extends import_obsidian21.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h3", { text: t("custom_mode_settings") });
    const customModesContainer = containerEl.createDiv();
    this.plugin.settings.customModes.forEach((mode, index) => {
      const setting = new import_obsidian21.Setting(customModesContainer).setName(`${mode.icon} ${mode.displayName}`).addToggle((toggle) => {
        var _a;
        toggle.setValue((_a = mode.enabled) != null ? _a : true).onChange(async (value) => {
          mode.enabled = value;
          await this.plugin.saveSettings();
        });
      });
      setting.settingEl.setAttr("draggable", "true");
      setting.settingEl.addEventListener("dragstart", (event) => {
        if (event.dataTransfer) {
          event.dataTransfer.setData("text/plain", index.toString());
          event.dataTransfer.effectAllowed = "move";
        }
      });
      setting.settingEl.addEventListener("dragover", (event) => {
        event.preventDefault();
        if (event.dataTransfer) {
          event.dataTransfer.dropEffect = "move";
        }
      });
      setting.settingEl.addEventListener("drop", async (event) => {
        event.preventDefault();
        if (!event.dataTransfer)
          return;
        const fromIndexStr = event.dataTransfer.getData("text/plain");
        if (!fromIndexStr)
          return;
        const fromIndex = parseInt(fromIndexStr);
        const toIndex = index;
        if (fromIndex === toIndex)
          return;
        const modes = this.plugin.settings.customModes;
        const movedMode = modes.splice(fromIndex, 1)[0];
        modes.splice(toIndex, 0, movedMode);
        await this.plugin.saveSettings();
        this.display();
      });
      setting.addButton((button) => {
        button.setButtonText(t("edit")).onClick(() => {
          const modeIndex = this.plugin.settings.customModes.findIndex((m) => m.internalName === mode.internalName);
          if (modeIndex === -1)
            return;
          new CustomModeModal(this.app, this.plugin, this.plugin.settings.customModes[modeIndex], (result) => {
            this.plugin.settings.customModes[modeIndex] = result;
            this.plugin.saveSettings();
            this.display();
          }).open();
        });
      });
      setting.addButton((button) => {
        button.setButtonText(t("remove")).setWarning().onClick(() => {
          const modeIndex = this.plugin.settings.customModes.findIndex((m) => m.internalName === mode.internalName);
          if (modeIndex === -1)
            return;
          this.plugin.settings.customModes.splice(modeIndex, 1);
          this.plugin.saveSettings();
          this.display();
        });
      });
    });
    new import_obsidian21.Setting(containerEl).addButton((button) => {
      button.setButtonText(t("add_custom_mode")).setCta().setTooltip(t("add_custom_mode")).onClick(() => {
        new CustomModeModal(this.app, this.plugin, null, async (result) => {
          this.plugin.settings.customModes.push(result);
          await this.plugin.saveSettings();
          this.display();
        }).open();
      });
    }).addButton((button) => {
      button.setButtonText(t("export")).setTooltip(t("export")).onClick(async () => {
        if (this.plugin.settings.customModes.length === 0) {
          new import_obsidian21.Notice(t("no_custom_modes_to_export"));
          return;
        }
        const data = JSON.stringify(this.plugin.settings.customModes, null, 2);
        if (!import_obsidian21.Platform.isDesktop) {
          try {
            const fileName = "gridexplorer-custom-modes.json";
            let filePath = fileName;
            let counter = 1;
            while (this.app.vault.getAbstractFileByPath(filePath)) {
              filePath = `gridexplorer-custom-modes-${counter}.json`;
              counter++;
            }
            await this.app.vault.create(filePath, data);
            new import_obsidian21.Notice(t("export_success_vault").replace("{filename}", filePath));
          } catch (error) {
            console.error("GridExplorer: Failed to export using Obsidian API on mobile", error);
            new import_obsidian21.Notice(t("export_error"));
          }
        } else {
          const blob = new Blob([data], { type: "application/json" });
          const url = URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;
          a.download = "gridexplorer-custom-modes.json";
          a.click();
          URL.revokeObjectURL(url);
        }
      });
    }).addButton((button) => {
      button.setButtonText(t("import")).setTooltip(t("import")).onClick(() => {
        const input2 = document.createElement("input");
        input2.type = "file";
        input2.accept = ".json";
        input2.onchange = async (e) => {
          const files = e.target.files;
          if (!files || files.length === 0) {
            return;
          }
          const file = files[0];
          const reader = new FileReader();
          reader.onload = async (e2) => {
            if (!e2.target || typeof e2.target.result !== "string") {
              new import_obsidian21.Notice(t("import_error"));
              return;
            }
            try {
              const content = e2.target.result;
              const importedModes = JSON.parse(content);
              if (Array.isArray(importedModes)) {
                const validModes = importedModes.filter((m) => m.internalName && m.displayName && m.dataviewCode);
                if (validModes.length > 0) {
                  validModes.forEach((importedMode) => {
                    const existingModeIndex = this.plugin.settings.customModes.findIndex(
                      (m) => m.internalName === importedMode.internalName
                    );
                    if (existingModeIndex !== -1) {
                      this.plugin.settings.customModes[existingModeIndex] = importedMode;
                    } else {
                      this.plugin.settings.customModes.push(importedMode);
                    }
                  });
                  await this.plugin.saveSettings();
                  this.display();
                  new import_obsidian21.Notice(t("import_success"));
                } else {
                  new import_obsidian21.Notice(t("import_error"));
                }
              } else {
                new import_obsidian21.Notice(t("import_error"));
              }
            } catch (error) {
              new import_obsidian21.Notice(t("import_error"));
              console.error("Grid Explorer: Error importing custom modes", error);
            }
          };
          reader.readAsText(file);
        };
        input2.click();
      });
    });
    containerEl.createEl("h3", { text: t("display_mode_settings"), attr: { style: "margin-top: 40px;" } });
    new import_obsidian21.Setting(containerEl).setName(`\u{1F4D1} ${t("show_bookmarks_mode")}`).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showBookmarksMode).onChange(async (value) => {
        this.plugin.settings.showBookmarksMode = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(`\u{1F50D} ${t("show_search_mode")}`).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showSearchMode).onChange(async (value) => {
        this.plugin.settings.showSearchMode = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(`\u{1F517} ${t("show_backlinks_mode")}`).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showBacklinksMode).onChange(async (value) => {
        this.plugin.settings.showBacklinksMode = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(`\u{1F517} ${t("show_outgoinglinks_mode")}`).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showOutgoinglinksMode).onChange(async (value) => {
        this.plugin.settings.showOutgoinglinksMode = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(`\u{1F4D4} ${t("show_all_files_mode")}`).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showAllFilesMode).onChange(async (value) => {
        this.plugin.settings.showAllFilesMode = value;
        await this.plugin.saveSettings();
      });
    });
    const recentFilesSetting = new import_obsidian21.Setting(containerEl).setName(`\u{1F4C5} ${t("show_recent_files_mode")}`);
    recentFilesSetting.addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showRecentFilesMode).onChange(async (value) => {
        this.plugin.settings.showRecentFilesMode = value;
        await this.plugin.saveSettings();
      });
    });
    const recentDescEl = recentFilesSetting.descEl.createEl("div", { cls: "ge-setting-desc" });
    recentDescEl.createEl("span", { text: t("recent_files_count") });
    const recentInput = recentDescEl.createEl("input", {
      type: "number",
      value: this.plugin.settings.recentFilesCount.toString(),
      cls: "ge-setting-number-input"
    });
    recentInput.addEventListener("change", async (e) => {
      const target = e.target;
      const value = parseInt(target.value);
      if (!isNaN(value) && value > 0) {
        this.plugin.settings.recentFilesCount = value;
        await this.plugin.saveSettings(false);
      } else {
        target.value = this.plugin.settings.recentFilesCount.toString();
      }
    });
    const randomNoteSetting = new import_obsidian21.Setting(containerEl).setName(`\u{1F3B2} ${t("show_random_note_mode")}`);
    randomNoteSetting.addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showRandomNoteMode).onChange(async (value) => {
        this.plugin.settings.showRandomNoteMode = value;
        await this.plugin.saveSettings();
      });
    });
    const descEl = randomNoteSetting.descEl.createEl("div", { cls: "ge-setting-desc" });
    descEl.createEl("span", { text: t("random_note_count") });
    const input = descEl.createEl("input", {
      type: "number",
      value: this.plugin.settings.randomNoteCount.toString(),
      cls: "ge-setting-number-input"
    });
    input.addEventListener("change", async (e) => {
      const target = e.target;
      const value = parseInt(target.value);
      if (!isNaN(value) && value > 0) {
        this.plugin.settings.randomNoteCount = value;
        await this.plugin.saveSettings(false);
      } else {
        target.value = this.plugin.settings.randomNoteCount.toString();
      }
    });
    new import_obsidian21.Setting(containerEl).setName(`\u2611\uFE0F ${t("show_tasks_mode")}`).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showTasksMode).onChange(async (value) => {
        this.plugin.settings.showTasksMode = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h3", { text: t("grid_view_settings"), attr: { style: "margin-top: 40px;" } });
    new import_obsidian21.Setting(containerEl).setName(t("reuse_existing_leaf")).setDesc(t("reuse_existing_leaf_desc")).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.reuseExistingLeaf).onChange(async (value) => {
        this.plugin.settings.reuseExistingLeaf = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("default_open_location")).setDesc(t("default_open_location_desc")).addDropdown((dropdown) => {
      dropdown.addOption("tab", t("open_in_new_tab")).addOption("left", t("open_in_left_sidebar")).addOption("right", t("open_in_right_sidebar")).setValue(this.plugin.settings.defaultOpenLocation).onChange(async (value) => {
        this.plugin.settings.defaultOpenLocation = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("default_sort_type")).setDesc(t("default_sort_type_desc")).addDropdown((dropdown) => {
      dropdown.addOption("name-asc", t("sort_name_asc")).addOption("name-desc", t("sort_name_desc")).addOption("mtime-desc", t("sort_mtime_desc")).addOption("mtime-asc", t("sort_mtime_asc")).addOption("ctime-desc", t("sort_ctime_desc")).addOption("ctime-asc", t("sort_ctime_asc")).addOption("random", t("sort_random")).setValue(this.plugin.settings.defaultSortType).onChange(async (value) => {
        this.plugin.settings.defaultSortType = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("date_divider_mode")).setDesc(t("date_divider_mode_desc")).addDropdown((dropdown) => {
      dropdown.addOption("none", t("date_divider_mode_none")).addOption("year", t("date_divider_mode_year")).addOption("month", t("date_divider_mode_month")).addOption("day", t("date_divider_mode_day")).setValue(this.plugin.settings.dateDividerMode).onChange(async (value) => {
        this.plugin.settings.dateDividerMode = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("folder_display_style")).setDesc(t("folder_display_style_desc")).addDropdown((dropdown) => {
      dropdown.addOption("show", t("folder_display_style_show")).addOption("menu", t("folder_display_style_menu")).addOption("hide", t("folder_display_style_hide")).setValue(this.plugin.settings.folderDisplayStyle).onChange(async (value) => {
        this.plugin.settings.folderDisplayStyle = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("show_media_files")).setDesc(t("show_media_files_desc")).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showMediaFiles).onChange(async (value) => {
        this.plugin.settings.showMediaFiles = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("show_video_thumbnails")).setDesc(t("show_video_thumbnails_desc")).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showVideoThumbnails).onChange(async (value) => {
        this.plugin.settings.showVideoThumbnails = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("show_note_in_grid")).setDesc(t("show_note_in_grid_desc")).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showNoteInGrid).onChange(async (value) => {
        this.plugin.settings.showNoteInGrid = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("open_note_layout")).setDesc(t("open_note_layout_desc")).addDropdown((dropdown) => {
      dropdown.addOption("default", t("open_note_layout_default")).addOption("newTab", t("open_note_layout_newTab")).addOption("split", t("open_note_layout_split")).addOption("newWindow", t("open_note_layout_newWindow")).setValue(this.plugin.settings.openNoteLayout).onChange(async (value) => {
        this.plugin.settings.openNoteLayout = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("note_title_field")).setDesc(t("note_title_field_desc")).addText((text) => text.setPlaceholder("title").setValue(this.plugin.settings.noteTitleField).onChange(async (value) => {
      this.plugin.settings.noteTitleField = value;
      await this.plugin.saveSettings(false);
    }));
    new import_obsidian21.Setting(containerEl).setName(t("note_summary_field")).setDesc(t("note_summary_field_desc")).addText((text) => text.setPlaceholder("summary").setValue(this.plugin.settings.noteSummaryField).onChange(async (value) => {
      this.plugin.settings.noteSummaryField = value;
      await this.plugin.saveSettings(false);
    }));
    new import_obsidian21.Setting(containerEl).setName(t("modified_date_field")).setDesc(t("modified_date_field_desc")).addText((text) => text.setPlaceholder("modified_date").setValue(this.plugin.settings.modifiedDateField).onChange(async (value) => {
      this.plugin.settings.modifiedDateField = value;
      await this.plugin.saveSettings(false);
    }));
    new import_obsidian21.Setting(containerEl).setName(t("created_date_field")).setDesc(t("created_date_field_desc")).addText((text) => text.setPlaceholder("created_date").setValue(this.plugin.settings.createdDateField).onChange(async (value) => {
      this.plugin.settings.createdDateField = value;
      await this.plugin.saveSettings(false);
    }));
    new import_obsidian21.Setting(containerEl).setName(t("custom_document_extensions")).setDesc(t("custom_document_extensions_desc")).addText((text) => {
      text.setPlaceholder(t("custom_document_extensions_placeholder")).setValue(this.plugin.settings.customDocumentExtensions).onChange(async (value) => {
        this.plugin.settings.customDocumentExtensions = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("custom_folder_icon")).setDesc(t("custom_folder_icon_desc")).addText((text) => {
      text.setValue(this.plugin.settings.customFolderIcon).onChange(async (value) => {
        this.plugin.settings.customFolderIcon = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("enable_file_watcher")).setDesc(t("enable_file_watcher_desc")).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.enableFileWatcher).onChange(async (value) => {
        this.plugin.settings.enableFileWatcher = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("intercept_all_tag_clicks")).setDesc(t("intercept_all_tag_clicks_desc")).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.interceptAllTagClicks).onChange(async (value) => {
        this.plugin.settings.interceptAllTagClicks = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("intercept_breadcrumb_clicks")).setDesc(t("intercept_breadcrumb_clicks_desc")).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.interceptBreadcrumbClicks).onChange(async (value) => {
        this.plugin.settings.interceptBreadcrumbClicks = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h3", { text: t("grid_item_style_settings"), attr: { style: "margin-top: 40px;" } });
    new import_obsidian21.Setting(containerEl).setName(t("card_layout")).setDesc(t("card_layout_desc")).addDropdown((drop) => {
      drop.addOption("horizontal", t("horizontal_card"));
      drop.addOption("vertical", t("vertical_card"));
      drop.setValue(this.plugin.settings.cardLayout);
      drop.onChange(async (value) => {
        this.plugin.settings.cardLayout = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("show_note_tags")).setDesc(t("show_note_tags_desc")).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showNoteTags).onChange(async (value) => {
        this.plugin.settings.showNoteTags = value;
        await this.plugin.saveSettings();
      });
    });
    const gridItemWidthSetting = new import_obsidian21.Setting(containerEl).setName(`${t("horizontal_card")} ${t("grid_item_width")}`).setDesc(`${t("grid_item_width_desc")} (now: ${this.plugin.settings.gridItemWidth}px)`).addSlider((slider) => {
      slider.setLimits(200, 600, 10).setValue(this.plugin.settings.gridItemWidth).setDynamicTooltip().onChange(async (value) => {
        gridItemWidthSetting.setDesc(`${t("grid_item_width_desc")} (now: ${value}px)`);
        this.plugin.settings.gridItemWidth = value;
        await this.plugin.saveSettings();
      });
    });
    const gridItemHeightSetting = new import_obsidian21.Setting(containerEl).setName(`${t("horizontal_card")} ${t("grid_item_height")}`).setDesc(`${t("grid_item_height_desc")} (now: ${this.plugin.settings.gridItemHeight === 0 ? "auto" : this.plugin.settings.gridItemHeight})`).addSlider((slider) => {
      slider.setLimits(0, 600, 10).setValue(this.plugin.settings.gridItemHeight).setDynamicTooltip().onChange(async (value) => {
        gridItemHeightSetting.setDesc(`${t("grid_item_height_desc")} (now: ${value === 0 ? "auto" : value})`);
        this.plugin.settings.gridItemHeight = value;
        await this.plugin.saveSettings();
      });
    });
    const imageAreaWidthSetting = new import_obsidian21.Setting(containerEl).setName(`${t("horizontal_card")} ${t("image_area_width")}`).setDesc(`${t("image_area_width_desc")} (now: ${this.plugin.settings.imageAreaWidth}px)`).addSlider((slider) => {
      slider.setLimits(50, 300, 10).setValue(this.plugin.settings.imageAreaWidth).setDynamicTooltip().onChange(async (value) => {
        imageAreaWidthSetting.setDesc(`${t("image_area_width_desc")} (now: ${value}px)`);
        this.plugin.settings.imageAreaWidth = value;
        await this.plugin.saveSettings();
      });
    });
    const imageAreaHeightSetting = new import_obsidian21.Setting(containerEl).setName(`${t("horizontal_card")} ${t("image_area_height")}`).setDesc(`${t("image_area_height_desc")} (now: ${this.plugin.settings.imageAreaHeight}px)`).addSlider((slider) => {
      slider.setLimits(50, 300, 10).setValue(this.plugin.settings.imageAreaHeight).setDynamicTooltip().onChange(async (value) => {
        imageAreaHeightSetting.setDesc(`${t("image_area_height_desc")} (now: ${value}px)`);
        this.plugin.settings.imageAreaHeight = value;
        await this.plugin.saveSettings();
      });
    });
    const vGridItemWidthSetting = new import_obsidian21.Setting(containerEl).setName(`${t("vertical_card")} ${t("grid_item_width")}`).setDesc(`${t("grid_item_width_desc")} (now: ${this.plugin.settings.verticalGridItemWidth}px)`).addSlider((slider) => {
      slider.setLimits(100, 600, 10).setValue(this.plugin.settings.verticalGridItemWidth).setDynamicTooltip().onChange(async (value) => {
        vGridItemWidthSetting.setDesc(`${t("grid_item_width_desc")} (now: ${value}px)`);
        this.plugin.settings.verticalGridItemWidth = value;
        await this.plugin.saveSettings();
      });
    });
    const vGridItemHeightSetting = new import_obsidian21.Setting(containerEl).setName(`${t("vertical_card")} ${t("grid_item_height")}`).setDesc(`${t("grid_item_height_desc")} (now: ${this.plugin.settings.verticalGridItemHeight}px)`).addSlider((slider) => {
      slider.setLimits(0, 600, 10).setValue(this.plugin.settings.verticalGridItemHeight).setDynamicTooltip().onChange(async (value) => {
        vGridItemHeightSetting.setDesc(`${t("grid_item_height_desc")} (now: ${value}px)`);
        this.plugin.settings.verticalGridItemHeight = value;
        await this.plugin.saveSettings();
      });
    });
    const vImageAreaHeightSetting = new import_obsidian21.Setting(containerEl).setName(`${t("vertical_card")} ${t("image_area_height")}`).setDesc(`${t("image_area_height_desc")} (now: ${this.plugin.settings.verticalImageAreaHeight}px)`).addSlider((slider) => {
      slider.setLimits(50, 400, 10).setValue(this.plugin.settings.verticalImageAreaHeight).setDynamicTooltip().onChange(async (value) => {
        vImageAreaHeightSetting.setDesc(`${t("image_area_height_desc")} (now: ${value}px)`);
        this.plugin.settings.verticalImageAreaHeight = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(`${t("vertical_card")} ${t("image_position")}`).setDesc(t("image_position_desc")).addDropdown((dropdown) => {
      dropdown.addOption("top", t("top"));
      dropdown.addOption("bottom", t("bottom"));
      dropdown.setValue(this.plugin.settings.verticalCardImagePosition);
      dropdown.onChange(async (value) => {
        this.plugin.settings.verticalCardImagePosition = value;
        await this.plugin.saveSettings();
      });
    });
    const titleFontSizeSetting = new import_obsidian21.Setting(containerEl).setName(t("title_font_size")).setDesc(`${t("title_font_size_desc")} (now: ${this.plugin.settings.titleFontSize.toFixed(2)})`).addSlider((slider) => {
      slider.setLimits(0.8, 1.5, 0.05).setValue(this.plugin.settings.titleFontSize).setDynamicTooltip().onChange(async (value) => {
        titleFontSizeSetting.setDesc(`${t("title_font_size_desc")} (now: ${value.toFixed(2)})`);
        this.plugin.settings.titleFontSize = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("multi_line_title")).setDesc(t("multi_line_title_desc")).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.multiLineTitle).onChange(async (value) => {
        this.plugin.settings.multiLineTitle = value;
        await this.plugin.saveSettings();
      });
    });
    const summaryLengthSetting = new import_obsidian21.Setting(containerEl).setName(t("summary_length")).setDesc(`${t("summary_length_desc")} (now: ${this.plugin.settings.summaryLength})`).addSlider((slider) => {
      slider.setLimits(50, 600, 25).setValue(this.plugin.settings.summaryLength).setDynamicTooltip().onChange(async (value) => {
        summaryLengthSetting.setDesc(`${t("summary_length_desc")} (now: ${value})`);
        this.plugin.settings.summaryLength = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("show_code_block_in_summary")).setDesc(t("show_code_block_in_summary_desc")).addToggle((toggle) => toggle.setValue(this.plugin.settings.showCodeBlocksInSummary).onChange(async (value) => {
      this.plugin.settings.showCodeBlocksInSummary = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h3", { text: t("default_search_option"), attr: { style: "margin-top: 40px;" } });
    new import_obsidian21.Setting(containerEl).setName(t("search_current_location_only")).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.searchCurrentLocationOnly).onChange(async (value) => {
        this.plugin.settings.searchCurrentLocationOnly = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("search_files_name_only")).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.searchFilesNameOnly).onChange(async (value) => {
        this.plugin.settings.searchFilesNameOnly = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("search_media_files")).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.searchMediaFiles).onChange(async (value) => {
        this.plugin.settings.searchMediaFiles = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h3", { text: t("folder_note_settings"), attr: { style: "margin-top: 40px;" } });
    new import_obsidian21.Setting(containerEl).setName(t("foldernote_display_settings")).setDesc(t("foldernote_display_settings_desc")).addDropdown((dropdown) => {
      dropdown.addOption("default", t("default")).addOption("pinned", t("pinned")).addOption("hidden", t("hidden")).setValue(this.plugin.settings.folderNoteDisplaySettings).onChange(async (value) => {
        this.plugin.settings.folderNoteDisplaySettings = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h3", { text: t("quick_access_settings_title"), attr: { style: "margin-top: 40px;" } });
    new import_obsidian21.Setting(containerEl).setName(t("quick_access_folder_name")).setDesc(t("quick_access_folder_desc")).addText((text) => {
      new FolderSuggest(this.app, text.inputEl);
      text.setPlaceholder(t("select_folders")).setValue(this.plugin.settings.quickAccessCommandPath).onChange(async (value) => {
        this.plugin.settings.quickAccessCommandPath = value;
        await this.plugin.saveSettings(false);
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("quick_access_mode_name")).setDesc(t("quick_access_mode_desc")).addDropdown((dropdown) => {
      for (let i = 0; i < this.plugin.settings.customModes.length; i++) {
        dropdown.addOption(this.plugin.settings.customModes[i].internalName, `\u{1F9E9} ${this.plugin.settings.customModes[i].displayName}`);
      }
      dropdown.addOption("bookmarks", `\u{1F4D1} ${t("bookmarks_mode")}`).addOption("search", `\u{1F50D} ${t("search_results")}`).addOption("backlinks", `\u{1F517} ${t("backlinks_mode")}`).addOption("outgoinglinks", `\u{1F517} ${t("outgoinglinks_mode")}`).addOption("all-files", `\u{1F4D4} ${t("all_files_mode")}`).addOption("recent-files", `\u{1F4C5} ${t("recent_files_mode")}`).addOption("random-note", `\u{1F3B2} ${t("random_note_mode")}`).addOption("tasks", `\u2611\uFE0F ${t("tasks_mode")}`).setValue(this.plugin.settings.quickAccessModeType).onChange(async (value) => {
        this.plugin.settings.quickAccessModeType = value;
        await this.plugin.saveSettings(false);
      });
    });
    new import_obsidian21.Setting(containerEl).setName(t("use_quick_access_as_new_tab_view")).setDesc(t("use_quick_access_as_new_tab_view_desc")).addDropdown((dropdown) => {
      dropdown.addOption("default", t("default_new_tab")).addOption("folder", t("use_quick_access_folder")).addOption("mode", t("use_quick_access_mode")).setValue(this.plugin.settings.useQuickAccessAsNewTabMode).onChange(async (value) => {
        this.plugin.settings.useQuickAccessAsNewTabMode = value;
        await this.plugin.saveSettings(false);
      });
    });
    containerEl.createEl("h3", { text: t("ignored_folders_settings"), attr: { style: "margin-top: 40px;" } });
    const ignoredFoldersContainer = containerEl.createDiv("ignored-folders-container");
    new import_obsidian21.Setting(containerEl).setName(t("ignored_folders")).setDesc(t("ignored_folders_desc")).setHeading();
    new import_obsidian21.Setting(ignoredFoldersContainer).setName(t("add_ignored_folder")).addText((text) => {
      new IgnoredFolderSuggest(this.app, text.inputEl, this.plugin, this);
      text.setPlaceholder(t("select_folders_to_ignore"));
    });
    const ignoredFoldersList = ignoredFoldersContainer.createDiv("ge-ignored-folders-list");
    this.renderIgnoredFoldersList(ignoredFoldersList);
    containerEl.appendChild(ignoredFoldersContainer);
    const ignoredFolderPatternsContainer = containerEl.createDiv("ignored-folder-patterns-container");
    new import_obsidian21.Setting(containerEl).setName(t("ignored_folder_patterns")).setDesc(t("ignored_folder_patterns_desc")).setHeading();
    const patternSetting = new import_obsidian21.Setting(ignoredFolderPatternsContainer).setName(t("add_ignored_folder_pattern")).addText((text) => {
      text.setPlaceholder(t("ignored_folder_pattern_placeholder")).onChange(() => {
      });
      return text;
    });
    patternSetting.addButton((button) => {
      button.setButtonText(t("add")).setCta().onClick(async () => {
        const inputEl = patternSetting.controlEl.querySelector("input");
        const pattern = inputEl.value.trim();
        if (pattern && !this.plugin.settings.ignoredFolderPatterns.includes(pattern)) {
          this.plugin.settings.ignoredFolderPatterns.push(pattern);
          await this.plugin.saveSettings();
          this.renderIgnoredFolderPatternsList(ignoredFolderPatternsList);
          inputEl.value = "";
        }
      });
    });
    const ignoredFolderPatternsList = ignoredFolderPatternsContainer.createDiv("ge-ignored-folder-patterns-list");
    this.renderIgnoredFolderPatternsList(ignoredFolderPatternsList);
    containerEl.appendChild(ignoredFolderPatternsContainer);
    containerEl.createEl("h3", { text: t("config_management"), attr: { style: "margin-top: 40px;" } });
    new import_obsidian21.Setting(containerEl).setName(t("config_management")).setDesc(t("config_management_desc")).addButton((button) => button.setButtonText(t("reset_to_default")).setWarning().onClick(async () => {
      this.plugin.settings = { ...DEFAULT_SETTINGS };
      await this.plugin.saveSettings();
      this.display();
      new import_obsidian21.Notice(t("settings_reset_notice"));
    })).addButton((button) => button.setButtonText(t("export")).setTooltip(t("export")).onClick(async () => {
      const data = JSON.stringify(this.plugin.settings, null, 2);
      if (!import_obsidian21.Platform.isDesktop) {
        try {
          const fileName = "gridexplorer-settings.json";
          let filePath = fileName;
          let counter = 1;
          while (this.app.vault.getAbstractFileByPath(filePath)) {
            filePath = `gridexplorer-settings-${counter}.json`;
            counter++;
          }
          await this.app.vault.create(filePath, data);
          new import_obsidian21.Notice(t("export_success_vault").replace("{filename}", filePath));
        } catch (error) {
          console.error("GridExplorer: Failed to export settings using Obsidian API on mobile", error);
          new import_obsidian21.Notice(t("export_error"));
        }
      } else {
        const blob = new Blob([data], { type: "application/json" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "gridexplorer-settings.json";
        a.click();
        URL.revokeObjectURL(url);
      }
    })).addButton((button) => button.setButtonText(t("import")).setTooltip(t("import")).onClick(() => {
      const input2 = document.createElement("input");
      input2.type = "file";
      input2.accept = ".json";
      input2.onchange = async (e) => {
        const files = e.target.files;
        if (!files || files.length === 0) {
          return;
        }
        const file = files[0];
        const reader = new FileReader();
        reader.onload = async (evt) => {
          if (!evt.target || typeof evt.target.result !== "string") {
            new import_obsidian21.Notice(t("import_failed"));
            return;
          }
          try {
            const content = evt.target.result;
            const importedSettings = JSON.parse(content);
            if (importedSettings && typeof importedSettings === "object") {
              this.plugin.settings = { ...DEFAULT_SETTINGS, ...importedSettings };
              await this.plugin.saveSettings();
              this.display();
              new import_obsidian21.Notice(t("import_success"));
            } else {
              new import_obsidian21.Notice(t("import_failed"));
            }
          } catch (error) {
            console.error("Grid Explorer: Error importing settings", error);
            new import_obsidian21.Notice(t("import_failed"));
          }
        };
        reader.readAsText(file);
      };
      input2.click();
    }));
  }
  // 渲染已忽略的資料夾列表
  renderIgnoredFoldersList(containerEl) {
    containerEl.empty();
    if (this.plugin.settings.ignoredFolders.length === 0) {
      containerEl.createEl("p", { text: t("no_ignored_folders") });
      return;
    }
    const list = containerEl.createEl("ul", { cls: "ge-ignored-folders-list" });
    this.plugin.settings.ignoredFolders.forEach((folder) => {
      const item = list.createEl("li", { cls: "ge-ignored-folder-item" });
      item.createSpan({ text: folder, cls: "ge-ignored-folder-path" });
      const removeButton = item.createEl("button", {
        cls: "ge-ignored-folder-remove",
        text: t("remove")
      });
      removeButton.addEventListener("click", async () => {
        this.plugin.settings.ignoredFolders = this.plugin.settings.ignoredFolders.filter((f) => f !== folder);
        await this.plugin.saveSettings();
        this.renderIgnoredFoldersList(containerEl);
        this.display();
      });
    });
  }
  // 渲染已忽略的資料夾模式列表
  renderIgnoredFolderPatternsList(containerEl) {
    containerEl.empty();
    if (this.plugin.settings.ignoredFolderPatterns.length === 0) {
      containerEl.createEl("p", { text: t("no_ignored_folder_patterns") });
      return;
    }
    const list = containerEl.createEl("ul", { cls: "ge-ignored-folders-list" });
    this.plugin.settings.ignoredFolderPatterns.forEach((pattern) => {
      const item = list.createEl("li", { cls: "ge-ignored-folder-item" });
      item.createSpan({ text: pattern, cls: "ge-ignored-folder-path" });
      const removeButton = item.createEl("button", {
        cls: "ge-ignored-folder-remove",
        text: t("remove")
      });
      removeButton.addEventListener("click", async () => {
        this.plugin.settings.ignoredFolderPatterns = this.plugin.settings.ignoredFolderPatterns.filter((p) => p !== pattern);
        await this.plugin.saveSettings();
        this.renderIgnoredFolderPatternsList(containerEl);
      });
    });
  }
};

// src/main.ts
var GridExplorerPlugin = class extends import_obsidian22.Plugin {
  async onload() {
    await this.loadSettings();
    this.registerView(
      "grid-view",
      (leaf) => new GridView(leaf, this)
    );
    this.registerView(
      EXPLORER_VIEW_TYPE,
      (leaf) => new ExplorerView(leaf, this)
    );
    this.addSettingTab(new GridExplorerSettingTab(this.app, this));
    this.addCommand({
      id: "open-grid-view",
      name: t("open_grid_view"),
      callback: () => {
        showFolderSelectionModal(this.app, this);
      }
    });
    this.addCommand({
      id: "open-explorer-view",
      name: t("open_explorer") || "Open Explorer",
      callback: async () => {
        const existingLeaves = this.app.workspace.getLeavesOfType(EXPLORER_VIEW_TYPE);
        if (existingLeaves.length > 0) {
          this.app.workspace.revealLeaf(existingLeaves[0]);
          return;
        }
        let leaf = this.app.workspace.getLeftLeaf(false);
        if (!leaf)
          leaf = this.app.workspace.getLeftLeaf(true);
        if (!leaf)
          leaf = this.app.workspace.getLeaf("tab");
        await leaf.setViewState({ type: EXPLORER_VIEW_TYPE, active: true });
        this.app.workspace.revealLeaf(leaf);
      }
    });
    this.addCommand({
      id: "view-current-note-in-grid-view",
      name: t("open_note_in_grid_view"),
      callback: () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (activeFile) {
          this.openNoteInFolder(activeFile);
        } else {
          this.openNoteInFolder(this.app.vault.getRoot());
        }
      }
    });
    this.addCommand({
      id: "view-backlinks-in-grid-view",
      name: t("open_backlinks_in_grid_view"),
      callback: async () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (activeFile) {
          const view = await this.activateView();
          if (view instanceof GridView) {
            await view.setSource("backlinks");
          }
        } else {
          this.openNoteInFolder(this.app.vault.getRoot());
        }
      }
    });
    this.addCommand({
      id: "view-outgoinglinks-in-grid-view",
      name: t("open_outgoinglinks_in_grid_view"),
      callback: async () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (activeFile) {
          const view = await this.activateView();
          if (view instanceof GridView) {
            await view.setSource("outgoinglinks");
          }
        } else {
          this.openNoteInFolder(this.app.vault.getRoot());
        }
      }
    });
    this.addCommand({
      id: "view-recent-files-in-grid-view",
      name: t("open_recent_files_in_grid_view"),
      callback: () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (activeFile) {
          this.openNoteInRecentFiles(activeFile);
        } else {
          this.openNoteInFolder(this.app.vault.getRoot());
        }
      }
    });
    this.addCommand({
      id: "open-quick-access-folder",
      name: t("open_quick_access_folder"),
      callback: async () => {
        let targetPath = this.settings.quickAccessCommandPath;
        if (!targetPath) {
          targetPath = this.app.vault.getRoot().path;
        }
        const targetFile = this.app.vault.getAbstractFileByPath(targetPath);
        if (targetFile instanceof import_obsidian22.TFolder) {
          this.openNoteInFolder(targetFile);
        } else {
          this.openNoteInFolder(this.app.vault.getRoot());
        }
      }
    });
    this.addCommand({
      id: "open-quick-access-mode",
      name: t("open_quick_access_mode"),
      callback: async () => {
        const view = await this.activateView();
        if (view instanceof GridView) {
          await view.setSource(this.settings.quickAccessModeType);
        }
      }
    });
    this.addRibbonIcon("grid", t("open_grid_view"), () => {
      showFolderSelectionModal(this.app, this);
    });
    this.statusBarItem = this.addStatusBarItem();
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        if (file instanceof import_obsidian22.TFolder) {
          menu.addItem((item) => {
            var _a, _b;
            (_b = (_a = item.setTitle(t("open_in_grid_view")).setIcon("grid")).setSection) == null ? void 0 : _b.call(_a, "open").onClick(() => {
              this.openNoteInFolder(file);
            });
          });
        }
        if (file instanceof import_obsidian22.TFile) {
          menu.addItem((item) => {
            var _a;
            item.setTitle(t("open_in_grid_view"));
            item.setIcon("grid");
            (_a = item.setSection) == null ? void 0 : _a.call(item, "open");
            const ogSubmenu = item.setSubmenu();
            ogSubmenu.addItem((item2) => {
              item2.setTitle(t("show_note_in_grid_view")).setIcon("file-text").onClick(async () => {
                if (file.extension !== "md") {
                  return;
                }
                const activeView = this.app.workspace.getActiveViewOfType(GridView);
                const view = activeView != null ? activeView : await this.activateView();
                if (view instanceof GridView) {
                  if (!view.openShortcutFile(file)) {
                    view.showNoteInGrid(file);
                  }
                }
              });
            });
            ogSubmenu.addSeparator();
            ogSubmenu.addItem((item2) => {
              item2.setTitle(t("open_note_in_grid_view")).setIcon("folder").onClick(() => {
                this.openNoteInFolder(file);
              });
            });
            ogSubmenu.addItem((item2) => {
              item2.setTitle(t("open_backlinks_in_grid_view")).setIcon("links-coming-in").onClick(async () => {
                this.app.workspace.getLeaf().openFile(file);
                const view = await this.activateView();
                if (view instanceof GridView) {
                  await view.setSource("backlinks");
                }
              });
            });
            ogSubmenu.addItem((item2) => {
              item2.setTitle(t("open_outgoinglinks_in_grid_view")).setIcon("links-going-out").onClick(async () => {
                this.app.workspace.getLeaf().openFile(file);
                const view = await this.activateView();
                if (view instanceof GridView) {
                  await view.setSource("outgoinglinks");
                }
              });
            });
            if (this.settings.showRecentFilesMode && file instanceof import_obsidian22.TFile) {
              ogSubmenu.addItem((item2) => {
                item2.setTitle(t("open_recent_files_in_grid_view")).setIcon("calendar-days").onClick(() => {
                  this.openNoteInRecentFiles(file);
                });
              });
            }
          });
          const link = isMediaFile(file) ? file.name : this.app.fileManager.generateMarkdownLink(file, "");
          const truncatedText = file.basename.length > 8 ? file.basename.substring(0, 8) + "..." : file.basename;
          const displayText = isMediaFile(file) ? ` ${truncatedText}` : ` [[${truncatedText}]]`;
          const menuItemTitle = t("search_selection_in_grid_view").replace("...", displayText);
          menu.addItem((item) => {
            var _a, _b;
            (_b = (_a = item.setTitle(menuItemTitle).setIcon("search")).setSection) == null ? void 0 : _b.call(_a, "view").onClick(async () => {
              const view = await this.activateView();
              if (view instanceof GridView) {
                await view.setSource("", "", true, link);
              }
            });
          });
          menu.addItem((item) => {
            item.setTitle(t("set_note_attribute")).setIcon("palette").onClick(() => {
              showNoteSettingsModal(this.app, this, file);
            });
          });
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor) => {
        if (editor.somethingSelected()) {
          const selectedText = editor.getSelection();
          const truncatedText = selectedText.length > 15 ? selectedText.substring(0, 15) + "..." : selectedText;
          const menuItemTitle = t("search_selection_in_grid_view").replace("...", `\u300C${truncatedText}\u300D`);
          menu.addItem((item) => {
            var _a, _b;
            (_b = (_a = item.setTitle(menuItemTitle).setIcon("search")).setSection) == null ? void 0 : _b.call(_a, "view").onClick(async () => {
              const selectedText2 = editor.getSelection();
              const view = await this.activateView();
              if (view instanceof GridView) {
                await view.setSource("", "", true, selectedText2);
              }
            });
          });
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("tag-wrangler:contextmenu", (menu, tagName) => {
        const truncatedText = tagName.length > 15 ? tagName.substring(0, 15) + "..." : tagName;
        const menuItemTitle = t("search_selection_in_grid_view").replace("...", `\u300C#${truncatedText}\u300D`);
        menu.addItem((item) => {
          var _a, _b;
          (_b = (_a = item.setTitle(menuItemTitle).setIcon("search")).setSection) == null ? void 0 : _b.call(_a, "view").onClick(async () => {
            const view = await this.activateView();
            if (view instanceof GridView) {
              await view.setSource("", "", true, `#${tagName}`);
            }
          });
        });
      })
    );
    this.registerDomEvent(document, "click", async (evt) => {
      var _a, _b, _c, _d, _e, _f, _g, _h;
      if (!this.settings.interceptAllTagClicks)
        return;
      if (evt.button !== 0)
        return;
      if (evt.target.closest(".multi-select-pill-remove-button"))
        return;
      const el = evt.target.closest(
        'a.tag,        /* \u9810\u89BD\u6A21\u5F0F\u4E2D\u7684 #tag */\n.tag-pane-tag, /* \u6A19\u7C64\u9762\u677F\u4E2D\u7684 tag */\nspan.cm-hashtag, /* \u7DE8\u8F2F\u5668\u4E2D\u7684 tag */\n.metadata-property[data-property-key="tags"] .multi-select-pill /* \u5C6C\u6027\u9762\u677F\u4E2D\u7684 tag */'
      );
      if (!el)
        return;
      let tagName = "";
      if (el.matches("span.cm-hashtag")) {
        const collect = [];
        let curr = el;
        while (curr && curr.matches("span.cm-hashtag") && !curr.classList.contains("cm-formatting")) {
          collect.unshift((_a = curr.textContent) != null ? _a : "");
          curr = curr.previousElementSibling;
          if (curr && (!curr.matches("span.cm-hashtag") || curr.classList.contains("cm-formatting")))
            break;
        }
        curr = el.nextElementSibling;
        while (curr && curr.matches("span.cm-hashtag") && !curr.classList.contains("cm-formatting")) {
          collect.push((_b = curr.textContent) != null ? _b : "");
          curr = curr.nextElementSibling;
        }
        tagName = collect.join("").trim();
      } else if (el.classList.contains("tag-pane-tag")) {
        const inner = el.querySelector(".tag-pane-tag-text, .tree-item-inner-text");
        tagName = (_d = (_c = inner == null ? void 0 : inner.textContent) == null ? void 0 : _c.trim()) != null ? _d : "";
      } else if (el.matches('.metadata-property[data-property-key="tags"] .multi-select-pill')) {
        tagName = (_f = (_e = el.textContent) == null ? void 0 : _e.trim()) != null ? _f : "";
      } else {
        tagName = ((_h = (_g = el.getAttribute("data-tag")) != null ? _g : el.textContent) != null ? _h : "").trim();
      }
      tagName = tagName.replace(/^#/, "");
      if (!tagName)
        return;
      evt.preventDefault();
      evt.stopPropagation();
      const view = await this.activateView();
      if (view instanceof GridView) {
        await view.setSource("", "", true, `#${tagName}`);
      }
    }, true);
    this.registerDomEvent(document, "click", async (evt) => {
      var _a, _b, _c;
      if (!this.settings.interceptBreadcrumbClicks)
        return;
      if (evt.ctrlKey || evt.metaKey)
        return;
      const target = evt.target;
      const breadcrumbEl = target.closest(".view-header-breadcrumb");
      if (!breadcrumbEl || !((_a = breadcrumbEl.parentElement) == null ? void 0 : _a.classList.contains("view-header-title-parent"))) {
        return;
      }
      evt.preventDefault();
      evt.stopPropagation();
      const parentEl = breadcrumbEl.parentElement;
      const crumbs = Array.from(parentEl.querySelectorAll(".view-header-breadcrumb"));
      const clickedIndex = crumbs.indexOf(breadcrumbEl);
      if (clickedIndex < 0)
        return;
      let activeFile = this.app.workspace.getActiveFile();
      if (!activeFile) {
        return;
      }
      const folders = [];
      let currFolder = activeFile instanceof import_obsidian22.TFile ? activeFile.parent : activeFile;
      while (currFolder) {
        folders.push(currFolder);
        currFolder = currFolder.parent;
      }
      folders.reverse();
      const foldersWithoutRoot = folders.filter((f) => f.path !== "/");
      const isClickingFileCrumb = activeFile instanceof import_obsidian22.TFile && clickedIndex === crumbs.length - 1;
      let targetFolder;
      if (isClickingFileCrumb) {
        targetFolder = (_b = foldersWithoutRoot[foldersWithoutRoot.length - 1]) != null ? _b : folders[0];
      } else {
        targetFolder = (_c = foldersWithoutRoot[clickedIndex]) != null ? _c : folders[0];
      }
      if (!targetFolder)
        return;
      const folderPath = targetFolder.path;
      const view = await this.activateView();
      if (view instanceof GridView) {
        await view.setSource("folder", folderPath, true, "");
      }
    }, true);
    this.setupCanvasDropHandlers();
    const { workspace } = this.app;
    workspace.onLayoutReady(() => {
      const existingLeaves = /* @__PURE__ */ new WeakSet();
      workspace.iterateAllLeaves((leaf) => {
        existingLeaves.add(leaf);
      });
      this.registerEvent(
        workspace.on("layout-change", () => {
          this.checkForNewTab(existingLeaves);
        })
      );
      this.startWarmingCache();
    });
  }
  startWarmingCache() {
    const filesToWarm = this.app.vault.getMarkdownFiles();
    if (!filesToWarm || filesToWarm.length === 0) return;
    let fileQueue = [...filesToWarm];
    const scheduleNextBatch = (deadline) => {
      while (deadline.timeRemaining() > 0 && fileQueue.length > 0) {
        const file = fileQueue.shift();
        if (file) this.app.vault.cachedRead(file).catch(() => {});
      }
      if (fileQueue.length > 0) {
        if (typeof window.requestIdleCallback === "function") {
          window.requestIdleCallback(scheduleNextBatch);
        } else {
          setTimeout(() => scheduleNextBatch({ timeRemaining: () => 50 }), 200);
        }
      }
    };
    if (typeof window.requestIdleCallback === "function") {
      window.requestIdleCallback(scheduleNextBatch);
    } else {
      setTimeout(() => scheduleNextBatch({ timeRemaining: () => 50 }), 200);
    }
  }
  // 設定 Canvas 拖曳處理
  setupCanvasDropHandlers() {
    const setup = () => {
      this.app.workspace.getLeavesOfType("canvas").forEach((leaf) => {
        const canvasView = leaf.view;
        if (canvasView.gridExplorerDropHandler) {
          return;
        }
        canvasView.gridExplorerDropHandler = true;
        const canvasEl = canvasView.containerEl;
        if (!canvasEl)
          return;
        const dragoverHandler = (evt) => {
          var _a;
          if ((_a = evt.dataTransfer) == null ? void 0 : _a.types.includes("application/obsidian-grid-explorer-files")) {
            evt.preventDefault();
            evt.dataTransfer.dropEffect = "copy";
          }
        };
        const dropHandler = async (evt) => {
          var _a;
          if (!((_a = evt.dataTransfer) == null ? void 0 : _a.types.includes("application/obsidian-grid-explorer-files"))) {
            return;
          }
          evt.preventDefault();
          evt.stopPropagation();
          const data = evt.dataTransfer.getData("application/obsidian-grid-explorer-files");
          let filePaths = [];
          try {
            const parsed = JSON.parse(data);
            if (Array.isArray(parsed)) {
              filePaths = parsed.filter((p) => typeof p === "string");
            } else if (typeof parsed === "string") {
              filePaths = [parsed];
            }
          } catch (e) {
            console.error("GridExplorer: Failed to parse drop data from GridExplorer.", e);
          }
          if (filePaths.length === 0) {
            return;
          }
          const canvas = canvasView.canvas;
          if (!canvas) {
            return;
          }
          const pos = canvas.posFromEvt(evt);
          let currentPos = { ...pos };
          for (let i = 0; i < filePaths.length; i++) {
            const filePath = filePaths[i];
            const tfile = this.app.vault.getAbstractFileByPath(filePath);
            if (!(tfile instanceof import_obsidian22.TFile)) {
              console.warn("GridExplorer: Dropped item is not a TFile or could not be found.", filePath);
              continue;
            }
            const newNode = canvas.createFileNode({
              file: tfile,
              pos: currentPos,
              size: { width: 400, height: 400 },
              // 預設大小
              focus: filePaths.length === 1 || i === filePaths.length - 1
              // 單檔或最後一個檔案才自動對焦
            });
            canvas.addNode(newNode);
            if (filePaths.length > 1) {
              currentPos = { x: currentPos.x + 50, y: currentPos.y + 50 };
            }
          }
          await canvas.requestSave();
        };
        this.registerDomEvent(canvasEl, "dragover", dragoverHandler);
        this.registerDomEvent(canvasEl, "drop", dropHandler, true);
      });
    };
    this.registerEvent(this.app.workspace.on("layout-change", setup));
    setup();
  }
  // 打開最近文件
  async openNoteInRecentFiles(file) {
    const view = await this.activateView();
    if (view instanceof GridView) {
      await view.setSource("recent-files");
      if (file instanceof import_obsidian22.TFile) {
        requestAnimationFrame(() => {
          const gridContainer = view.containerEl.querySelector(".ge-grid-container");
          if (!gridContainer)
            return;
          const gridItem = Array.from(gridContainer.querySelectorAll(".ge-grid-item")).find(
            (item) => item.dataset.filePath === file.path
          );
          if (gridItem) {
            gridItem.scrollIntoView({ block: "nearest" });
            const itemIndex = view.gridItems.indexOf(gridItem);
            if (itemIndex >= 0) {
              view.selectItem(itemIndex);
            }
          }
        });
      }
    }
  }
  // 打開筆記到資料夾模式
  async openNoteInFolder(file = this.app.vault.getRoot()) {
    var _a;
    const folderPath = file ? file instanceof import_obsidian22.TFile ? (_a = file.parent) == null ? void 0 : _a.path : file.path : "/";
    const view = await this.activateView();
    if (view instanceof GridView) {
      await view.setSource("folder", folderPath);
      if (file instanceof import_obsidian22.TFile) {
        requestAnimationFrame(() => {
          const gridContainer = view.containerEl.querySelector(".ge-grid-container");
          if (!gridContainer)
            return;
          const gridItem = Array.from(gridContainer.querySelectorAll(".ge-grid-item")).find(
            (item) => item.dataset.filePath === file.path
          );
          if (gridItem) {
            gridItem.scrollIntoView({ block: "nearest" });
            const itemIndex = view.gridItems.indexOf(gridItem);
            if (itemIndex >= 0) {
              view.selectItem(itemIndex);
            }
          }
        });
      }
    }
  }
  // 激活視圖
  async activateView() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType("grid-view");
    if (this.settings.reuseExistingLeaf && leaves.length > 0) {
      leaf = leaves[0];
    } else {
      switch (this.settings.defaultOpenLocation) {
        case "left":
          leaf = workspace.getLeftLeaf(false);
          break;
        case "right":
          leaf = workspace.getRightLeaf(false);
          break;
        case "tab":
        default:
          leaf = workspace.getLeaf("tab");
          break;
      }
    }
    if (!leaf) {
      leaf = workspace.getLeaf("tab");
    }
    await leaf.setViewState({ type: "grid-view", active: true });
    workspace.revealLeaf(leaf);
    return leaf.view;
  }
  // Function to check for new tabs and convert them to grid-view (for useQuickAccessAsNewTabMode setting)
  checkForNewTab(existingLeaves) {
    if (this.settings.useQuickAccessAsNewTabMode === "default") {
      return;
    }
    if (this.settings.defaultOpenLocation !== "tab") {
      return;
    }
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (existingLeaves.has(leaf))
        return;
      existingLeaves.add(leaf);
      if (!this.tabIsEmpty(leaf))
        return;
      const gridViewLeaves = this.app.workspace.getLeavesOfType("grid-view");
      const openInFolder = this.settings.useQuickAccessAsNewTabMode === "folder";
      const mode = openInFolder ? "folder" : this.settings.quickAccessModeType;
      let path = "";
      if (openInFolder) {
        path = this.settings.quickAccessCommandPath || this.app.vault.getRoot().path;
        const targetFile = this.app.vault.getAbstractFileByPath(path);
        if (!(targetFile instanceof import_obsidian22.TFolder)) {
          path = this.app.vault.getRoot().path;
        }
      }
      if (this.settings.reuseExistingLeaf && gridViewLeaves.length > 0) {
        const leafToReuse = gridViewLeaves[0];
        const isSidebarLeaf = leafToReuse.getRoot() !== this.app.workspace.rootSplit;
        if (!isSidebarLeaf) {
          if (leafToReuse.view instanceof GridView) {
            leafToReuse.view.setSource(mode, path);
          }
          this.app.workspace.revealLeaf(leafToReuse);
          leaf.detach();
          return;
        }
      }
      leaf.setViewState({ type: "grid-view", active: true }).then(() => {
        if (leaf.view instanceof GridView) {
          leaf.view.setSource(mode, path);
        }
      });
    });
  }
  // Checks if a given WorkspaceLeaf is currently empty (is New Tab).
  tabIsEmpty(leaf) {
    var _a;
    return ((_a = leaf.getViewState()) == null ? void 0 : _a.type) === "empty";
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
    updateCustomDocumentExtensions(this.settings);
  }
  async saveSettings(update = true) {
    await this.saveData(this.settings);
    updateCustomDocumentExtensions(this.settings);
    if (update) {
      const gridLeaves = this.app.workspace.getLeavesOfType("grid-view");
      gridLeaves.forEach((leaf) => {
        if (leaf.view instanceof GridView) {
          leaf.view.render();
        }
      });
      const explorerLeaves = this.app.workspace.getLeavesOfType(EXPLORER_VIEW_TYPE);
      explorerLeaves.forEach((leaf) => {
        if (leaf.view instanceof ExplorerView) {
          leaf.view.refresh();
        }
      });
    }
  }
};


/* nosourcemap */